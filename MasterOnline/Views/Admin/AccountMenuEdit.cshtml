@using System.Globalization
@using MasterOnline.Models
@model MenuAccount
@*@using MasterOnline.ViewModels
    @model MenuAccountViewModel*@
@{
    ViewBag.Title = "Editor Account";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    var context_ = new MoDbContext();

    //var editMode = 0;

    //if (ViewData["Editing"] != null)
    //{
    //    editMode = (int)ViewData["Editing"];
    //}
}

@section styles
{
    <link href="~/Content/build/css/bootstrap-datepicker.min.css" rel="stylesheet" />
    <link href="~/Content/selectize.css" rel="stylesheet" />
    <link href="~/Content/build/css/selectivity-jquery.min.css" rel="stylesheet" />
    <style>
        .user-link {
            text-decoration: underline;
        }

        #akun-section {
            margin-top: 60px;
            background: white;
            padding: 20px;
        }

        .logo_perusahaan_section {
            padding: 0 10px 10px 10px;
        }

            .logo_perusahaan_section > .box_upload {
                width: 200px;
                height: 200px;
                border: dashed 1.5px #bbb;
                border-radius: 10px;
                background-color: #f7f7f7;
                background-image: url('');
                text-align: center;
                display: table;
                cursor: pointer;
            }

        .disabled-tab {
            cursor: not-allowed;
            background-color: #999 !important;
            color: #fff;
        }

            .disabled-tab:hover,
            .disabled-tab:active,
            .disabled-tab:visited {
                color: #fff;
            }
    </style>
}

<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        @*add by nurul 13/2/2019*@
        <div class="" role="tabpanel" data-example-id="togglable-tabs">
            <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#tab_content1" id="account-tab" role="tab" data-toggle="tab" aria-expanded="true">Account</a>
                </li>
                <li role="presentation" class="">
                    <a href="#tab_content2" role="tab" id="willexpired-tab" data-toggle="tab" aria-expanded="false">Akan Expired</a>
                </li>
                <li role="presentation" class="">
                    <a href="#tab_content3" role="tab" id="expired-tab" data-toggle="tab" aria-expanded="false">Sudah Expired</a>
                </li>
            </ul>
            <div id="myTabContent" class="tab-content">
                <div role="tabpanel" class="tab-pane fade active in" id="tab_content1" aria-labelledby="account-tab">
                    @*end add by nurul 13/2/2019*@
                    <div class="row user_table_section_1">
                        <div class="col-lg-4 col-sm-6">
                            <div class="input-group">
                                <input id="search_user" type="text" class="form-control" placeholder="Pencarian">
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-8 col-sm-6">
                            <div class="pull-right">
                                <button type="button" class=" btn btn-default" data-style="expand-right">
                                    <span>Refresh</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row user_table_section_1">
                        @*<div id="loading_account" class="text-center">
                <img src="~/Content/Images/spinner.gif" width="100" />
            </div>*@
                        <div class="col-sm-12" id="table-account">
                            @Html.Partial("TableAccountEdit")
                        </div>
                    </div>
                    <div class="row account_detail_section" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Detail Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-editor" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div id="form-partial-detail">
                                    @Html.Partial("AccountDetailEdit")
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row account_editor_section_1" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-form-1" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div class="form-horizontal">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2 style="font-size: 16px">Detail Account</h2>
                                                    <ul class="nav navbar-right panel_toolbox">
                                                        <li>
                                                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                        </li>
                                                    </ul>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
                                                    {
                                                        foreach (var modelError in ViewData.ModelState.SelectMany(x => x.Value.Errors))
                                                        {
                                                            <div class="alert alert-danger">
                                                                <span class="message-error">@modelError.ErrorMessage</span>
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                        }
                                                    }
                                                    <br>
                                                    @using (Html.BeginForm("SaveAccount", "Admin", FormMethod.Post, new { enctype = "multipart/form-data", id = "form-account" }))
                                                    {
                                                        <div id="form-partial">

                                                        </div>

                                                        @*@Html.AntiForgeryToken()
                    @Html.HiddenFor(m => m.Account.AccountId)
                    var setStatus = "";
                    var status1 = Model?.Account?.Status;
                    if (status1 != null)
                    {
                        if (status1 == true)
                        {
                            setStatus = "Aktif";
                        }
                        else
                        {
                            setStatus = "Tidak Aktif";
                        }
                    }


                    <div id="hidden_partner">
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.AccountId, "AccountId", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => m.Account.AccountId, new { @class = "form-control", @ReadOnly = true })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.Username, "Nama Lengkap", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => m.Account.Username, new { @class = "form-control", @ReadOnly = true })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.NamaTokoOnline, "Nama Toko Online", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => m.Account.NamaTokoOnline, new { @class = "form-control", @ReadOnly = true })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.PhotoKtpUrl, "Photo Ktp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12 logo_perusahaan_section">
                                @if (!String.IsNullOrWhiteSpace(Model?.Account?.PhotoKtpUrl))
                                {
                                    <img src="@Url.Content(Model.Account.PhotoKtpUrl)" width="65%" />
                                }
                                else
                                {
                                    <img src="~/Content/Images/no-img-market.jpg" />
                                }
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.KODE_REFERRAL, "Kode Referral", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => m.Account.KODE_REFERRAL, new { @class = "form-control", @ReadOnly = true })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.Status, "Status", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => setStatus, new { @class = "form-control", @ReadOnly = true })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(m => m.Account.TGL_DAFTAR, "Tanggal Daftar", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                @Html.TextBoxFor(m => m.Account.TGL_DAFTAR, new { @class = "form-control", @ReadOnly = true, Value = Model?.Account?.TGL_DAFTAR?.ToString("dd/MM/yyyy") })
                            </div>
                        </div>

                        <div id="photo_base">
                            <div class="form-group">
                                @Html.LabelFor(m => m.Account.DatabasePathErasoft, "DatabasePathErasoft", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    @Html.TextBoxFor(m => m.Account.DatabasePathErasoft, new { @class = "form-control", @ReadOnly = true })
                                </div>
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.Account.VCode, "VCode", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    @Html.TextBoxFor(m => m.Account.VCode, new { @class = "form-control", @ReadOnly = true })
                                </div>
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.Account.UserId, "User Id", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    @Html.TextBoxFor(m => m.Account.UserId, new { @class = "form-control", @ReadOnly = true })
                                </div>
                            </div>
                            <div class="form-group">
                                @Html.LabelFor(m => m.Account.Password, "Password", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    @Html.TextBoxFor(m => m.Account.Password, new { @class = "form-control", @ReadOnly = true })
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="form-group">
                        @Html.LabelFor(m => m.Account.Email, "Email", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            @Html.TextBoxFor(m => m.Account.Email, new { @class = "form-control", @autocomplete = "false", type = "email", required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.Account.NoHp, "No Hp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            @Html.TextBoxFor(m => m.Account.NoHp, new { @class = "form-control num-only", min = 0, max = 999999999999999, @data_val_length_max = 15 })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.Account.KODE_SUBSCRIPTION, "Tipe Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            @Html.DropDownListFor(m => m.Account.KODE_SUBSCRIPTION, new List<SelectListItem>()
            {
                new SelectListItem()
                {
                    Text = @"BASIC",
                    Value = "01",
                },
                new SelectListItem()
                {
                    Text = @"SILVER",
                    Value = "02"
                },
                new SelectListItem()
                {
                    Text = @"GOLD",
                    Value = "03"
                }
            }, new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.Account.TGL_SUBSCRIPTION, "Tanggal Berakhir Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            @Html.HiddenFor(m => m.Account.TGL_SUBSCRIPTION, new { @class = "form-control", Value = Model?.Account?.TGL_SUBSCRIPTION?.ToString("dd/MM/yyyy") })
                            <div class="input-group date">
                                <input type="text" id="TGL" class="form-control" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.Account.jumlahUser, "Jumlah User", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            @Html.TextBoxFor(m => m.Account.jumlahUser, new { @class = "form-control num-only", Value = (Model?.Account?.jumlahUser == null ? 0 : Model.Account.jumlahUser), min = 0, max = 99999 })
                        </div>
                    </div>

                    <hr />
                    <button type="submit" id="simpan_btn" class="btn btn-primary pull-right">Simpan</button>*@
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane fade" id="tab_content2" aria-labelledby="willexpired-tab">
                    @*end add by nurul 13/2/2019*@
                    <div class="row user_table_section_2">
                        <div class="col-lg-4 col-sm-6">
                            <div class="input-group">
                                <input id="search_willexpired" type="text" class="form-control" placeholder="Pencarian">
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-8 col-sm-6">
                            <div class="pull-right">
                                <button type="button" class=" btn btn-default" data-style="expand-right">
                                    <span>Refresh</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row user_table_section_2">
                        <div class="col-md-2">
                            @Html.Label("", "Dari Tanggal")

                            <div class="input-group date">
                                @*@Html.TextBox("DrTanggal", null, new { @class = "form-control", @disabled = "disable", Value = DateTime.Now.AddMonths(-3).ToString("dd/MM/yyyy") })*@
                                @Html.TextBox("DrTanggal", null, new { @class = "form-control", @ReadOnly = true })
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-2">
                            @Html.Label("", "S/d Tanggal")

                            <div class="input-group date">
                                @*@Html.TextBox("SdTanggal", null, new { @class = "form-control", @disabled = "disable", Value = DateTime.Now.ToString("dd/MM/yyyy") })*@
                                @Html.TextBox("SdTanggal", null, new { @class = "form-control", @ReadOnly = true })
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-8">
                        </div>
                    </div>
                    <div class="row user_table_section_2">
                        @*<div id="loading_willexpired" class="text-center">
                <img src="~/Content/Images/spinner.gif" width="100" />
            </div>*@
                        <div class="col-sm-12" id="table-account-will-expired">
                            @Html.Partial("TableAccountWillExpiredEdit")
                        </div>
                    </div>
                    <div class="row WillExpired_detail_section" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Detail Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-editor-2" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div id="form-partial-WillExpired">
                                    @Html.Partial("AccountDetailEdit")
                                </div>
                            </div>
                        </div>
                    </div>
                    @*<div class="row account_editor_section_2" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-form-2" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div class="form-horizontal">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2 style="font-size: 16px">Detail Account</h2>
                                                    <ul class="nav navbar-right panel_toolbox">
                                                        <li>
                                                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                        </li>
                                                    </ul>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
                                                    {
                                                        foreach (var modelError in ViewData.ModelState.SelectMany(x => x.Value.Errors))
                                                        {
                                                            <div class="alert alert-danger">
                                                                <span class="message-error">@modelError.ErrorMessage</span>
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                        }
                                                    }
                                                    <br>
                                                    @using (Html.BeginForm("SaveAccount", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                                    {
                                                        @Html.AntiForgeryToken()
                                                        @Html.HiddenFor(m => m.Account.AccountId)
                                                        var setStatus = "";
                                                        var status1 = Model?.Account?.Status;
                                                        if (status1 != null)
                                                        {
                                                            if (status1 == true)
                                                            {
                                                                setStatus = "Aktif";
                                                            }
                                                            else
                                                            {
                                                                setStatus = "Tidak Aktif";
                                                            }
                                                        }


                                                        <div id="hidden_partner">
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.AccountId, "AccountId", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.AccountId, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.Username, "Nama Lengkap", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.Username, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.NamaTokoOnline, "Nama Toko Online", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.NamaTokoOnline, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.PhotoKtpUrl, "Photo Ktp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12 logo_perusahaan_section">
                                                                    @if (!String.IsNullOrWhiteSpace(Model?.Account?.PhotoKtpUrl))
                                                                    {
                                                                        <img src="@Url.Content(Model.Account.PhotoKtpUrl)" width="65%" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <img src="~/Content/Images/no-img-market.jpg" />
                                                                    }
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.KODE_REFERRAL, "Kode Referral", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.KODE_REFERRAL, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.Status, "Status", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => setStatus, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.TGL_DAFTAR, "Tanggal Daftar", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.TGL_DAFTAR, new { @class = "form-control", @ReadOnly = true, Value = Model?.Account?.TGL_DAFTAR?.ToString("dd/MM/yyyy") })
                                                                </div>
                                                            </div>

                                                            <div id="photo_base">
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.DatabasePathErasoft, "DatabasePathErasoft", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.DatabasePathErasoft, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.VCode, "VCode", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.VCode, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.UserId, "User Id", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.UserId, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.Password, "Password", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.Password, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.Email, "Email", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.Email, new { @class = "form-control", @autocomplete = "false", type = "email", required = "required" })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.NoHp, "No Hp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.NoHp, new { @class = "form-control num-only", min = 0, max = 999999999999999 })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.KODE_SUBSCRIPTION, "Tipe Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.DropDownListFor(m => m.Account.KODE_SUBSCRIPTION, new List<SelectListItem>()
                                                {
                                                    new SelectListItem()
                                                    {
                                                        Text = @"BASIC",
                                                        Value = "01",
                                                    },
                                                    new SelectListItem()
                                                    {
                                                        Text = @"SILVER",
                                                        Value = "02"
                                                    },
                                                    new SelectListItem()
                                                    {
                                                        Text = @"GOLD",
                                                        Value = "03"
                                                    }
                                                }, new { @class = "form-control" })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.TGL_SUBSCRIPTION, "Tanggal Berakhir Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.HiddenFor(m => m.Account.TGL_SUBSCRIPTION, new { @class = "form-control", Value = Model?.Account?.TGL_SUBSCRIPTION?.ToString("dd/MM/yyyy") })
                                                                <div class="input-group date">
                                                                    <input type="text" id="TGL" class="form-control" />
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.jumlahUser, "Jumlah User", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.jumlahUser, new { @class = "form-control num-only", Value = (Model?.Account?.jumlahUser == null ? 0 : Model.Account.jumlahUser), min = 0, max = 99999 })
                                                            </div>
                                                        </div>

                                                        <hr />
                                                        <input type="button" class="btn btn-primary pull-right" value="Simpan" id="simpan_btn" onclick="simpanAccount2(this)" />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>*@
                </div>
                <div role="tabpanel" class="tab-pane fade" id="tab_content3" aria-labelledby="expired-tab">
                    @*end add by nurul 13/2/2019*@
                    <div class="row user_table_section_3">
                        <div class="col-lg-4 col-sm-6">
                            <div class="input-group">
                                <input id="search_expired" type="text" class="form-control" placeholder="Pencarian">
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <div class="col-lg-8 col-sm-6">
                            <div class="pull-right">
                                <button type="button" class=" btn btn-default" data-style="expand-right">
                                    <span>Refresh</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row user_table_section_3">
                        <div class="col-md-2">
                            @Html.Label("", "Per Tanggal")

                            <div class="input-group date">
                                @*@Html.TextBox("DrTanggal", null, new { @class = "form-control", @disabled = "disable", Value = DateTime.Now.AddMonths(-3).ToString("dd/MM/yyyy") })*@
                                @Html.TextBox("PerTanggal", null, new { @class = "form-control", @ReadOnly = true })
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-10">
                        </div>
                    </div>
                    <div class="row user_table_section_3">
                        @*<div id="loading_expired" class="text-center">
                <img src="~/Content/Images/spinner.gif" width="100" />
            </div>*@
                        <div class="col-sm-12" id="table-account-expired">
                            @Html.Partial("TableAccountExpiredEdit")
                        </div>
                    </div>
                    <div class="row Expired_detail_section" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Detail Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-editor-3" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div id="form-partial-Expired">
                                    @Html.Partial("AccountDetailEdit")
                                </div>
                            </div>
                        </div>
                    </div>
                    @*<div class="row account_editor_section_3" style="display: none;">
                        <div class="col-lg-12">
                            <div class="page-editor">
                                <h2 class="editor-title">Account</h2>
                                <span class="title-accent"></span>
                                <button id="close-form-3" type="button" class="pull-right page-close">
                                    <span class="close-btn thick"></span>
                                </button>
                                <div class="form-horizontal">
                                    <div class="row">
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2 style="font-size: 16px">Detail Account</h2>
                                                    <ul class="nav navbar-right panel_toolbox">
                                                        <li>
                                                            <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                        </li>
                                                    </ul>
                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
                                                    {
                                                        foreach (var modelError in ViewData.ModelState.SelectMany(x => x.Value.Errors))
                                                        {
                                                            <div class="alert alert-danger">
                                                                <span class="message-error">@modelError.ErrorMessage</span>
                                                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                                    <span aria-hidden="true">&times;</span>
                                                                </button>
                                                            </div>
                                                        }
                                                    }
                                                    <br>
                                                    @using (Html.BeginForm("SaveAccount", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
                                                    {
                                                        @Html.AntiForgeryToken()
                                                        @Html.HiddenFor(m => m.Account.AccountId)
                                                        var setStatus = "";
                                                        var status1 = Model?.Account?.Status;
                                                        if (status1 != null)
                                                        {
                                                            if (status1 == true)
                                                            {
                                                                setStatus = "Aktif";
                                                            }
                                                            else
                                                            {
                                                                setStatus = "Tidak Aktif";
                                                            }
                                                        }


                                                        <div id="hidden_partner">
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.AccountId, "AccountId", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.AccountId, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.Username, "Nama Lengkap", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.Username, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.NamaTokoOnline, "Nama Toko Online", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.NamaTokoOnline, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.PhotoKtpUrl, "Photo Ktp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12 logo_perusahaan_section">
                                                                    @if (!String.IsNullOrWhiteSpace(Model?.Account?.PhotoKtpUrl))
                                                                    {
                                                                        <img src="@Url.Content(Model.Account.PhotoKtpUrl)" width="65%" />
                                                                    }
                                                                    else
                                                                    {
                                                                        <img src="~/Content/Images/no-img-market.jpg" />
                                                                    }
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.KODE_REFERRAL, "Kode Referral", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.KODE_REFERRAL, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.Status, "Status", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => setStatus, new { @class = "form-control", @ReadOnly = true })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(m => m.Account.TGL_DAFTAR, "Tanggal Daftar", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                                    @Html.TextBoxFor(m => m.Account.TGL_DAFTAR, new { @class = "form-control", @ReadOnly = true, Value = Model?.Account?.TGL_DAFTAR?.ToString("dd/MM/yyyy") })
                                                                </div>
                                                            </div>

                                                            <div id="photo_base">
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.DatabasePathErasoft, "DatabasePathErasoft", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.DatabasePathErasoft, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.VCode, "VCode", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.VCode, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.UserId, "User Id", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.UserId, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    @Html.LabelFor(m => m.Account.Password, "Password", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                                        @Html.TextBoxFor(m => m.Account.Password, new { @class = "form-control", @ReadOnly = true })
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.Email, "Email", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.Email, new { @class = "form-control", @autocomplete = "false", type = "email", required = "required" })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.NoHp, "No Hp", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.NoHp, new { @class = "form-control num-only", min = 0, max = 999999999999999 })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.KODE_SUBSCRIPTION, "Tipe Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.DropDownListFor(m => m.Account.KODE_SUBSCRIPTION, new List<SelectListItem>()
                                                {
                                                    new SelectListItem()
                                                    {
                                                        Text = @"BASIC",
                                                        Value = "01",
                                                    },
                                                    new SelectListItem()
                                                    {
                                                        Text = @"SILVER",
                                                        Value = "02"
                                                    },
                                                    new SelectListItem()
                                                    {
                                                        Text = @"GOLD",
                                                        Value = "03"
                                                    }
                                                }, new { @class = "form-control" })
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.TGL_SUBSCRIPTION, "Tanggal Berakhir Subscribe", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.HiddenFor(m => m.Account.TGL_SUBSCRIPTION, new { @class = "form-control", Value = Model?.Account?.TGL_SUBSCRIPTION?.ToString("dd/MM/yyyy") })
                                                                <div class="input-group date">
                                                                    <input type="text" id="TGL" class="form-control" />
                                                                    <span class="input-group-addon">
                                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            @Html.LabelFor(m => m.Account.jumlahUser, "Jumlah User", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                                @Html.TextBoxFor(m => m.Account.jumlahUser, new { @class = "form-control num-only", Value = (Model?.Account?.jumlahUser == null ? 0 : Model.Account.jumlahUser), min = 0, max = 99999 })
                                                            </div>
                                                        </div>

                                                        <hr />
                                                        <input type="button" class="btn btn-primary pull-right" value="Simpan" id="simpan_btn" onclick="simpanAccount3(this)" />
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>*@
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="konfUbahStatus" tabindex="-1" role="dialog" aria-labelledby="konfUbahStatusLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="konfUbahStatusLabel">Konfirmasi</h4>
            </div>
            <div class="modal-body">
                <div class="row text-center">
                    <h4>Apakah Anda yakin ingin <span id="will-change-to"></span> user ini?</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Tidak</button>
                <button type="button" class="btn btn-success" onclick="ubahStatusAcc()">Ya</button>
            </div>
        </div>
    </div>
</div>

@section scripts
{
    <script src="//cdn.datatables.net/plug-ins/1.10.11/sorting/date-eu.js" type="text/javascript"></script>
    <script src="~/Content/build/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
    <script src="~/Content/selectize.js" type="text/javascript"></script>
    <script src="~/Content/build/js/selectivity-jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var $page = window.text;
        var $accId = 0;
        var $status = 0;
        var $tabPage = 0; //acoount ; 1=will expired; 2= expired
        var table = $('#datatable').DataTable({
            "order": [[5, "desc"], [1, "asc"]], //or asc
            "columnDefs": [{ "targets": 5, "type": "date-eu" }],
        });
        var tableWillexpired = $('#datatable_willexpired').DataTable({
            "order": [[5, "desc"], [1, "asc"]], //or asc
            "columnDefs": [{ "targets": 5, "type": "date-eu" }],
        });
        var tableExpired = $('#datatable_expired').DataTable({
            "order": [[5, "desc"], [1, "asc"]], //or asc
            "columnDefs": [{ "targets": 5, "type": "date-eu" }],
        });
        $(document).on('ready',
            function () {
                $page = 0;
                
                $('#search_user').keyup(function () {
                    table.search($(this).val()).draw();
                });
                //add by nurul 13/2/2019
                

                $('#search_willexpired').keyup(function () {
                    tableWillexpired.search($(this).val()).draw();
                });
                $('#search_expired').keyup(function () {
                    tableExpired.search($(this).val()).draw();
                });

                $('#account-tab').click(function () {
                    $tabPage = 0;
                    refreshTableAccount();
                });
                $('#willexpired-tab').click(function () {
                    $tabPage = 1;
                    var d = new Date();
                    d.setMonth(d.getMonth() + 1);
                    $('#DrTanggal').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).datepicker('setDate', '0').change(function () {
                        $('#DrTanggal').val($('#DrTanggal').val());
                        $('#DrTanggal').datepicker('hide');
                        refreshTableWillexpired();
                    });
                    $('#SdTanggal').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).datepicker('setDate', d).change(function () {
                        $('#SdTanggal').val($('#SdTanggal').val());
                        $('#SdTanggal').datepicker('hide');
                        refreshTableWillexpired();
                    });
                    refreshTableWillexpired();
                });
                $('#expired-tab').click(function () {
                    $tabPage = 2;
                    $('#PerTanggal').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).datepicker('setDate', '0').change(function () {
                        $('#PerTanggal').val($('#PerTanggal').val());
                        $('#PerTanggal').datepicker('hide');
                        refreshTableExpired();
                    });
                    refreshTableExpired();
                });
                //end add by nurul 13/2/2019

                //add by nurul 20/2/2019
                $('#close-editor').off('click').on('click', function () {
                        $('.user_table_section_1').show();
                    $('.account_detail_section').hide();
                    $('.account_editor_section_1').hide();

                    $('#myTab li a').each(function (index) {
                        $(this).attr('data-toggle', 'tab');
                        $(this).removeClass('disabled-tab');
                    });
                    $('#datatable').on('page.dt', function () {
                        $page = $('#datatable').DataTable().page.info().page;
                    });
                    //refreshForm();
                        refreshTableAccount();
                        
                        $('#datatable').DataTable().page($page).draw(false);
                });
                $('#close-editor-2').off('click').on('click', function () {
                    $('.user_table_section_2').show();
                    $('.WillExpired_detail_section').hide();

                    refreshTableAccount();
                    $('#datatable_willexpired').on('page.dt', function () {
                        $page = $('#datatable_willexpired').DataTable().page.info().page;
                    });
                    $('#datatable_willexpired').DataTable().page($page).draw(false);
                });
                $('#close-editor-3').off('click').on('click', function () {
                    $('.user_table_section_3').show();
                    $('.Expired_detail_section').hide();

                    refreshTableAccount();
                    $('#datatable_expired').on('page.dt', function () {
                        $page = $('#datatable_expired').DataTable().page.info().page;
                    });
                    $('#datatable_expired').DataTable().page($page).draw(false);
                });

                $('#datatable').on('page.dt', function () {
                    $page = $('#datatable').DataTable().page.info().page;
                });
                $('#datatable').DataTable().page($page).draw(false);
                //end add by nurul 20/2/2019

                
                $('#close-form-1').off('click').on('click', function () {
                    
                    $('.user_table_section_1').show();
                    $('.account_detail_section').hide();
                    $('.account_editor_section_1').hide();

                    $('#myTab li a').each(function (index) {
                        $(this).attr('data-toggle', 'tab');
                        $(this).removeClass('disabled-tab');
                    });
                    //refreshForm();
                    $('#datatable').on('page.dt', function () {
                        $page = $('#datatable').DataTable().page.info().page;
                    });
                    refreshTableAccount();
                    
                    $('#datatable').DataTable().page($page).draw(false);
                });

                //$('button>.close-btn').on('click', function () {
                //    //if ($tabPage == 0) {
                //        $('.user_table_section_1').toggle('display');
                //        $('.account_editor_section_1').toggle('display');
                //        $('.account_detail_section').hide();
                //    $('#photo_base').hide()

                //    $('#datatable').on('page.dt', function () {
                //        $page = $('#datatable').DataTable().page.info().page;
                //    });
                //    $('#datatable').DataTable().page($page).draw(false);
                //});
                if ($('.message-error').text() !== '' ) {
                    //if ($tabPage == 0) {
                        $('.user_table_section_1').hide();
                        $('.account_editor_section_1').show();
                        $('.account_detail_section').hide();
                    $('#photo_base').hide()
                    if ($('#Account_TGL_SUBSCRIPTION').val() != '') {
                        $('#TGL').val($('#Account_TGL_SUBSCRIPTION').val());
                    }

                    $('#TGL').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).change(function () {
                        $('#Account_TGL_SUBSCRIPTION').val($(this).val());
                        $(this).datepicker('hide');
                    });

                    $('#datatable').on('page.dt', function () {
                        $page = $('#datatable').DataTable().page.info().page;
                    });
                    $('#datatable').DataTable().page($page).draw(false);
                }
                @*$('.close-btn').click(function() {
                    location.href = '@Url.Action("AccountMenuEdit")';

                    $('#datatable').on('page.dt', function () {
                        $page = $('#datatable').DataTable().page.info().page;
                    });
                    $('#datatable').DataTable().page($page).draw(false);
                });*@

            });

        function editAccount($Id) {
            var link = '@Url.Action("EditAccount", "Admin", new { accountId = "replaceId" })';
            link = link.replace("replaceId", $Id);

            //location.href = link;
            $.ajax({
                async: true,
                type: "GET",
                url: link,
                success: function (response) {
                    $('#form-partial').html(response);

                    $('.user_table_section_1').hide();
                    $('.account_detail_section').hide();
                    $('.account_editor_section_1').show();
                    $('#photo_base').hide()
                    $('#myTab li a').each(function () {
                        $(this).removeAttr('data-toggle');

                        if ($(this).attr('id') === 'account-tab') return;

                        $(this).addClass('disabled-tab');

                    });

                    if ($('#Account_TGL_SUBSCRIPTION').val() != '') {
                        $('#TGL').val($('#Account_TGL_SUBSCRIPTION').val());
                    }

                    $('#TGL').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).change(function () {
                        $('#Account_TGL_SUBSCRIPTION').val($(this).val());
                        $(this).datepicker('hide');
                        });

                    $("#Account_NoHp").keydown(
                        function () {
                            validateInput($(this), 'ANGKA');
                        });
                    $("#Account_jumlahUser").keydown(
                        function () {
                            validateInput($(this), 'ANGKA');
                        });

                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
            
        }

        function passAcc(accId, status) {
            this.$accId = accId;
            this.$status = status;

            if (this.$status === 1) {
                $('#will-change-to').text("menonaktifkan");
            } else {
                $('#will-change-to').text("mengaktifkan");
            }
        }

        function ubahStatusAcc() {
            var link = '@Url.Action("ChangeStatusAcc", "Admin", new { accId = "replaceId" })';
            link = link.replace("replaceId", this.$accId);

            location.href = link;
        }

        //add by nurul 13/2/2019
        function refreshTableAccount() {
            var link = '@Url.Action("RefreshAccountMenuEdit", "Admin")';

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#table-account').html(response);
                    var table = $('#datatable').DataTable({
                        "order": [[5, "desc"], [1, "asc"]], //or asc
                        "columnDefs": [{ "targets": 5, "type": "date-eu" }],
                    });
                    $('#search_user').keyup(function () {
                        table.search($(this).val()).draw();
                    });
                    $('#datatable').show();
                    table.search($('#search_user').val()).draw();

                    $('#datatable').on('page.dt', function () {
                        $page = $('#datatable').DataTable().page.info().page;
                    });
                    $('#datatable').DataTable().page($page).draw(false);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function refreshTableWillexpired() {
            var link = '@Url.Action("AccountMenuWillExpiredEdit", "Admin", new { param = "replacedrtgl;replacesdtgl" })';
            link = link.replace("replacedrtgl", $('#DrTanggal').val());
            link = link.replace("replacesdtgl", $('#SdTanggal').val());

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#table-account-will-expired').html(response);
                    var tableWillexpired = $('#datatable_willexpired').DataTable({
                        "order": [[5, "desc"], [1, "asc"]], //or asc
                        "columnDefs": [{ "targets": 5, "type": "date-eu" }],
                    });
                    $('#search_willexpired').keyup(function () {
                        tableWillexpired.search($(this).val()).draw();
                    });
                    $('#datatable_willexpired').show();
                    tableWillexpired.search($('#search_willexpired').val()).draw();
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function refreshTableExpired() {
            var link = '@Url.Action("AccountMenuExpiredEdit", "Admin", new { param = "replacepertgl" })';
            link = link.replace("replacepertgl", $('#PerTanggal').val());

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#table-account-expired').html(response);
                    var tableExpired = $('#datatable_expired').DataTable({
                        "order": [[5, "desc"], [1, "asc"]], //or asc
                        "columnDefs": [{ "targets": 5, "type": "date-eu" }],
                    });
                    $('#search_expired').keyup(function () {
                        tableExpired.search($(this).val()).draw();
                    });
                    $('#datatable_expired').show();
                    tableExpired.search($('#search_expired').val()).draw();
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function LihatAccount(IdAccount) {
            var link = '@Url.Action("AccountDetailEdit", "Admin", new { accId = "replaceId" })';
            link = link.replace("replaceId", IdAccount);

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#form-partial-detail').html(response);
                    $('.user_table_section_1').hide();
                    $('.account_detail_section').show();
                    $('.account_editor_section_1').hide();
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function LihatAccount2(IdAccount) {
            var link = '@Url.Action("AccountDetailEdit", "Admin", new { accId = "replaceId" })';
            link = link.replace("replaceId", IdAccount);

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#form-partial-WillExpired').html(response);
                    $('.user_table_section_2').hide();
                    $('.WillExpired_detail_section').show();
                    
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function LihatAccount3(IdAccount) {
            var link = '@Url.Action("AccountDetailEdit", "Admin", new { accId = "replaceId" })';
            link = link.replace("replaceId", IdAccount);

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    $('#form-partial-Expired').html(response);
                    $('.user_table_section_3').hide();
                    $('.Expired_detail_section').show();
                    
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }

        function simpanAccount($id) {

            $.ajax({
                        type: "POST",
                        url: '@Url.Action("SaveAccount", "Admin")',
                        data: $('#form-account').serialize(),
                success: function (response) {
                    alert('Data berhasil tersimpan');
                    //$('.user_table_section_2').toggle('display');
                    //$('.account_editor_section_2').toggle('display');
                    //$('.WillExpired_detail_section').hide();
                    //$('#photo_base').hide()
                    $('#form-partial').html(response);
                    $('#photo_base').hide()
                    if ($('#Account_TGL_SUBSCRIPTION').val() != '') {
                        $('#TGL').val($('#Account_TGL_SUBSCRIPTION').val());
                    }
                    $('#TGL').datepicker({
                        format: 'dd/mm/yyyy',
                        language: 'id'
                    }).change(function () {
                        $('#Account_TGL_SUBSCRIPTION').val($(this).val());
                        $(this).datepicker('hide');
                        });

                    $("#Account_NoHp").keydown(
                        function () {
                            validateInput($(this), 'ANGKA');
                        });
                    $("#Account_jumlahUser").keydown(
                        function () {
                            validateInput($(this), 'ANGKA');
                        });
                    
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });

        }

        //add by nurul 22/10/2018
        function validateInput(obj, option) {
            var x = obj;
            setTimeout(function () {
                ValidateFullNamePaste2(x, option);
            }, 2);
        }

        function ValidateFullNamePaste2(obj, option) {
            var x = obj;
            var strValidChars = "";
            var totalCharacterCount = x.val();  //window.clipboardData.getData('Text');

            if (option == 'HURUF')
                strValidChars = "1234567890~!#$%^&*()_+|}{':;?/>.<,\"[]\\=";
            if (option == 'HURUFANGKA')
                strValidChars = "~!#$%^&*()_+|}{':;?/>.<,\"[]\\=";
            if (option == 'ANGKA')
                strValidChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!#$%^&*()_+|}{':;?/><,\"[]\\=";
            if (option == 'TOP')
                strValidChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!#$%^&*()_+|}{':;?/>.<,-\"[]\\=";

            var strChar;
            var FilteredChars = "";
            for (i = 0; i < totalCharacterCount.length; i++) {
                strChar = totalCharacterCount.charAt(i);
                if (strValidChars.indexOf(strChar) == -1) {
                    FilteredChars = FilteredChars + strChar;
                }
            }
            obj.val(FilteredChars);
            return false;
        }
        //end add by nurul 13/2/2019
    </script>
}
@{
    ViewBag.Title = "Prompt Customer";
    Layout = "~/Views/Shared/_LayoutManage.cshtml";
}
@section styles
{
    <style>
        .top_nav {
            display: none !important;
        }

        .close-btn {
            display: none;
        }
    </style>
}

@*<table id="datatable" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
    <thead>
        <tr role="row">
            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 130px;">Nama Marketplace</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 100px;">Nama Toko</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 50px; max-width: 50px;">Pilih</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.MARKETPLACE</td>
                <td>@item.NAMA</td>
                <td class="edit-hapus-col">
                    <button class="btn btn-primary" onclick="pilihPrompt('@item.KODE', '@item.MARKETPLACE' + '(@item.NAMA)')">
                        <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>*@
<div>
    <div class="row">
        <div class="col-lg-4 col-sm-6">
            <div class="input-group">
                <input id="search_prompt" type="text" class="form-control" placeholder="Pencarian">
                <span class="input-group-btn">
                    <button type="button" id="search_prompt_btn" class="btn btn-primary">
                        <i class="fa fa-search"></i>
                    </button>
                </span>
            </div>
        </div>
    </div>
    <div class="row" style="margin-top: 5px;">
        <div class="col-md-12 col-sm-12 col-xs-12" id="divPartial">
        </div>
    </div>
</div>

@section scripts
{
    <script>
        $(document).ready(function () {
        refreshTablePrompt();
    });

    $('#search_prompt').keypress(function (e) {
        var key = e.which;
        if (key == 13)// the enter key code
        {
            refreshTablePrompt();
            return false;
        }
    });
    $('#search_prompt_btn').click(function () {
        refreshTablePrompt();
    });

    function refreshTablePrompt() {
        var $link = '@Html.Raw(Url.Action("RefreshPromptCustomer", "Manage", new { page = "replaceLastPage", search = "replaceSearch" }))';
        $link = $link.replace("replaceSearch", encodeURIComponent($('#search_prompt').val()));
        $link = $link.replace("replaceLastPage", encodeURIComponent($('#txt_last_page').val()));

        $.ajax({
            type: "GET",
            url: $link,
            beforeSend: function () {
                //$('#divPartial').hide();
                $('#loading_prompt').show();
            },
            success: function (response) {
                $('#divPartial').html(response);
                $('#loading_prompt').hide();
                //$('#divPartial').show();
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }

        function pilihPrompt($value, $value2) {
            self.window.close();
            window.onunload = refreshTextBox;
            function refreshTextBox() {
                window.opener.afterPromptDelTempCust($value, $value2);
            }
        }
    </script>
}

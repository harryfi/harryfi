@using System.Globalization
@using MasterOnline.ViewModels
@model MasterOnline.ViewModels.BarangDetailVarViewModel
@{
//var dataSession = Session["SessionInfo"] as AccountUserViewModel;
//var username = "";
//var context = new MoDbContext();
//if (dataSession?.User != null)
//{
//    var accId = context.User.Single(u => u.Username == dataSession.User.Username).AccountId;
//    username = context.Account.Single(a => a.AccountId == accId).Username;
//}
//else
//{
//    username = dataSession?.Account.Username;
//}
}
@Html.AntiForgeryToken()
<style>
    .foto_produk_section {
        padding: 5px;
    }

        .foto_produk_section > .box_upload_var {
            width: 100px;
            height: 100px;
            border: dashed 1.5px #bbb;
            border-radius: 10px;
            background-color: #f7f7f7;
            background-image: url('');
            text-align: center;
            display: table;
            margin: 0 auto;
            cursor: pointer;
        }

    .box_upload_var > .box_upload_placeholder {
        color: #ccc;
        font-size: 20px;
        display: table-cell;
        vertical-align: middle;
    }

    .foto_produk_section > .box_upload_var_blibli {
        width: 100px;
        height: 100px;
        border: dashed 1.5px #bbb;
        border-radius: 10px;
        background-color: #f7f7f7;
        background-image: url('');
        text-align: center;
        display: table;
        margin: 0 auto;
        cursor: pointer;
    }

    .box_upload_var_blibli > .box_upload_placeholder {
        color: #ccc;
        font-size: 20px;
        display: table-cell;
        vertical-align: middle;
    }

    /*.btn_hapus_foto_produk_var {
        position: absolute;
        bottom: 15px;
        left: 48px;
    }*/
</style>
<script type="text/javascript">

    var validImageVar = ["image/jpeg"];

    $(document).ready(function () {
        $(function () {
            $('#variant-tabs-2 a:first').tab('show');
        });

        $("input[type=file]").off('click').on("click",
            function (e) {
                e.stopPropagation();
            });

        if ($('.foto_produk_var').length > 0) {
            $('#simpan_variant_btn').show();
            //if (true) {

            //}
            //$('#proses_detail_var_btn').attr('disabled', 'disabled');
        }
        else {
            $('#simpan_variant_btn').hide();
            //$('#proses_detail_var_btn').removeAttr('disabled');
        }

        $('.btn_hapus_foto_produk_var').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            var data_barang_kode = $(item).attr("data-barang-kode");
            $('#btn_hapus_var_' + data_barang_id).hide();
            $('#btn_hapus_var_' + data_barang_id).off('click').on('click', function () {
                var $link = '@Html.Raw(Url.Action("DeleteFotoProduk", "Manage", new { kodeBarang = "replaceKode", urutan = "replaceUrutan" }))';
                $link = $link.replace("replaceKode", encodeURIComponent(data_barang_kode));
                $link = $link.replace("replaceUrutan", 1);

                $.ajax({
                    url: $link,
                    type: 'GET',
                    success: function () {
                        var str = $('#hidden_url_gambar_var_' + data_barang_id).val();
                        var n = str.lastIndexOf('/');
                        var keyNameFile = str.substring(n + 1);

                        deleteObjectByFileName(keyNameFile);

                        $('#foto_produk_var_' + data_barang_id).val(null);
                        $('#box_upload_var_' + data_barang_id).css('background-image', '');
                        $('#box_upload_var_' + data_barang_id + ' span').show();
                        $('#btn_hapus_var_' + data_barang_id).hide();
                    },
                    error: function () {
                    }
                });

                return;
            });
        });

        $('.foto_produk_var').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            $('#foto_produk_var_' + data_barang_id).hide();
            $('#foto_produk_var_' + data_barang_id).off('change').on('change', function () {
                var file = this.files[0];
                var fileType = file["type"];
                if ($.inArray(fileType, validImageVar) < 0) {
                    alert('Hanya boleh file berformat .jpg!');
                    return;
                }
                var reader = new FileReader();
                reader.onloadend = function () {
                    $('#box_upload_var_' + data_barang_id).css('background-image', 'url("' + reader.result + '")')
                        .css('background-size', 'cover');
                    $('#box_upload_var_' + data_barang_id + ' span').hide();
                    $('#btn_hapus_var_' + data_barang_id).show();
                }
                if (file) {
                    reader.readAsDataURL(file);
                }
            });
        });

        $('.box_upload_var').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            $(item).off('click').on('click', function () {
                $('#foto_produk_var_' + data_barang_id).click();
            });
        });

        getFotoProdukVariant();

        $('#variant-section input[data-jenis="hjual_var"]').off('focus').focus(function () {
            $(this).val(convertToAngka($(this).val()));
        });

        $('#variant-section input[data-jenis="hjual_var"]').off('change').on('change', function () {
            var input = $(this).val();
            var rupiah = convertToRupiah(input);
            $(this).val(rupiah);
        });

        $('#variant-section input[data-jenis="hjual_var"]').off('keydown').on('keydown',
            function (e) {
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 110, 190]) !== -1 ||
                    // Allow: Ctrl+A, Command+A
                    (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                    // Allow: home, end, left, right, down, up
                    (e.keyCode >= 35 && e.keyCode <= 40)) {
                    // let it happen, don't do anything
                    return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

        //foto per varian blibli
        $('.btn_hapus_foto_produk_var_blibli').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            var data_barang_kode = $(item).attr("data-barang-kode");
            $('#btn_hapus_var_blibli_' + data_barang_id).hide();
            $('#btn_hapus_var_blibli_' + data_barang_id).off('click').on('click', function () {
                var $link = '@Html.Raw(Url.Action("DeleteFotoProdukBliVar", "Manage", new { recnum = "replaceKode", urutan = "replaceUrutan" }))';
                $link = $link.replace("replaceKode", encodeURIComponent(data_barang_id));
                $link = $link.replace("replaceUrutan", 1);

                $.ajax({
                    url: $link,
                    type: 'GET',
                    success: function () {
                        var str = $('#hidden_url_gambar_var_blibli_' + data_barang_id).val();
                        var n = str.lastIndexOf('/');
                        var keyNameFile = str.substring(n + 1);

                        deleteObjectByFileName(keyNameFile);

                        $('#foto_produk_var_blibli_' + data_barang_id).val(null);
                        $('#box_upload_var_blibli_' + data_barang_id).css('background-image', '');
                        $('#box_upload_var_blibli_' + data_barang_id + ' span').show();
                        $('#btn_hapus_var_blibli_' + data_barang_id).hide();
                    },
                    error: function () {
                    }
                });

                return;
            });
        });

        $('.foto_produk_var_blibli').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            $('#foto_produk_var_blibli_' + data_barang_id).hide();
            $('#foto_produk_var_blibli_' + data_barang_id).off('change').on('change', function () {
                var file = this.files[0];
                var fileType = file["type"];
                if ($.inArray(fileType, validImageVar) < 0) {
                    alert('Hanya boleh file berformat .jpg!');
                    return;
                }
                var reader = new FileReader();
                reader.onloadend = function () {
                    $('#box_upload_var_blibli_' + data_barang_id).css('background-image', 'url("' + reader.result + '")')
                        .css('background-size', 'cover');
                    $('#box_upload_var_blibli_' + data_barang_id + ' span').hide();
                    $('#btn_hapus_var_blibli_' + data_barang_id).show();
                }
                if (file) {
                    reader.readAsDataURL(file);
                }
            });
        });

        $('.box_upload_var_blibli').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            $(item).off('click').on('click', function () {
                $('#foto_produk_var_blibli_' + data_barang_id).click();
            });
        });

        getFotoProdukBlibliVariant();
    });

    function getFotoProdukVariant() {
        $('.hidden_url_gambar_var').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");

            $('#foto_produk_var_' + data_barang_id).val(null);
            $('#box_upload_var_' + data_barang_id).css('background-image', '');
            $('#box_upload_var_' + data_barang_id + ' span').show();
            $('#btn_hapus_var_' + data_barang_id).hide();

            if ($(item).val() != "") {
                $('#box_upload_var_' + data_barang_id).css({
                    'background-image': 'url("' + $(item).val() + '")',
                    'background-size': 'cover'
                });
                $('#box_upload_var_' + data_barang_id + ' span').hide();
                $('#btn_hapus_var_' + data_barang_id).show();
            }

        });
    }

    function getFotoProdukBlibliVariant() {
        $('.hidden_url_gambar_var_blibli').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");

            $('#foto_produk_var_blibli_' + data_barang_id).val(null);
            $('#box_upload_var_blibli_' + data_barang_id).css('background-image', '');
            $('#box_upload_var_blibli_' + data_barang_id + ' span').show();
            $('#btn_hapus_var_blibli_' + data_barang_id).hide();

            if ($(item).val() != "") {
                $('#box_upload_var_blibli_' + data_barang_id).css({
                    'background-image': 'url("' + $(item).val() + '")',
                    'background-size': 'cover'
                });
                $('#box_upload_var_blibli_' + data_barang_id + ' span').hide();
                $('#btn_hapus_var_blibli_' + data_barang_id).show();
            }
        });
    }

    function UpdateGambarVariantBarangBlibli() {
        var listGambarVariant = new FormData();

        $('.foto_produk_var_blibli').each(function (i, item) {
            var data_barang_id = $(item).attr("data-barang-id");
            listGambarVariant.append(data_barang_id, $(item)[0].files[0]);
        });

        $.ajax({
            type: "POST",
            url: '@Url.Action("UpdateGambarVariantBlibli", "Manage")',
            data: listGambarVariant,
            dataType: 'json',
            processData: false,
            contentType: false,
            success: function (response) {
                UpdateHjualVariantBarang();
            },
            error: function (xhr) {
                console.log(xhr);
            }
        });
    }

    var validasi_simpanBarangVariant = true;
    function simpanBarangVariant() {
        if (confirm('Selesai setting gambar dan harga per variasi ?')) {
            validasi_simpanBarangVariant = true;
            message_validasi_simpanBarangVariant = "";

            if (validasi_simpanBarangVariant) {

                var listGambarVariant = new FormData();

                $('.foto_produk_var').each(function (i, item) {
                    var data_barang_id = $(item).attr("data-barang-id");
                    listGambarVariant.append(data_barang_id, $(item)[0].files[0]);
                });

                $.ajax({
                    type: "POST",
                    url: '@Url.Action("UpdateGambarVariantBarang", "Manage")',
                    data: listGambarVariant,
                    dataType: 'json',
                    processData: false,
                    contentType: false,
                    success: function (response) {

                        if ($('.foto_produk_var_blibli').length > 0) {
                            UpdateGambarVariantBarangBlibli();
                        }
                        else {
                            UpdateHjualVariantBarang();
                        }

                    },
                    error: function (xhr) {
                        console.log(xhr);
                    }
                });
            }
            else {
                if (message_validasi_autoloadStf02Variant != "") {
                    alert(message_validasi_autoloadStf02Variant);
                }
            }
        }
    }
    function UpdateHjualVariantBarang() {
        var newHjual = [];
        $('#variant-section input[data-jenis="hjual_var"]').each(function (i, item) {
            newHjual[i] = {
                recnum: $(item).attr("data-hjual-recnum"),
                hjual: convertToAngka($(item).val())
            };
        });

        var post_data = {
            brg: $('#Stf02_BRG').val(),
            newhjual: newHjual
        }

        $.ajax({
            type: "POST",
            url: '@Url.Action("UpdateHjualVariantBarang", "Manage")',
            data: post_data,
            beforeSend: function () {
                $('#loading_spinner').show();
            },
            success: function (response) {
                if (response.Errors == null) {
                    //remark by calvin 26 april 2019
                    //$('#table-barang-1-partial').html(response);
                    //Initialize();
                    //end remark by calvin 26 april 2019
                    $('#close-editor-1').click();
                    $("html, body").animate({ scrollTop: 0 }, "slow");
                    $('#loading_spinner').hide();
                    refreshTableBarang();
                } else {
                    if (response.errorHargaPerMP == null) {
                        //console.log(response.Errors);
                        alert(response.Errors[0]);
                    } else {
                        //response.Errors.forEach(setErrorfield);
                        alert(response.errorHargaPerMP);
                    }
                    //alert('Ada data yang tidak valid!');
                }
                $('#loading_spinner').hide();
            },
            error: function (xhr) {
                console.log(xhr);
            }
        });
    }

</script>
<div class="form-horizontal">
    <div id="variant-section">
        <table style="width:100%">
            <tr>
                <td style="width:100%">
                    <ul id="variant-tabs-2" class="nav nav-tabs">
                        <li><a data-toggle="tab" href="#masteronline_detail_tab_variant_2">Master Online</a></li>
                        @{
                            var listMarket = Model.ListMarket;
                            var adaElevenia_variant = 0;
                            var adaBlibli_variant = 0;
                            var adaBukalapak_variant = 0;
                            var adaLazada_variant = 0;
                            var adaShopee_variant = 0;
                            var adaTokped_variant = 0;
                            var adaJdid_variant = 0;
                        }
                        @for (var i = 0; i < listMarket.ToList().Count; i++)
                        {
                            var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                            if (idMarket == 9)
                            {
                                adaElevenia_variant = 1;
                            }
                            else if (idMarket == 16)
                            {
                                adaBlibli_variant = 1;
                            }
                            else if (idMarket == 8)
                            {
                                adaBukalapak_variant = 1;
                            }
                            else if (idMarket == 7)
                            {
                                adaLazada_variant = 1;
                            }
                            else if (idMarket == 17)
                            {
                                adaShopee_variant = 1;
                            }
                            else if (idMarket == 15)
                            {
                                adaTokped_variant = 1;
                            }
                            else if (idMarket == 19)
                            {
                                adaJdid_variant = 1;
                            }
                        }
                        @if (adaShopee_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#shopee_detail_tab_variant_2">Shopee</a></li>
                        }
                        @if (adaTokped_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#tokped_detail_tab_variant_2">Tokopedia</a></li>
                        }
                        @if (adaLazada_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#lazada_detail_tab_variant_2">Lazada</a></li>
                        }
                        @if (adaBlibli_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#blibli_detail_tab_variant_2">Blibli</a></li>
                        }
                        @if (adaElevenia_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#elevenia_detail_tab_variant_2">Elevenia</a></li>
                        }
                        @if (adaJdid_variant == 1)
                        {
                            <li><a data-toggle="tab" href="#jdid_detail_tab_variant_2">JD.ID</a></li>
                        }
                    </ul>
                </td>
            </tr>
        </table>
        <div class="tab-content">
            <div id="masteronline_detail_tab_variant_2" class="tab-pane fade in active">
                <div class="row" style="padding-top:10px">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <table id="datatable_detail_var_mo" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                            <thead>
                                <tr role="row">
                                    <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                    <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 30%;">Nama</th>
                                    <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Picture: activate to sort column descending" style="width: 50%;">Gambar</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var barang in Model.VariantMO)
                                {
                                    <tr>
                                        <td>@barang.BRG</td>
                                        <td>@barang.NAMA @barang.NAMA2</td>
                                        <td class="text-center">
                                            <div class="foto_produk_section">
                                                <div class="box_upload_var" data-barang-id="@barang.ID" id="box_upload_var_@barang.ID">
                                                    <span class="box_upload_placeholder">Tambah Gambar</span>
                                                    <input type='file' id='foto_produk_var_@barang.ID' data-barang-id="@barang.ID" class="foto_produk_var" accept=".jpg" />
                                                    <input type="hidden" id="hidden_url_gambar_var_@barang.ID" data-barang-id="@barang.ID" class="hidden_url_gambar_var" value="@(barang.LINK_GAMBAR_1)" />
                                                </div>
                                                <button type="button" class="btn btn-danger btn-small btn_hapus_foto_produk_var" style="margin:0px" data-barang-kode="@barang.BRG" data-barang-id="@barang.ID" id="btn_hapus_var_@barang.ID">Hapus</button>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="elevenia_detail_tab_variant_2" class="tab-pane fade in">
            </div>
            <div id="blibli_detail_tab_variant_2" class="tab-pane fade in">
                @for (var i = 0; i < listMarket.ToList().Count; i++)
                {
                    var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                    var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                    if (idMarket == 16)
                    {
                        <div>
                            <h2 style="font-size: 14px">
                                @($"Blibli ({listMarket[i].PERSO})")
                            </h2>
                        </div>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <label>Untuk harga normal per variasi blibli, akan menggunakan [Harga Jual *] yg ada di tab barang.</label>
                                <table id="datatable_detail_var_blibli" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 35%;">Nama</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Harga Promosi</th>
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Picture: activate to sort column descending" style="width: 15%;">Gambar</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Status Link Marketplace</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var barang in Model.VariantMO)
                                        {
                                            var VarStf02H = Model.VariantMO_H.Where(p => p.BRG.ToLower() == barang.BRG.ToLower() && p.IDMARKET == recnumArf01).FirstOrDefault();
                                            if (VarStf02H != null)
                                            {
                                                <tr>
                                                    <td>@barang.BRG</td>
                                                    <td>@barang.NAMA @barang.NAMA2</td>
                                                    <td style="text-align:right">
                                                        @Html.TextBox("txtHargaVariantMP_" + VarStf02H.RecNum, String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", VarStf02H.HJUAL), new { @class = "form-control", @style = "text-align:right", @onblur = "ConvertToAngkaRupiah(this);", required = "required", maxlength = "12", data_jenis = "hjual_var", data_hjual_recnum = VarStf02H.RecNum })
                                                    </td>
                                                    <td class="text-center">
                                                        <div class="foto_produk_section">
                                                            <div class="box_upload_var_blibli" data-barang-id="@VarStf02H.RecNum" id="box_upload_var_blibli_@VarStf02H.RecNum">
                                                                <span class="box_upload_placeholder">Tambah Gambar</span>
                                                                <input type='file' id='foto_produk_var_blibli_@VarStf02H.RecNum' data-barang-id="@VarStf02H.RecNum" class="foto_produk_var_blibli" accept=".jpg" />
                                                                <input type="hidden" id="hidden_url_gambar_var_blibli_@VarStf02H.RecNum" data-barang-id="@VarStf02H.RecNum" class="hidden_url_gambar_var_blibli" value="@(VarStf02H.AVALUE_50)" />
                                                            </div>
                                                            <button type="button" class="btn btn-danger btn-small btn_hapus_foto_produk_var_blibli" style="margin:0px" data-barang-kode="@barang.BRG" data-barang-id="@VarStf02H.RecNum" id="btn_hapus_var_blibli_@VarStf02H.RecNum">Hapus</button>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        @if (!string.IsNullOrWhiteSpace(VarStf02H.BRG_MP))
                                                        {
                                                            <label>Sukses</label>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                                @*}*@
                            </div>
                        </div>
                    }
                }
            </div>
            <div id="lazada_detail_tab_variant_2" class="tab-pane fade in">
                @for (var i = 0; i < listMarket.ToList().Count; i++)
                {
                    var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                    var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                    if (idMarket == 7)
                    {
                        <div>
                            <h2 style="font-size: 14px">
                                @($"Lazada ({listMarket[i].PERSO})")
                            </h2>
                        </div>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                @*@if (string.IsNullOrEmpty(listMarket[i].Sort1_Cust))
                                    {
                                        <label>Gagal Sync, Item tidak akan diupload ke akun ini.</label>
                                    }
                                    else
                                    {*@
                                <table id="datatable_detail_var_lazada" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 35%;">Nama</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 30%;">Harga</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Status Link Marketplace</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var barang in Model.VariantMO)
                                        {
                                            var VarStf02H = Model.VariantMO_H.Where(p => p.BRG.ToLower() == barang.BRG.ToLower() && p.IDMARKET == recnumArf01).FirstOrDefault();
                                            if (VarStf02H != null)
                                            {
                                                <tr>
                                                    <td>@barang.BRG</td>
                                                    <td>@barang.NAMA @barang.NAMA2</td>
                                                    <td style="text-align:right">
                                                        @Html.TextBox("txtHargaVariantMP_" + VarStf02H.RecNum, String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", VarStf02H.HJUAL), new { @class = "form-control", @style = "text-align:right", @onblur = "ConvertToAngkaRupiah(this);", required = "required", maxlength = "12", data_jenis = "hjual_var", data_hjual_recnum = VarStf02H.RecNum })
                                                    </td>
                                                    <td>
                                                        @if (!string.IsNullOrWhiteSpace(VarStf02H.BRG_MP))
                                                        {
                                                            <label>Sukses</label>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                                @*}*@
                            </div>
                        </div>
                    }
                }
            </div>
            <div id="shopee_detail_tab_variant_2" class="tab-pane fade in">
                @for (var i = 0; i < listMarket.ToList().Count; i++)
                {
                    var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                    var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                    if (idMarket == 17)
                    {
                        <div>
                            <h2 style="font-size: 14px">
                                @($"Shopee ({listMarket[i].PERSO})")
                            </h2>
                        </div>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                @*@if (string.IsNullOrEmpty(listMarket[i].Sort1_Cust))
                                    {
                                        <label>Gagal Sync, Item tidak akan diupload ke akun ini.</label>
                                    }
                                    else
                                    {*@
                                <table id="datatable_detail_var_shopee" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 35%;">Nama</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 30%;">Harga</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Status Link Marketplace</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var barang in Model.VariantMO)
                                        {
                                            var VarStf02H = Model.VariantMO_H.Where(p => p.BRG.ToLower() == barang.BRG.ToLower() && p.IDMARKET == recnumArf01).FirstOrDefault();
                                            if (VarStf02H != null)
                                            {
                                                <tr>
                                                    <td>@barang.BRG</td>
                                                    <td>@barang.NAMA @barang.NAMA2</td>
                                                    <td style="text-align:right">
                                                        @Html.TextBox("txtHargaVariantMP_" + VarStf02H.RecNum, String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", VarStf02H.HJUAL), new { @class = "form-control", @style = "text-align:right", @onblur = "ConvertToAngkaRupiah(this);", required = "required", maxlength = "12", data_jenis = "hjual_var", data_hjual_recnum = VarStf02H.RecNum })
                                                    </td>
                                                    <td>
                                                        @if (!string.IsNullOrWhiteSpace(VarStf02H.BRG_MP))
                                                        {
                                                            <label>Sukses</label>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                                @*}*@
                            </div>
                        </div>
                    }
                }
            </div>
            <div id="tokped_detail_tab_variant_2" class="tab-pane fade in">
                @for (var i = 0; i < listMarket.ToList().Count; i++)
                {
                    var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                    var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                    if (idMarket == 15)
                    {
                        <div>
                            <h2 style="font-size: 14px">
                                @($"Tokopedia ({listMarket[i].PERSO})")
                            </h2>
                        </div>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                @*@if (string.IsNullOrEmpty(listMarket[i].Sort1_Cust))
                                    {
                                        <label>Gagal Sync, Item tidak akan diupload ke akun ini.</label>
                                    }
                                    else
                                    {*@
                                <table id="datatable_detail_var_tokped" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 35%;">Nama</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 30%;">Harga</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Status Link Marketplace</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var barang in Model.VariantMO)
                                        {
                                            var VarStf02H = Model.VariantMO_H.Where(p => p.BRG.ToLower() == barang.BRG.ToLower() && p.IDMARKET == recnumArf01).FirstOrDefault();
                                            if (VarStf02H != null)
                                            {
                                                <tr>
                                                    <td>@barang.BRG</td>
                                                    <td>@barang.NAMA @barang.NAMA2</td>
                                                    <td style="text-align:right">
                                                        @Html.TextBox("txtHargaVariantMP_" + VarStf02H.RecNum, String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", VarStf02H.HJUAL), new { @class = "form-control", @style = "text-align:right", @onblur = "ConvertToAngkaRupiah(this);", required = "required", maxlength = "12", data_jenis = "hjual_var", data_hjual_recnum = VarStf02H.RecNum })
                                                    </td>
                                                    <td>
                                                        @if (!string.IsNullOrWhiteSpace(VarStf02H.BRG_MP))
                                                        {
                                                            <label>Sukses</label>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                                @*}*@
                            </div>
                        </div>
                    }
                }
            </div>
            <div id="jdid_detail_tab_variant_2" class="tab-pane fade in">
                @for (var i = 0; i < listMarket.ToList().Count; i++)
                {
                    var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                    var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                    if (idMarket == 19)
                    {
                        <div>
                            <h2 style="font-size: 14px">
                                @($"JD.ID ({listMarket[i].PERSO})")
                            </h2>
                        </div>
                        <div class="row" style="padding-top:10px">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                @*@if (string.IsNullOrEmpty(listMarket[i].Sort1_Cust))
                            {
                                <label>Gagal Sync, Item tidak akan diupload ke akun ini.</label>
                            }
                            else
                            {*@
                                <table id="datatable_detail_var_jdid" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
                                    <thead>
                                        <tr role="row">
                                            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 20%;">Kode</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 35%;">Nama</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 30%;">Harga</th>
                                            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 15%;">Status Link Marketplace</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var barang in Model.VariantMO)
                                        {
                                            var VarStf02H = Model.VariantMO_H.Where(p => p.BRG.ToLower() == barang.BRG.ToLower() && p.IDMARKET == recnumArf01).FirstOrDefault();
                                            if (VarStf02H != null)
                                            {
                                                <tr>
                                                    <td>@barang.BRG</td>
                                                    <td>@barang.NAMA @barang.NAMA2</td>
                                                    <td style="text-align:right">
                                                        @Html.TextBox("txtHargaVariantMP_" + VarStf02H.RecNum, String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", VarStf02H.HJUAL), new { @class = "form-control", @style = "text-align:right", @onblur = "ConvertToAngkaRupiah(this);", required = "required", maxlength = "12", data_jenis = "hjual_var", data_hjual_recnum = VarStf02H.RecNum })
                                                    </td>
                                                    <td>
                                                        @if (!string.IsNullOrWhiteSpace(VarStf02H.BRG_MP))
                                                        {
                                                            <label>Sukses</label>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                                @*}*@
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
</div>

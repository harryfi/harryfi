@using System.Globalization
@using PagedList.Mvc
@using MasterOnline.ViewModels
@model PagedList.IPagedList<PromptCustomerViewModel>
@{
    string currentFilter = ViewBag.CurrentFilter;
    string currentSort = ViewBag.CurrentSort;
}
@section styles
{
    <style>

        #loading_prompt {
            display: none;
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 100;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0,0,0,0);
        }

        #loading_prompt_image {
            width: 20px;
            height: 20px;
            margin-top: -90px;
            margin-left: -90px;
            position: absolute;
            top: 50%;
            left: 50%;
            border-width: 30px;
            border-radius: 50%;
        }
    </style>
}
<div id="loading_prompt">
    <div id="loading_prompt_image">
        <img src="~/Content/Images/spinner.gif" />
    </div>
</div>
<input id="txt_last_page" type="hidden" class="form-control" value="@ViewData["LastPage"]">
<div id="div_table_prompt" style="width:100%">
    <table id="datatable" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
        <thead>
            <tr role="row">
                <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 130px;">Nama Marketplace</th>
                <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 150px;">Nama Toko</th>
                <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 50px; max-width: 50px;">Pilih</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.MARKETPLACE</td>
                    <td>@item.NAMA</td>
                    <td class="edit-hapus-col">
                        <button class="btn btn-primary" onclick="pilihPrompt('@item.KODE', '@item.MARKETPLACE' + '(@item.NAMA)')">
                            <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
@if (Model.PageCount > 1)
{
    <div id="tabelpromptpartialpager" class="pager">
        @Html.PagedListPager(Model, page => Url.Action("RefreshPromptCustomer", new
   {
       page,
       search = ViewData["searchParam"]
   }),
             new PagedListRenderOptions
             {
                 LinkToFirstPageFormat = "<<",
            LinkToPreviousPageFormat = "prev",
            LinkToNextPageFormat = "next",
            LinkToLastPageFormat = ">>",
            DisplayEllipsesWhenNotShowingAllPageNumbers = false
        })
        Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount
    </div>
}
<script type="text/javascript">
    $(function () {
        $('#tabelpromptpartialpager').on('click', 'a', function () {
            if (this.href != "") {
                $.ajax({
                    url: this.href,
                    type: 'GET',
                    cache: false,
                    beforeSend: function () {
                        $('#div_table_prompt').hide();
                        $('#loading_prompt').show();
                    },
                    success: function (response) {
                        $('#divPartial').html(response);
                        $('#loading_prompt').hide();
                        $('#div_table_prompt').show();
                    }
                });
                return false;
            }
        });
    });
</script>
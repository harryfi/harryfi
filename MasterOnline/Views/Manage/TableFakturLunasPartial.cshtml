@using System.Globalization
@model MasterOnline.ViewModels.FakturViewModel
<table id="datatable" class="table table-striped table-bordered dataTable" role="grid" aria-describedby="datatable_info">
    <thead>
        <tr role="row">
            <th class="sorting_asc" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 90px;">No. Faktur</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 100px;">Tanggal Faktur</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 100px;">Tanggal Jatuh Tempo</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 90px;">Marketplace</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 90px;">Pembeli</th>
            <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 90px;">Total</th>
            @*<th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 60px;">Posting</th>
        <th class="sorting text-center" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 60px;">Edit / Lihat</th>
        <th class="sorting text-center" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Status: activate to sort column ascending" style="width: 50px; max-width: 50px;">Hapus</th>*@
        </tr>
    </thead>
    <tbody>
        @foreach (var faktur in Model.ListFaktur)
        {
            var buyer = Model.ListPembeli.FirstOrDefault(m => m.BUYER_CODE == faktur.PEMESAN);
            var pelanggan = Model.ListPelanggan.FirstOrDefault(m => m.CUST == faktur.CUST);
            var idMarket = 0;
            if (pelanggan != null)
            {
                idMarket = Convert.ToInt32(pelanggan.NAMA);
            }

            var market = Model.ListMarketplace.FirstOrDefault(m => m.IdMarket == idMarket);
            var NamaMarket = "";
            if (market != null)
            {
                NamaMarket = market.NamaMarket;
            }
            var nFaktur = Model.ListNFaktur.FirstOrDefault(n => n.NFAKTUR == faktur.NO_BUKTI);
            var pesananSesuaiFaktur = Model.ListPesanan.FirstOrDefault(p => p.NO_BUKTI == faktur.NO_SO);
            DateTime tglJtTempo = faktur.TGL_JT_TEMPO ?? DateTime.MinValue;
        <tr>
            <td>@faktur.NO_BUKTI</td>
            <td>@(faktur.TGL.ToString("dd/MM/yyyy"))</td>
            <td>@(tglJtTempo.ToString("dd/MM/yyyy"))</td>
            @*<td>@NamaMarket</td>*@
            <td>@(NamaMarket + " (" + buyer.PERSO + ")")</td>
            <td>
                @*@(buyer.NAMA + " (" + buyer.PERSO + ")")*@
                @*@buyer.NAMA*@
                @faktur.NAMAPEMESAN
            </td>
            <td style = "text-align:right">@String.Format(CultureInfo.CreateSpecificCulture("id-id"), "{0:N}", faktur.NETTO)</td>



        </tr>
        }
    </tbody>
</table>



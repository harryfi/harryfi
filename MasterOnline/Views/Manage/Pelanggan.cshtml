@using System.Globalization
@using MasterOnline.ViewModels
@model CustomerViewModel
@{
    ViewBag.Title = "Marketplace / Customer";
    Layout = "~/Views/Shared/_LayoutManage.cshtml";
    //var dataSession = Session["SessionInfo"] as AccountUserViewModel;

    long accId;
    var username = "";
    var context = new MoDbContext("");
    //if (dataSession?.User != null)
    //{
    //    accId = context.User.Single(u => u.Email == dataSession.User.Email).AccountId;
    //    username = context.Account.Single(a => a.AccountId == accId).Username;
    //    //context.Dispose(); 'remark by nurul 4/2/2019
    //}
    //else
    //{
    //    username = dataSession?.Account.Username;
    //    accId = (dataSession?.Account?.AccountId ?? 0);
    //}

    var sessionAccount = HttpContext.Current.Session["SessionAccount"];
    var sessionAccountUserID = HttpContext.Current.Session["SessionAccountUserID"];
    var sessionAccountUserName = HttpContext.Current.Session["SessionAccountUserName"];
    var sessionAccountEmail = HttpContext.Current.Session["SessionAccountEmail"];
    var sessionAccountTglSub = HttpContext.Current.Session["SessionAccountTglSub"];
    var sessionAccountKodeSub = HttpContext.Current.Session["SessionAccountKodeSub"];
    var sessionAccountDataSourcePathDebug = HttpContext.Current.Session["SessionAccountDataSourcePathDebug"];
    var sessionAccountDataSourcePath = HttpContext.Current.Session["SessionAccountDataSourcePath"];
    var sessionAccountDatabasePathErasoft = HttpContext.Current.Session["SessionAccountDatabasePathErasoft"];

    var sessionUser = System.Web.HttpContext.Current.Session["SessionUser"];
    var sessionUserUserID = System.Web.HttpContext.Current.Session["SessionUserUserID"];
    var sessionUserUsername = System.Web.HttpContext.Current.Session["SessionUserUsername"];
    var sessionUserEmail = System.Web.HttpContext.Current.Session["SessionUserEmail"];
    var sessionUserAccountID = System.Web.HttpContext.Current.Session["SessionUserAccountID"];

    if (sessionUser != null)
    {
        accId = context.User.Single(u => u.Email == sessionUserEmail.ToString()).AccountId;
        username = context.Account.SingleOrDefault(a => a.AccountId == accId)?.Username;
    }
    else
    {
        username = sessionAccountUserName.ToString();
        accId = (Convert.ToInt64(sessionAccount ?? 0));
    }

    if (username.Length > 20)
    {
        username = username.Substring(0, 17) + "...";
    }
}
@section styles
{
    <link href="~/Content/selectize.css" rel="stylesheet" />
    <link href="~/Content/build/css/selectivity-jquery.min.css" rel="stylesheet" />
    <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet" />
    <style>
        #customer-section > div {
            background-color: #fff;
            padding: 20px;
        }

        #Customers_AL {
            resize: vertical;
            height: 100px;
            max-height: 100px;
        }

        #hapus_label {
            color: orange;
            font-weight: bold;
        }
    </style>
    <style>
        #modal-pricing {
            margin: auto;
            width: 60em;
        }

            #modal-pricing .modal-content {
                -webkit-box-shadow: none;
                box-shadow: none;
                border: none;
                background-color: transparent;
            }

        /*.snip1404 {
            font-family: 'Source Sans Pro', Arial, sans-serif;
            color: #ffffff;
            text-align: left;
            font-size: 16px;
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            margin-top: 13%;
            display: table;
        }

            .snip1404 img {
                position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                z-index: -1;
            }

            .snip1404 .plan {
                margin: 0;
                width: 33.333333%;
                position: relative;
                float: left;
                overflow: hidden;
                border: 3px solid #442232;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
                background-color: #c13232;
            }

                .snip1404 .plan:hover i,
                .snip1404 .plan.hover i {
                    -webkit-transform: scale(1.2);
                    transform: scale(1.2);
                }

                .snip1404 .plan:first-of-type {
                    border-radius: 8px 0 0 8px;
                }

                .snip1404 .plan:last-of-type {
                    border-radius: 0 8px 8px 0;
                }

            .snip1404 * {
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                -webkit-transition: all 0.25s ease-out;
                transition: all 0.25s ease-out;
            }

            .snip1404 header {
                background-color: #c13232;
                color: #ffffff;
            }

            .snip1404 .plan-title {
                background-color: rgba(0, 0, 0, 0.5);
                position: relative;
                margin: 0;
                padding: 20px 20px 0;
                text-transform: uppercase;
                letter-spacing: 4px;
            }

                .snip1404 .plan-title:after {
                    position: absolute;
                    content: '';
                    top: 100%;
                    left: 0;
                    width: 0;
                    height: 0;
                    border-style: solid;
                    border-width: 40px 300px 0 0;
                    border-color: rgba(0, 0, 0, 0.5) transparent transparent;
                }

            .snip1404 .plan-cost {
                padding: 40px 20px 10px;
                text-align: right;
            }

            .snip1404 .plan-price {
                font-weight: 600;
                font-size: 1.5em;
            }

            .snip1404 .plan-type {
                opacity: 0.8;
                font-size: 0.7em;
                text-transform: uppercase;
            }

            .snip1404 .plan-features {
                padding: 0 0 20px;
                margin: 0;
                list-style: outside none none;
            }

                .snip1404 .plan-features li {
                    padding: 8px 5%;
                }

                .snip1404 .plan-features i {
                    margin-right: 8px;
                    color: rgba(0, 0, 0, 0.5);
                }

            .snip1404 .plan-select {
                border-top: 1px solid rgba(0, 0, 0, 0.2);
                padding: 20px;
                text-align: center;
            }

                .snip1404 .plan-select a {
                    background-color: #442232;
                    color: #ffffff;
                    text-decoration: none;
                    padding: 12px 20px;
                    font-size: 0.75em;
                    font-weight: 600;
                    border-radius: 20px;
                    text-transform: uppercase;
                    letter-spacing: 4px;
                    display: inline-block;
                }

                    .snip1404 .plan-select a:hover {
                        background-color: #552a3f;
                    }

            .snip1404 .featured {
                margin-top: -10px;
                border-color: #331926;
                box-shadow: 0 0 25px rgba(0, 0, 0, 0.4);
                z-index: 1;
                border-radius: 8px;
            }

                .snip1404 .featured .plan-select {
                    padding: 30px 20px;
                }

        @@media only screen and (max-width: 767px) {
            .snip1404 .plan {
                width: 50%;
            }

            .snip1404 .plan-title,
            .snip1404 .plan-select a {
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }

            .snip1404 .plan-select,
            .snip1404 .featured .plan-select {
                padding: 20px;
            }

            .snip1404 .featured {
                margin-top: 0;
            }
        }

        @@media only screen and (max-width: 440px) {
            .snip1404 .plan {
                width: 100%;
            }
        }

        body {
            background-color: #212121;
        }*/
        .snip1404 {
            font-family: 'Source Sans Pro', Arial, sans-serif;
            text-align: left;
            font-size: 16px;
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            display: table;
        }

            .snip1404 img {
                /*position: absolute;
                left: 0;
                top: 0;
                height: 100%;
                z-index: -1;*/
                width: 60%;
                margin-bottom: 20px;
                margin-top: 15px;
                z-index: 0;
            }

            .snip1404 .plan {
                margin: 0;
                width: 33.333333%;
                position: relative;
                float: left;
                overflow: hidden;
                border: 3px solid #442232;
                box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
                background-color: #c13232;
            }

                .snip1404 .plan:hover i,
                .snip1404 .plan.hover i {
                    -webkit-transform: scale(1.2);
                    transform: scale(1.2);
                }

                .snip1404 .plan:first-of-type {
                    border-radius: 8px 0 0 8px;
                }

                .snip1404 .plan:last-of-type {
                    border-radius: 0 8px 8px 0;
                }

            .snip1404 * {
                -webkit-box-sizing: border-box;
                box-sizing: border-box;
                -webkit-transition: all 0.25s ease-out;
                transition: all 0.25s ease-out;
            }

            .snip1404 header {
                background-color: #c13232;
                color: #ffffff;
            }

            .snip1404 .plan-title {
                background-color: rgba(0, 0, 0, 0.5);
                position: relative;
                margin: 0;
                padding: 20px 20px 0;
                text-transform: uppercase;
                letter-spacing: 4px;
            }

                .snip1404 .plan-title:after {
                    position: absolute;
                    content: '';
                    top: 100%;
                    left: 0;
                    width: 0;
                    height: 0;
                    border-style: solid;
                    border-width: 30px 250px 0 0;
                    border-color: rgba(0, 0, 0, 0.5) transparent transparent;
                }

            .snip1404 .plan-cost {
                padding: 20px 20px 10px;
                text-align: right;
            }

            .snip1404 .plan-price {
                font-weight: 600;
                font-size: 1.5em;
            }

            .snip1404 .plan-type {
                opacity: 0.8;
                font-size: 0.7em;
                text-transform: uppercase;
            }

            .snip1404 .plan-price-total {
                font-weight: 600;
                font-size: 1.1em;
                color: #fff;
            }

            .snip1404 .plan-month-total {
                font-weight: 600;
                font-size: 0.9em;
                color: #fff;
            }

            .snip1404 .plan-features {
                color: #fff;
                padding: 0 0 10px;
                margin: 0;
                list-style: outside none none;
            }

                .snip1404 .plan-features li {
                    padding: 0;
                    padding-left: 15px;
                }

                .snip1404 .plan-features i {
                    margin-right: 8px;
                    color: rgba(0, 0, 0, 0.5);
                }

            .snip1404 .plan-select {
                border-top: 1px solid rgba(0, 0, 0, 0.2);
                padding: 5px;
                text-align: center;
            }

                .snip1404 .plan-select a {
                    background-color: #442232;
                    color: #ffffff;
                    text-decoration: none;
                    padding: 12px 20px;
                    font-size: 0.75em;
                    font-weight: 600;
                    border-radius: 20px;
                    text-transform: uppercase;
                    letter-spacing: 4px;
                    display: inline-block;
                }

                    .snip1404 .plan-select a:hover {
                        background-color: #552a3f;
                    }

            .snip1404 .featured {
                margin-top: -10px;
                border-color: #331926;
                box-shadow: 0 0 25px rgba(0, 0, 0, 0.4);
                z-index: 1;
                border-radius: 8px;
            }

                .snip1404 .featured .plan-select {
                    padding: 15px 10px;
                }

        @@media only screen and (max-width: 767px) {
            .snip1404 .plan {
                width: 50%;
            }

            .snip1404 .plan-title,
            .snip1404 .plan-select a {
                -webkit-transform: translateY(0);
                transform: translateY(0);
            }

            .snip1404 .plan-select,
            .snip1404 .featured .plan-select {
                padding: 20px;
            }

            .snip1404 .featured {
                margin-top: 0;
            }
        }

        @@media only screen and (max-width: 440px) {
            .snip1404 .plan {
                width: 100%;
            }
        }

        body {
            background-color: #212121;
        }

        .btn-section > .row > button {
            padding: 5px;
            margin-bottom: 5px;
            background: #fb9595;
            border: 1px solid #9a2828;
            color: #000;
            width: 65%;
        }

            .btn-section > .row > button[disabled] {
                padding: 10px;
                margin-bottom: 15px;
                background: #9c9c9c;
                border: 1px solid #9a2828;
                color: #000;
            }

            .btn-section > .row > button:hover {
                padding: 5px;
                margin-bottom: 5px;
                background: #fd4646;
                border: 1px solid #9a2828;
                color: #000;
            }

        .subs_active {
            background: #fd4646 !important;
        }

        .btn-pindah-paket:hover {
            cursor: pointer;
        }
    </style>
    <style type="text/css">

        .bar {
            font-size: 30px;
            color: #ed1338;
        }

        .nav-row {
            padding: 30px;
        }

            .nav-row > div > a {
                padding: 7px;
            }

        #loading_spinner {
            display: none;
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 100;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background-color: rgba(0,0,0,.5);
        }

        #loading_spinner_image {
            width: 20px;
            height: 20px;
            margin-top: -90px;
            margin-left: -90px;
            position: absolute;
            top: 50%;
            left: 50%;
            border-width: 30px;
            border-radius: 50%;
        }

        #loading_spinner_btn {
            display: none;
            width: 100%;
            height: 100%;
            z-index: 100;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
        }

        #loading_spinner_image_btn {
            width: 20px;
            height: 40px;
            border-width: 30px;
            border-radius: 50%;
        }

        #soc-med-btn-nav {
            float: right;
            margin-right: 80px;
            margin-bottom: 15px;
        }


        .subs_body {
            background: white;
            letter-spacing: 0.4px;
            font-family: 'RoundedElegance';
            color: black;
        }

        @@font-face {
            font-family: 'RoundedElegance'; /*src: url("~/fonts/rounded_elegance.svg");
                src: url("~/fonts/rounded_elegance.ttf") format('truetype');*/
            src: url("../../fonts/rounded_elegance.svg");
            src: url("../../fonts/rounded_elegance.ttf") format('truetype');
            font-weight: bold;
        }

        /*.modal-content {
            margin-top: 225px !important;
        }*/

        .modal-dialog {
            height: auto !important;
        }

        .title-features-mobile {
            font-size: 10px !important;
        }

        .sub-title-features-mobile {
            font-size: 9px !important;
        }

        .feature-mobile-row {
            margin-bottom: 25px !important;
        }


        h2.mobile-title {
            font-size: 16px !important;
        }

        #cover p {
            font-size: 14px !important;
        }

        #mobile-app-section {
            margin-top: 25px !important;
        }


        body {
            overflow-x: hidden;
        }

        .row {
            margin-right: 0;
            margin-left: 0;
        }

        html {
            /*-webkit-text-stroke-width: 0.5pt;*/
            text-rendering: optimizeLegibility !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }

        #cover {
            margin-top: 175px;
            margin-bottom: 18px;
            background-size: cover;
            min-height: 350px;
        }

        h2.pc-title {
            color: #891539;
            font-size: 45px;
            line-height: 60px;
            letter-spacing: 3px;
            font-weight: 700;
        }

        h2.mobile-title {
            color: #891539;
            font-size: 30px;
            line-height: 58px;
            letter-spacing: 3px;
            font-weight: 700;
        }

        #cover h3 {
            font-size: 58px;
            font-weight: 700;
            text-transform: uppercase;
            font-family: 'RoundedElegance';
        }

            #cover h3 span {
                color: #ed5565;
            }

        #cover span {
            font-size: 53px;
        }

        #cover p {
            font-size: 18px;
            letter-spacing: .5px;
        }

        #cover .btn {
            background-color: #891539;
            color: #fff;
        }

            #cover .btn:hover {
                background-color: #f37100 !important;
            }

        .focus-text {
            text-transform: uppercase;
            color: #f37100;
        }

        #btn-daftar-pc {
            width: 50%;
            float: right;
            margin: 0 auto;
            border-radius: 10px !important;
            margin-top: 40px;
            box-shadow: 0px 7px 5px rgb(136, 136, 136);
        }

        #mobile-app-section {
            margin-top: 60px;
        }

        #btn-daftar-mobile {
            border-radius: 10px !important;
            width: 100%;
            margin-top: 25px;
            box-shadow: 0px 7px 5px rgb(136, 136, 136);
        }

        #btn-video-pc {
            width: 50%;
            float: left;
            background-color: #5db836 !important;
            margin: 0 auto;
            border-radius: 10px !important;
            margin-top: 40px;
            box-shadow: 0px 7px 5px rgb(136, 136, 136);
        }

        #btn-video-mobile {
            background-color: #5db836 !important;
            border-radius: 10px !important;
            width: 100%;
            margin-top: 25px;
            box-shadow: 0px 7px 5px rgb(136, 136, 136);
        }

        #gradient-mo {
            background: rgba(255,23,23,1);
            background: -moz-linear-gradient(left, rgba(255,23,23,1) 0%, rgba(137,21,57,1) 50%, rgba(137,21,57,1) 100%);
            background: -webkit-gradient(left top, right top, color-stop(0%, rgba(255,23,23,1)), color-stop(50%, rgba(137,21,57,1)), color-stop(100%, rgba(137,21,57,1)));
            background: -webkit-linear-gradient(left, rgba(255,23,23,1) 0%, rgba(137,21,57,1) 50%, rgba(137,21,57,1) 100%);
            background: -o-linear-gradient(left, rgba(255,23,23,1) 0%, rgba(137,21,57,1) 50%, rgba(137,21,57,1) 100%);
            background: -ms-linear-gradient(left, rgba(255,23,23,1) 0%, rgba(137,21,57,1) 50%, rgba(137,21,57,1) 100%);
            background: linear-gradient(to right, rgba(255,23,23,1) 0%, rgba(137,21,57,1) 50%, rgba(137,21,57,1) 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ff1717', endColorstr='#891539', GradientType=1 );
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
        }

        .videoWrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            padding-top: 25px;
            height: 0;
        }

            .videoWrapper iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }

        .modal-dialog {
            width: 75%;
            height: 75%;
            margin: 0 auto;
            padding: 0;
        }

        .modal-content {
            margin-top: 35px;
            height: auto;
            min-height: 100%;
            border-radius: 0;
        }

        .videoBox {
            position: relative;
            padding-bottom: 30.25%; /* 16:9 */
            height: 0;
        }

            .videoBox iframe {
                position: absolute;
                top: 0;
                left: 25%;
                width: 50%;
                height: 100%;
            }

        #marketplace .logo-container {
            padding: 40px 0;
        }

        .grayish-white {
            background-color: #F5F5F5;
        }

        .grayish-white-f6 {
            background-color: #f6f6f6;
        }

        #marketplace .title-box-red,
        .carakerja .title-box-red {
            padding: 10px 7px;
        }

            #marketplace .title-box-red h3,
            .carakerja .title-box-red h3 {
                font-size: 20px;
                color: #fff;
                font-weight: 400;
                margin: 0px;
                text-align: left !important;
            }

        #marketplace .mp-logo:first-child {
            margin-left: 60px;
        }

        #marketplace .mp-logo {
            margin-right: 15px;
        }

        .titleSection {
            color: #ed5565;
            font-size: 35px;
            text-align: center;
            font-weight: 500;
        }

        .carakerja {
            padding: 0 0 40px 0;
            background-color: #fff;
        }

            .carakerja h3, .carakerja p {
                font-weight: 300;
                text-align: center;
            }

            .carakerja h3 {
                font-size: 22px;
            }

            .carakerja p {
                font-size: 17px;
                line-height: 24px;
                color: #777;
            }

            .carakerja strong {
                font-size: 20px;
                font-weight: 500;
                text-align: center;
                display: block;
            }

            .carakerja img {
                margin-top: 25px;
            }

        #banner {
            background: url(../../Content/Images/shattered.png) 0 50%;
            min-height: 200px;
            padding: 20px 0;
            text-align: center;
        }

            #banner h2 {
                color: #999;
                font-size: 25px;
                font-weight: 400;
                margin: 30px 0 28px 0;
            }

        /*footer {
            background: #891539;
            padding: 30px 0;
        }

        .footerMenuCol {
            margin-bottom: 20px;
        }

        footer h3 {
            color: #fff;
            font-size: 15px;
            font-weight: 400;
            text-transform: uppercase;
            margin-top: 0;
        }

        footer ul, footer ul li {
            list-style: none;
        }

            footer ul li {
                margin-left: -40px !important;
                padding: 7px 0 7px 10px;
                border-bottom: 1px solid #f9f9f9;
            }

                footer ul li a {
                    color: #f7f7f7;
                    font-size: 12px;
                    font-weight: 300;
                    text-decoration: none;
                }*/

        .title-box-red {
            background: rgba(137,21,57,1);
            background: -moz-linear-gradient(left, rgba(137,21,57,1) 0%, rgba(137,21,57,1) 70%, rgba(255,23,23,1) 100%);
            background: -webkit-gradient(left top, right top, color-stop(0%, rgba(137,21,57,1)), color-stop(70%, rgba(137,21,57,1)), color-stop(100%, rgba(255,23,23,1)));
            background: -webkit-linear-gradient(left, rgba(137,21,57,1) 0%, rgba(137,21,57,1) 70%, rgba(255,23,23,1) 100%);
            background: -o-linear-gradient(left, rgba(137,21,57,1) 0%, rgba(137,21,57,1) 70%, rgba(255,23,23,1) 100%);
            background: -ms-linear-gradient(left, rgba(137,21,57,1) 0%, rgba(137,21,57,1) 70%, rgba(255,23,23,1) 100%);
            background: linear-gradient(to right, rgba(137,21,57,1) 0%, rgba(137,21,57,1) 70%, rgba(255,23,23,1) 100%);
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#891539', endColorstr='#ff1717', GradientType=1 );
        }

        .carakerja .content-feature {
            background-color: #f6f6f6;
            padding-bottom: 10px;
        }

        #promo_pulsa {
            display: none; /* Sementara */
            position: absolute;
            width: 20%;
            right: 15px;
            top: 175px;
            z-index: 100;
        }

        .no-padding {
            padding: 0 !important;
        }

        .title-features {
            font-size: 15px;
            font-weight: bold;
            position: absolute;
            top: 0;
            left: 0;
        }

        .sub-title-features {
            font-size: 14px;
            position: absolute;
            top: 30px;
            left: 0;
        }

        .title-features-mobile {
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: 0;
            left: 0;
        }

        .sub-title-features-mobile {
            font-size: 11px;
            position: absolute;
            top: 25px;
            left: 0;
        }

        .feature-mobile-row {
            margin-bottom: 30px;
        }

        .btn-basicfree:hover {
            color: #F5F5F5;
            background-color: #891539;
        }

        .btn-basicfree {
            color: #891539;
            background-color: white;
            text-align: center;
            border-radius: 10 1 1 1;
            border: 1px solid #891539;
        }

        .btn-silver:hover {
            color: #F5F5F5;
            background-color: #891539;
        }

        .btn-silver {
            color: #891539;
            background-color: white;
            text-align: center;
            border-radius: 10 1 1 1;
            border: 1px solid #891539;
        }


        .panel-default-noborder {
            border: 1px;
        }

        hr {
            border: 1px solid #891539;
        }

        .table thead > tr > th,
        .table tbody > tr > th,
        .table tfoot > tr > th,
        .table thead > tr > td,
        .table tbody > tr > td,
        .table tfoot > tr > td {
            padding: 8px;
            line-height: 1.428571429;
            vertical-align: top;
            border-top: 0px;
        }

        .table_subs thead > tr > th {
            padding: 8px;
            line-height: 1.428571429;
            vertical-align: top;
            border-top: 0px solid #dddddd;
            border-bottom: 2px solid #891539;
        }



        .glyphicon-ok {
            color: #21b716;
        }

        /*.glyphicon-remove {
            color: #891539;
        }*/


        .enterpriseColumn {
            padding: 8px;
            line-height: 1.428571429;
            vertical-align: middle;
            border: 2px solid #891539 !important;
            color: #891539;
        }
    </style>
}
<div class="row" id="customer-section">
    <div class="col-lg-12 col-md-12">
        <div class="row customer_table_section">
            <div class="col-lg-4 col-sm-6">
                <div class="input-group">
                    <input id="search_customer" type="text" class="form-control" placeholder="Pencarian">
                    <span class="input-group-btn">
                        <button type="button" id="search_customer_click" class="btn btn-primary">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </div>
            <div class="col-lg-8 col-sm-6">
                <div class="pull-right" id="tambah_baru_tombol_section">
                    @*<button type="button" class=" btn btn-default" data-style="expand-right">
                            <span>Refresh</span>
                        </button>*@
                </div>
            </div>
        </div>
        <div class="row customer_table_section">
            <div class="col-sm-12" id="table-customer-partial">
                @*@Html.Partial("TableCustomerPartial")*@
            </div>
        </div>
        <div class="row customer_editor_section" style="display: none;">
            <div class="col-lg-12">
                <div class="page-editor">
                    <h2 class="editor-title">Marketplace / Customer</h2>
                    <span class="title-accent"></span>
                    <button id="close-editor" type="button" class="pull-right page-close">
                        <span class="close-btn thick"></span>
                    </button>
                    <div class="form-horizontal" id="form_input">
                        <div id="somediv" role="dialog"></div>
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12">
                                <div class="x_panel">
                                    <div class="x_title">
                                        <h2 style="font-size: 16px">Detail Marketplace / Customer</h2>
                                        <ul class="nav navbar-right panel_toolbox">
                                            <li>
                                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                            </li>
                                        </ul>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        @if (ViewData.ModelState.Any(x => x.Value.Errors.Any()))
                                        {
                                            foreach (var modelError in ViewData.ModelState.SelectMany(x => x.Value.Errors))
                                            {
                                                <div class="alert alert-danger">
                                                    <span class="message-error">@modelError.ErrorMessage</span>
                                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                            }
                                        }
                                        <br>
                                        @using (Html.BeginForm("SaveCustomer", "Manage", FormMethod.Post, new { @autocomplete = "off", enctype = "multipart/form-data", id = "form-customer" }))
                                        {
                                            @Html.HiddenFor(m => m.Customers.USERNAME, new { Value = username })
                                            @Html.HiddenFor(m => m.Customers.KLINK, new { Value = "1" })
                                            @Html.HiddenFor(m => m.Customers.TGL_INPUT, new { Value = DateTime.Now.ToString("dd/MM/yyyy") })
                                            @Html.HiddenFor(m => m.Customers.RecNum)
                                            @Html.HiddenFor(m => m.Customers.AL, new { Value = "." })
                                            @Html.HiddenFor(m => m.Customers.TLP, new { Value = "." })
                                            @Html.HiddenFor(m => m.Customers.KODEKABKOT, new { Value = "3174" })
                                            @Html.HiddenFor(m => m.Customers.KODEPOS, new { Value = "." })
                                            @Html.HiddenFor(m => m.Customers.KODEPROV, new { Value = "31" })
                                            @Html.HiddenFor(m => m.Customers.TOP, new { Value = "1" })

                                            <div class="form-group">
                                                @Html.LabelFor(m => m.Customers.CUST, "Kode", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.HiddenFor(m => m.Customers.CUST)
                                                    @if (Model.Customers != null)
                                                    {
                                                        <input type="text" value="@Model.Customers.CUST" disabled class="form-control" />
                                                    }
                                                    else
                                                    {
                                                        <input id="CUSTNUMBER" type="text" value="[AUTO]" disabled class="form-control" />
                                                    }
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @Html.LabelFor(m => m.Customers.NAMA, "Nama Marketplace *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.HiddenFor(m => m.Customers.NAMA)
                                                    <select id="MARKET" placeholder="Harap pilih" required="required" ></select>
                                                </div>
                                            </div>
                                            //add by nurul 15/7/2020
                                            <div class="form-group" id="versi-blibli" hidden="hidden">
                                                @Html.LabelFor(m => m.Customers.KD_ANALISA, "Versi *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.HiddenFor(m => m.Customers.KD_ANALISA)
                                                    <select style="display:none" single class="selectize-dropdown single" id="Customers_KD_ANALISA" placeholder="Harap pilih" ></select>
                                                </div>
                                            </div>
                                            //add by nurul 15/7/2020
                                            <div class="form-group">
                                                @Html.LabelFor(m => m.Customers.PERSO, "Nama Akun *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12", id = "id-nama-akun" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.TextBoxFor(m => m.Customers.PERSO, new { @class = "form-control", required = "required", id = "txt-nama-akun" })
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                @Html.LabelFor(m => m.Customers.EMAIL, "Email Akun *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.TextBoxFor(m => m.Customers.EMAIL, new { @class = "form-control", @autocomplete = "off", type = "email", required = "required" })
                                                </div>
                                            </div>
                                            <div id="BlibliSellerID" class="form-group"></div>
                                            <div class="form-group" id="password-akun">
                                                @Html.LabelFor(m => m.Customers.PASSWORD, "Password Akun *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.TextBoxFor(m => m.Customers.PASSWORD, new { @class = "form-control", @autocomplete = "off", type = "password", required = "required" })
                                                </div>
                                            </div>
                                            //add by nurul 16/7/2020
                                            <div id="blibliAPIKey" class="form-group">
                                            </div>
                                            //end add by nurul 16/7/2020
                                            // add by fauzi, add selection untuk setting status sync pesanan stok marketplace 25 November 2019
                                            <div class="form-group" id="status-sync">
                                                @Html.LabelFor(m => m.Customers.TIDAK_HIT_UANG_R, "Status Sync Pesanan & Stok", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                <div class="col-md-6 col-sm-6 col-xs-12">
                                                    @Html.HiddenFor(m => m.Customers.TIDAK_HIT_UANG_R)
                                                    <select style="display:none" single class="selectize-dropdown single" id="Customers_TIDAK_HIT_UANG_R" placeholder="Harap pilih" required="disabled"></select>
                                                </div>
                                            </div>
                                            // end add by fauzi, add selection untuk setting status sync pesanan stok marketplace 25 November 2019

                                            @*<div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.AL, "Alamat *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        @Html.TextAreaFor(m => m.Customers.AL, new { @class = "form-control", maxlength = 200, required = "required" })
                                                    </div>
                                                </div>*@
                                            @*<div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.TOP, "Term Of Payment (TOP) *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        @Html.TextBoxFor(m => m.Customers.TOP, new { @class = "form-control limited_number_textbox num-only", required = "required", maxlength = 3, min = 0, max = 999 })
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 col-xs-6">
                                                        <h5>Hari</h5>
                                                    </div>
                                                </div>*@
                                            @*<div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.KODEPROV, "Provinsi *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        @Html.HiddenFor(m => m.Customers.KODEPROV)
                                                        <div id="KODEPROV" class="selectivity-input" tabindex="0"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.KODEKABKOT, "Kota *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        @Html.HiddenFor(m => m.Customers.KODEKABKOT)
                                                        <div id="KODEKABKOT" class="selectivity-input" tabindex="0"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.KODEPOS, "Kode Pos *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        @Html.TextBoxFor(m => m.Customers.KODEPOS, new { @class = "form-control", required = "required", type = "number" })
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.TLP, "Telepon *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12" })
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        @Html.TextBoxFor(m => m.Customers.TLP, new { @class = "form-control", required = "required", type = "number" })
                                                    </div>
                                                </div>*@
                                            @*<div class="form-group">
                                                    @Html.LabelFor(m => m.Customers.API_KEY, "API Key *", new { @class = "control-label col-md-3 col-sm-3 col-xs-12", @id = "lbl_Customers_API_KEY" })
                                                    <div class="col-md-6 col-sm-6 col-xs-6">
                                                        @Html.TextBoxFor(m => m.Customers.API_KEY, new { @class = "form-control" })
                                                    </div>
                                                    <div class="col-md-2 col-sm-2 col-xs-6" id="buttonGen"></div>
                                                </div>*@
                                            <div class="form-group">
                                                <div id="divAPIKey"></div>
                                                <div class="col-md-2 col-sm-2 col-xs-6" id="buttonGen"></div>
                                            </div>
                                            <div id="descAPIKey" class="form-group">
                                                <div id="emptyDiv" class=" col-md-3 col-sm-3 col-xs-1"></div>
                                                @*<label id="lblDesc" style="visibility:hidden">API key harus terisi untuk dapat terintegrasi dengan marketplace.</label>*@
                                                <label id="lblDesc" style="visibility:hidden">API key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.</label>
                                                <br />
                                                @*<label id="lblDesc2" style="visibility:hidden">API key harus terisi untuk dapat terintegrasi dengan marketplace.</label>*@
                                                <label id="lblDesc2" style="visibility:hidden">API key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.</label>
                                                <label id="lblPopUp" style="visibility:hidden;color:blue" onclick="openModalDesc(MARKET.value)"><u>Di Sini</u></label>
                                                <div id="emptyDiv2" class=" col-md-3 col-sm-3 col-xs-1"></div>
                                            </div>
                                            <div id="BlibliMerchantID" class="form-group">
                                            </div>
                                            <div id="BlibliClient" class="form-group">
                                            </div>
                                            <div id="BlibliClientPass" class="form-group">
                                            </div>
                                            @*add by Tri 10/04/2019*@
                                            <div id="JDAppSecret" class="form-group">
                                            </div>
                                            <div id="JDAccessToken" class="form-group">
                                            </div>
                                            @*end add by Tri 10/04/2019*@
                                            @*add by nurul 24/10/2018*@
                                            <div id="descAPIKey2" class="form-group">
                                                <div id="emptyDiv3" class="col-md-3 col-sm-3 col-xs-1"></div>
                                                <label id="lblDesc3" style="visibility:hidden">1. Untuk dapat tersambung secara otomatis ke Tokopedia, Anda harus terdaftar sebagai official store (pemegang merk). Apabila Anda sudah terdaftar sebagai official store di Tokopedia, silahkan hubungi customer service kami.</label>
                                                <br />
                                                <label id="lblDesc4" style="visibility:hidden"></label>
                                                <div id="emptyDiv4" class="col-md-3 col-sm-3 col-xs-1"></div>
                                            </div>
                                            @*end add by nurul 24/10/2018*@
                                            @*add by nurul 25/03/2019*@
                                            <div id="TokpedShopID" class="form-group">
                                            </div>
                                            <div id="LabelTokped1" class="form-group">
                                            </div>
                                            <div id="LabelTokped2" class="form-group">
                                            </div>
                                            @*end add by nurul 25/03/2019*@
                                            <input type="button" class="btn btn-primary pull-right" value="Simpan" id="simpan_btn" onclick="simpanCustomer(this)" />
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-horizontal" id="form_subs">
                        @Html.Partial("PricingNewPartialView", Model?.ListSubs)
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal Hapus customer -->
<div class="modal fade" id="konfHapuscustomer" tabindex="-1" role="dialog" aria-labelledby="konfirmasiHapusLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="konfirmasiHapusLabel">Konfirmasi</h4>
            </div>
            <div class="modal-body">
                <div class="row text-center">
                    <h4>Apakah Anda yakin ingin menghapus akun penghubung marketplace <span id="hapus_label"></span>?</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Tidak</button>
                <button type="button" class="btn btn-success" onclick="deletecustomer()">Ya</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalPricing" tabindex="-1" role="dialog" aria-labelledby="pricingLabel">
    <div class="modal-dialog" id="modal-pricing" role="document">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-content">
            @*@Html.Partial("PricingPartialView", Model?.ListSubs)*@
            @Html.Partial("PricingNewPartialView", Model?.ListSubs)
        </div>
    </div>
</div>
<div class="modal fade" id="modalLazadaAPIKey" tabindex="-1" role="dialog" aria-labelledby="lazadaDescLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Lazada API Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>1. Kolom API Key dikosongkan saja, silahkan anda save & lengkapi langkah selanjutnya.</h4>
                    <h4>2. Pilih negara, dan Isi data email dan password akun Lazada anda.</h4>
                    <h4>3. Jika Sukses API key akan tersimpan secara otomatis.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalConfirmLazadaAPIKey" tabindex="-1" role="dialog" aria-labelledby="lazadaConfirmLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Lazada API Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>Lanjutkan untuk mendapatkan Lazada API Key.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="GenerateLazadaCode(custCode); return false;">Get API Key</button>
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalEleveniaAPIKey" tabindex="-1" role="dialog" aria-labelledby="eleveniaDescLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Elevenia API Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>1. Login akun elevenia anda sebagai seller di web : http://soffice.elevenia.co.id/login.do </h4>
                    <h4>2. Masuk ke menu Akun Saya, lalu API penjual.</h4>
                    <h4>3. Klik button Ajukan OPEN API, kemudian isi data anda di Form yang muncul  dan klik Ajukan</h4>
                    <h4>4. Jika sudah diverifikasi oleh Elevenia, maka akan muncul API key pada halaman tsb.</h4>
                    <h4>5. Copy API key pada halaman itu ke Master Online.</h4>
                    <h4>6. Simpan, jika semua data sudah terisi.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalBlibliAPIKey" tabindex="-1" role="dialog" aria-labelledby="blibliDescLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Blibli API Secret Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>1. Login akun Blibli anda sebagai seller di web : https://merchant.blibli.com/MTA/login </h4>
                    <h4>2. Klik Email anda di kanan atas, kemudian pilih menu Dokumentasi API.</h4>
                    <h4>3. Klik API Client Manager pada menu di sebelah kiri.</h4>
                    <h4>4. Isi API client username dan password, kemudian klik Generate.</h4>
                    <h4>5. Isi API secret key, kemudian klik Register API secret key.</h4>
                    <h4>6. Setelah sukses, copy data-data tadi ke Master Online(API secret key, API client username, API client password).</h4>
                    <h4>7. Untuk mendapatkan Merchant ID, buka halaman Info Toko anda (pojok kanan atas halaman MTA Blibli).</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalJDAPIKey" tabindex="-1" role="dialog" aria-labelledby="jdDescLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">JD ID API Key</h4>
            </div>
            <div class="modal-body">
                @*<div class="row text-left">
                    <h4>1. Login akun JD.ID anda di web : http://api.jd.id/ctrlCenter/appList </h4>
                    <h4>2. Klik +New App.</h4>
                    <h4>3. Isi Nama aplikasi : Master Online, dan isi email anda. Kemudian Save</h4>
                    <h4>4. Aplikasi yang anda buat akan muncul pada list, Klik Manage.</h4>
                    <h4>5. Pilih Category : Seller to JD, pastikan di bagian Waiting to auth semua sudah tercentang. Kemudian Save.</h4>
                    <h4>6. Setelah kembali ke list App, klik view dibagian Key dan Token.</h4>
                    <h4>7. Isi field di Master Online sesuai data yang tampil.</h4>
                </div>*@
                <div class="row text-left">
                    <h4>1. Login akun JD.ID anda di web : http://api.jd.id/ctrlCenter/appList.</h4>
                    <h4>2. Klik +New App.</h4>
                    <h4>3. Isi Nama Aplikasi : MasterOnline, dan isi email anda. Kemudian Save.</h4>
                    <h4>4. Aplikasi Master Online yang anda buat akan muncul pada App List, Klik Manage.</h4>
                    <h4>5. Pilih Category: Seller to JD, pada kolom Not Apply silahkan centang All untuk menghubungkan all API JD.ID dengan Master Online. Kemudian Save.</h4>
                    <h4>6. Setelah kembali ke App List, klik view dibagian Key&Token.</h4>
                    <h4>7. Isi data di Master Online sesuai dengan data yang tampil.</h4>
                    <h4>8. Integrasi JD.ID dan Master Online sudah aktif saat kolom Already own pada halaman JD.ID Open Platform anda sudah terisi.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modalShopifyAPIKey" tabindex="-1" role="dialog" aria-labelledby="jdDescLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Shopify API Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>1. Login akun Shopify Anda sebagai store di web : https://accounts.shopify.com/store-login </h4>
                    <h4>2. Klik Menu Apps di samping kiri Anda, kemudian klik Manage private apps pada bagian bawah halaman.</h4>
                    <h4>3. Jika sudah lakukan Create New Private App, Klik nama Private App dan akan terlihat API Key dan Password.</h4>
                    <h4>4. Jika Anda belum memiliki Private App, silahkan klik tombol Create New Private App di pojok kanan atas.</h4>
                    <h4>5. Isi Private App Name, Emergency Developer Email.</h4>
                    <h4>6. Ubah hak akses sesuai yang Anda perlukan seperti (Product, Variants dan koleksinya).</h4>
                    <h4>7. Centang untuk memberikan akses data StoreFront API.</h4>
                    <h4>8. Klik Save.</h4>
                    <h4>9. Setelah sukses, copy data tadi ke Master Online (API key dan Password API Key).</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@*//add by nurul 16/7/2020*@
<div class="modal fade" id="modalBlibliAPIKeyNonToken" tabindex="-1" role="dialog" aria-labelledby="blibliDescNonTokenLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Blibli API Secret Key</h4>
            </div>
            <div class="modal-body">
                <div class="row text-left">
                    <h4>1. Login akun Blibli anda sebagai seller di web : https://merchant.blibli.com/MTA/login </h4>
                    <h4>2. Klik email anda di kanan atas, kemudian pilih menu Pengaturan seller API.</h4>
                    <h4>3. Klik buat di Kata Sandi API pada menu Atur Kata Sandi API.</h4>
                    <h4>4. Dapatkan ID API Klien melalui CS MasterOnline, masukkan dan klik hubungkan di ID API Klien pada menu Hubungkan API klien di Blibli.</h4>
                    <h4>5. Setelah sukses, copy data Kata Sandi API ke Master Online.</h4>
                    <h4>6. Untuk mendapatkan ID Seller, buka halaman Info Toko anda.</h4>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
@*//end add by nurul 16/7/2020*@
@section scripts
{
    <script src="~/Content/selectize.js" type="text/javascript"></script>
    <script src="~/Content/build/js/selectivity-jquery.min.js" type="text/javascript"></script>
    @*add by Tri snap js*@
    @*<script type="text/javascript" src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="SB-Mid-client-AyzcvZKcwAlD_0QY"></script>*@
    <script type="text/javascript" src="https://app.midtrans.com/snap/snap.js" data-client-key="Mid-client-sMzViq24qWRlPdPu"></script>
    @*SB-Mid-client-AyzcvZKcwAlD_0QY__Mid-client-sMzViq24qWRlPdPu*@
<script type="text/javascript">
        var $Sort1_Cust = "";
        var $API_CLIENT_U = "";
        var $API_CLIENT_P = "";
        var $customerId = "";
        var $jumlahMarketplace = 0;
        var $jumlahMarketplaceMax = 0;
        var $listNamaMarketTerpakai = [];
        var namaMarket = null;
        function showSubsMenu(type){
            $('#divSubs').hide();
            if (type == 1) {
                $('#divSubsExpand').show();
                $('#divSubExpired').hide();
            }
            else if (type == 2) {
                $('#divSubsExpand').hide();
                $('#divSubExpired').show();
            }

        }
        $(document).on('ready',
            function () {
                refreshTableCustomer();
                Initialize();

                //add 09-10-2018, function button di subscription
                $('.btn-subs').click(function () {

                    var $this = $(this);
                    var $kodeSubs = $this.attr('data-plan-btn');
                    var $bulanPilihan = parseInt($this.attr('data-kali'));
                    var $harga = parseInt($('#subs-price-' + $kodeSubs).attr('data-harga'));
                    var $pilihan = "";

                    $('#plan-' + $kodeSubs + ' .btn-section .btn').removeClass('subs_active');
                    $this.addClass('subs_active');

                    if ($bulanPilihan == 3) {
                        $pilihan = "Paket 3 Bulan";
                    } else if ($bulanPilihan == 5) {
                        $pilihan = "Paket 6 Bulan";
                    } else if ($bulanPilihan == 10) {
                        $pilihan = "Paket 12 Bulan";
                    }

                    $('#selected-package-' + $kodeSubs).text($pilihan);
                    $('#price-total-' + $kodeSubs).text(convertToRupiah($harga * $bulanPilihan));
                });

                //end add 09-10-2018, function button di subscription

                $('#search_customer').keypress(function (e) {
                    var key = e.which;
                    if (key == 13)// the enter key code
                    {
                        searchTableCustomer();
                        return false;
                    }
                });
                $('#search_customer_click').click(function () {
                    searchTableCustomer();
                });

                $('#close-editor').on('click', function () {
                    $('.customer_table_section').show();
                    //add by nurul 16/7/2019
                    refreshTableCustomer();
                    //end add by nurul 16/7/2019
                    $('.customer_editor_section').hide();
                    $('#Customers_KODEPOS, #Customers_NAMA, #Customers_EMAIL, #Customers_AL, #Customers_RecNum, ' +
                        '#Customers_CUST, #Customers_TLP, #Customers_KODEPROV, #Customers_KODEKABKOT, #Customers_PERSO, #Customers_API_KEY').val('');
                    $('#CUSTNUMBER').val('[AUTO]');
                    $('#Customers_USERNAME').val('@(username)');
                    $('#Customers_TGL_INPUT').val('@(DateTime.Now.ToString("dd/MM/yyyy"))');
                    $('#KODEPROV, #KODEKABKOT').selectivity('value', null);
                    var namaMarket = $('#MARKET').selectize();
                    namaMarket[0].selectize.setValue(null, true);
                    resetError();
                    $Sort1_Cust = "";
                    $API_CLIENT_P = "";
                    $API_CLIENT_U = "";
                    $('#versi-blibli').hide();
                    $('#MARKET')[0].selectize.enable();
                });
                $('#MARKET')[0].selectize.enable();
            });

        //add by fauzi 06/12/2019
        function simpanStatusSyncPesananStok(custID, status) {
            @*var link = '@Url.Action("SaveStatusSyncPesananStok", "Manage", new { data = "custID_statusSync"})';*@
             var $link = '@Html.Raw(Url.Action("SaveStatusSyncPesananStok", "Manage", new { custID = "cust_ID", statusSync = "status_Sync" }))';
            $link = $link.replace("cust_ID", custID);
            $link = $link.replace("status_Sync", String(status));
            var msg = null;

            $.ajax({
                type: "POST",
                url: $link,
                beforeSend: function () {
                    $('#loading_spinner').show();
                },
                success: function (response) {
                    if (response.Errors == null) {
                        $('#loading_spinner').hide();
                        if (response.success == true) {
                            alert(response.status.toString());
                        } else {
                            alert(response.status.toString());
                        }
                        @*var cekpesanan = @Model.ListPesanan.Count();
                        if (cekpesanan == 0) {
                            window.location.reload(true);
                        } else {
                            $('#pesanan-tab').click();
                        }*@

                        //$('#loading_spinner').hide();
                    } else {
                        $('#loading_spinner').hide();
                        alert(response.Errors);
                    }
                },
                error: function (xhr, status, error) {
                    $('#loading_spinner').hide();
                    console.log(error);
                }
            });

            return false;
        }
        //end add by fauzi 06/12/2019

        function cekJumlahMarketplace() {
            //change by nurul 21/2/2019
            @*var link = '@Url.Action("CekJumlahMarketplace", "Manage", new { uname = "replaceUname" })';
            link = link.replace("replaceUname", '@(username)');*@
            var link = '@Url.Action("CekJumlahMarketplace", "Manage", new { accId = "replaceUname" })';
            link = link.replace("replaceUname", encodeURIComponent('@(accId)'));

            $.ajax({
                type: "GET",
                url: link,
                success: function (res) {
                    $jumlahMarketplaceMax = parseInt(res.JumlahMarketplaceMax);
                    $jumlahMarketplace = parseInt(res.JumlahMarketplace);
                    $listNamaMarketTerpakai = res.ListNamaMarketTerpakai;


                    if (res.SudahSampaiBatasTanggal) {
                        $('#tambah_market').remove();
                        //$('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" data-toggle="modal" ' +
                        //    'data-target="#modalPricing" id="tambah_market">Tambah Baru</button>');
                        $('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" id="tambah_market">Tambah Baru</button>');
                        $('#tambah_market').on('click', function () {
                            $('.customer_table_section').hide();
                            //add by fauzi 19 Desember 2019
                            getStatusSyncMarketplace(false);
                            //end
                            $('.customer_editor_section').show();
                            $('#form_input').hide();
                            $('#form_subs').show();
                        });
                        showSubsMenu(2);
                    }
                    else
                    {
                        $('#tambah_market').remove();
                        $('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" id="tambah_market">Tambah Baru</button>');
                        $('#tambah_market').on('click', function () {
                            RemoveAllAdds();
                            $('.customer_table_section').hide();
                            //add by fauzi 19 Desember 2019
                            getStatusSyncMarketplace(false);
                            //end
                            $('.customer_editor_section').show();
                            $('#form_input').show();
                            $('#form_subs').hide();
                            $('#generate_code').remove();
                            Customers_TLP.value = '.';
                            Customers_AL.value = '.';
                            Customers_KODEPOS.value = '.';
                            Customers_KODEKABKOT.value = '3174';
                            Customers_KODEPROV.value = '31';
                            //Customers_Sort1_Cust.value = '';
                            $('#Customers_Sort1_Cust').val('');
                            //Customers_API_CLIENT_U.value = '';
                            //Customers_API_CLIENT_P.value = '';
                            //Customers_API_KEY.value = '';
                            $('#versi-blibli').hide();
                            $('#MARKET')[0].selectize.enable();
                        });
                    }
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }


        function getKabKot() {
            $.ajax({
                type: "GET",
                /**/
                url: '@Url.Action("GetProvinsi", "Manage")',
                /**/
                contentType: 'application/json',
                cache: false,
                success: function (data) {
                    var provList = [];

                    $.each(data,
                        function (i, item) {
                            provList[i] = {
                                id: item.KodeProv,
                                text: item.NamaProv
                            };
                        });

                    $('#KODEPROV').selectivity({
                        allowClear: true,
                        items: provList,
                        placeholder: 'Harap pilih'
                    });

                    var $kdProv = $('#Customers_KODEPROV').val();

                    $('#KODEPROV').change(function () {
                        var $val = $(this).selectivity('value');

                        if ($val === null) {
                            $("#Customers_KODEPROV").val(null);
                            resetKabKot();
                        } else {
                            $("#Customers_KODEPROV").val($val);
                            loadDataKabupatenKota($val);
                        }
                    });

                    if ($kdProv !== null) {
                        $('#KODEPROV').selectivity('value', $kdProv);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }

        function isInArray(value, array) {
            return array.indexOf(value) > -1;
        }

        function getPelanggan() {
            $.ajax({
                type: "GET",
                /**/
                /**/
                url: '@Url.Action("GetPelanggan", "Manage")',
                /**/
                /**/
                contentType: 'application/json',
                cache: false,
                success: function (data) {
                    var customerList = [];

                    $.each(data,
                        function (i, item) {
                            customerList[i] = {
                                id: item.IdMarket,
                                text: item.NamaMarket
                            };
                        });

                    namaMarket = $('#MARKET').selectize({
                        valueField: 'id',
                        searchField: 'text',
                        options: customerList,
                        onChange: function (value) {
                            cekJumlahMarketplace();

                            var isExist = isInArray(parseInt(value), $listNamaMarketTerpakai);

                            if (!isExist && $jumlahMarketplace >= $jumlahMarketplaceMax) {
                                $("#Customers_NAMA").val(null);
                                $('#tambah_market_pricing').click();

                                $('#form_input').hide();
                                $('#form_subs').show();

                                showSubsMenu(1);
                            } else {
                                $("#Customers_NAMA").val(value);
                                $('#versi-blibli').hide();
                                @{
                                    var v82cart = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("82Cart"))?.IdMarket.ToString();
                                    var bklapak = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("BUKALAPAK"))?.IdMarket.ToString();
                                    var blibli = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Blibli"))?.IdMarket.ToString();
                                    var tokped = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Tokopedia"))?.IdMarket.ToString();
                                    var lzd = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Lazada"))?.IdMarket.ToString();
                                    var shopee = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Shopee"))?.IdMarket.ToString();
                                    var elev = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Elevenia"))?.IdMarket.ToString();
                                    var jd = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("JD.ID"))?.IdMarket.ToString();
                                    var others = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Contains("lain"))?.IdMarket.ToString();
                                    //add by fauzi 26 Februari 2020 untuk penambahan marketplace Shopify
                                    var shopify = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Contains("Shopify"))?.IdMarket.ToString();
                                    //end
                                }
                                //if (@bklapak == value ||  @blibli == value ) {
                                if (@blibli == value ) {
                                    $('#password-akun').show();
                                    $('#Customers_PASSWORD').attr('required', 'checked');
                                    //if (@blibli == value) {
                                        $('#versi-blibli').show();
                                        getVersiBlibli($('#Customers_KD_ANALISA').val());
                                    //}
                                } else {
                                    $('#password-akun').hide();
                                    $('#Customers_PASSWORD').removeAttr('required');
                                    $('#versi-blibli').hide();
                                }
                                if (@bklapak == value) {
                                    $('#password-akun').hide();
                                    $('#Customers_PASSWORD').removeAttr('required');
                                }

                                //add by Tri, remove/append api_key
                                $('#lbl_Customers_API_KEY').remove();
                                $('#txtAPI_Key').remove();
                                //$('#emptyDiv').remove();
                                //$('#txtDescAPIKey').remove();
                                @*if ('@Model.Customers' != null) {

                                }*@

                                showHideShopifyForm(false);


                                if (@bklapak != value && @tokped != value && @shopee != value && @others != value) {
                                @*if (@bklapak != value && @shopee != value) {*@
                                    var labelAPI_Key = '<label class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_KEY" id="lbl_Customers_API_KEY">API Key *</label>';
                                    var txtAPI_Key = '';
                                    if (@lzd == value) {
                                        txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" disabled data-val="true" data-val-length="The field API_KEY must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100"></div>';
                                    } else {
                                        txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" required="required" data-val-length="The field API_KEY must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100"></div>';
                                    }
                                    if (@blibli == value && $('#Customers_KD_ANALISA').val() == "2") {
                                        $('#blibliAPIKey').append(labelAPI_Key + txtAPI_Key);
                                    } else {
                                        $('#divAPIKey').append(labelAPI_Key + txtAPI_Key);
                                    }

                                    //var lblDescAPIKey = '<div id="emptyDiv" class=" col-md-3 col-sm-3 col-xs-12"></div>';
                                    //lblDescAPIKey += '<div id="txtDescAPIKey" class="col-md-6 col-sm-6 col-xs-6" onclick=(openModalDesc(' + value;
                                    //lblDescAPIKey += ');)>Klik di sini untuk melihat cara mendapatkan API key</div>';
                                    //$('descAPIKey').append(lblDescAPIKey);
                                    lblDesc.style.visibility = 'visible';
                                    lblDesc2.style.visibility = 'visible';
                                    if (@lzd == value) {
                                        lblDesc2.innerText = ' Silahkan anda save & lengkapi langkah selanjutnya'
                                    } else {
                                        lblDesc2.innerText = ' Untuk mendapatkan API silahkan lihat petunjuk '
                                        lblPopUp.style.visibility = 'visible';
                                    }
                                    lblDesc3.style.visibility = 'hidden';
                                    lblDesc4.style.visibility = 'hidden';
                                }
                                else if (@shopee == value) {
                                    lblDesc3.style.visibility = 'visible';
                                    lblDesc4.style.visibility = 'visible';
                                    lblDesc3.innerText = '1. Untuk dapat tersambung secara otomatis ke Shopee, Anda dapat melakukan save, dan akan dilanjutkan ke halaman shopee.';
                                    lblDesc4.innerText = '';
                                    lblDesc.style.visibility = 'hidden';
                                    lblDesc2.style.visibility = 'hidden';
                                    lblPopUp.style.visibility = 'hidden';
                                @*else if (@bklapak != value && @lzd != value && @elev != value) {
                                    lblDesc3.style.visibility = 'visible';
                                    lblDesc4.style.visibility = 'visible';
                                    if (@tokped == value) {
                                        //lblDesc3.innerText ='1. Untuk dapat tersambung secara otomatis ke Tokopedia, Anda harus terdaftar sebagai official store (pemegang merk). Apabila Anda sudah terdaftar sebagai official store di Tokopedia, silahkan hubungi customer servise kami.';
                                        //lblDesc4.innerText ='2. Apabila toko Anda bukan official store, maka Anda dapat menarik data penjualan Anda ke MasterOnline di menu Penjualan, Faktur dengan menekan tombol "Upload Faktur".'
                                        lblDesc.style.visibility = 'hidden';
                                        lblDesc2.style.visibility = 'hidden';
                                        lblPopUp.style.visibility = 'hidden';
                                        lblDesc3.style.visibility = 'hidden';
                                        lblDesc4.style.visibility = 'hidden';

                                    } else {
                                        lblDesc3.innerText = '1. Untuk dapat tersambung secara otomatis ke Shopee, Anda dapat melakukan save, dan akan dilanjutkan ke halaman shopee.';
                                        lblDesc4.innerText = '';
                                    }
                                    lblDesc.style.visibility = 'hidden';
                                    lblDesc2.style.visibility = 'hidden';
                                    lblPopUp.style.visibility = 'hidden';*@
                                } else {
                                    lblDesc.style.visibility = 'hidden';
                                    lblDesc2.style.visibility = 'hidden';
                                    lblPopUp.style.visibility = 'hidden';
                                    lblDesc3.style.visibility = 'hidden';
                                    lblDesc4.style.visibility = 'hidden';
                                }

                                if (@blibli == value) {

                                    showHideBlibliForm(true);
                                    //add by fauzi 23 Januari 2020
                                    //change by nurul 15/7/2020
                                    //$('#BlibliMerchantID').show();
                                    //$('#BlibliClient').show();
                                    //$('#BlibliClientPass').show();
                                    if ($('#Customers_KD_ANALISA').val() == "2") {
                                        $('#BlibliSellerID').show();
                                        $('#BlibliMerchantID').hide();
                                        $('#BlibliClient').hide();
                                        $('#BlibliClientPass').hide();
                                        $('#password-akun').hide()
                                        $('#blibliAPIKey').show();
                                        $('#divAPIKey').hide();
                                    } else {
                                        $('#BlibliSellerID').hide();
                                        $('#BlibliMerchantID').show();
                                        $('#BlibliClient').show();
                                        $('#BlibliClientPass').show();
                                        $('#password-akun').show()
                                        $('#blibliAPIKey').hide();
                                        $('#divAPIKey').show();
                                    }
                                    getVersiBlibli($('#Customers_KD_ANALISA').val());
                                    //end change by nurul 15/7/2020
                                    // end
                                }
                                else {
                                    showHideBlibliForm(false);
                                }
                                //unremark by nurul 25/3/2019
                                if (@tokped == value) {
                                    showHideTokpedForm(true);
                                    //add by fauzi 23 Januari 2020
                                    $('#JDAppSecret').hide();
                                    $('#JDAccessToken').hide();
                                    $('#BlibliMerchantID').hide();
                                    $('#BlibliClient').show();
                                    $('#BlibliClientPass').hide();
                                    $('#Customers_Sort1_Cust').val('13072'); // FSID MO : 13072
                                    $('#Customers_API_CLIENT_U').val(''); // Client ID : 36bc3d7bcc13404c9e670a84f0c61676
                                    $('#Customers_API_CLIENT_P').val('8a76adc52d144a9fa1ef4f96b59b7419'); // Client secret : 8a76adc52d144a9fa1ef4f96b59b7419
                                    //end fauzi 23 Januari 2020
                                    //lblDesc3.innerText = '';
                                    //lblDesc4.innerText = '';
                                    $('#descAPIKey').hide();
                                    $('#descAPIKey2').hide();
                                }
                                else {
                                    showHideTokpedForm(false);
                                    //add by fauzi 23 Januari 2020
                                    $('#Customers_Sort1_Cust').val('');
                                    $('#Customers_API_CLIENT_U').val('');
                                    $('#Customers_API_CLIENT_P').val('');
                                    // end

                                    //lblDesc3.innerText = '';
                                    //lblDesc4.innerText = '';
                                    $('#descAPIKey').show();
                                    $('#descAPIKey2').show();
                                }
                                if (@jd == value) {
                                    showHideJDForm(true);
                                    $('#JDAppSecret').show();
                                    $('#JDAccessToken').show();
                                    $('#divAPIKey').show();
                                    lblDesc.innerText = "APP key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.";
                                } else {
                                    showHideJDForm(false);
                                    lblDesc.innerText = "API key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.";
                                }
                                //end unremark by nurul 25/3/2019

                                //end add by Tri, remove/append api_key

                                //add by fauzi
                                if (@v82cart == value) {
                                    var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">API Credential *</label>';

                                    var valuetxtSort1_Cust = "";
                                    if ($('#Customers_Sort1_Cust').val() != null) {
                                        valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                                    }
                                    var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Merchant ID must be a string with a maximum length of 30." data-val-length-max="30" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="30"></div>';
                                    $('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                                    $('#BlibliMerchantID').show();
                                    $('#descAPIKey').hide();
                                    $('#id-nama-akun').html('URL Website *');
                                    $('#txt-nama-akun').prop('placeholder', 'example : https://www.example.com');
                                } else {
                                    $('#id-nama-akun').html('Nama Akun *');
                                    $('#txt-nama-akun').prop('placeholder', '');
                                }

                                if (@shopify == value) {
                                    showHideShopifyForm(true);
                                    $('#password-akun').val('');
                                    $('#BlibliMerchantID').show();
                                    $('#BlibliClient').show();
                                    $('#BlibliClientPass').show();
                                    $('#Customers_TLP').val('.');
                                }

                            }
                        }
                    });

                    namaMarket[0].selectize.setValue($('#Customers_NAMA').val(), true);

                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }
        //add by Tri, function to open modal on how to get api key each marketplace
        function openModalDesc(codeMarketplace) {
            @{
                var kdLzd = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("LAZADA"))?.IdMarket.ToString();
                var kdBlibli = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Blibli"))?.IdMarket.ToString();
                var kdElevenia = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Elevenia"))?.IdMarket.ToString();
                var kdJd = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("JD.ID"))?.IdMarket.ToString();
                //add by fauzi 26 Februari 2020 untuk modal tata cara create API KEY di shopify
                var kdShopify = context.Marketplaces?.SingleOrDefault(m => m.NamaMarket.Equals("Shopify"))?.IdMarket.ToString();
                //end
                 }
            @*if (codeMarketplace == @kdLzd) {
                $('#modalLazadaAPIKey').modal('show');
            }
            else*@

            if (codeMarketplace == @kdBlibli) {
                if ($('#Customers_KD_ANALISA').val() == "2") {
                    $('#modalBlibliAPIKeyNonToken').modal('show');
                } else {
                    $('#modalBlibliAPIKey').modal('show');
                }
            }
            else if (codeMarketplace == @kdElevenia){
                $('#modalEleveniaAPIKey').modal('show');
            }
            else if (codeMarketplace == @kdJd){
                $('#modalJDAPIKey').modal('show');
            }
            else if (codeMarketplace == @kdShopify) {
                $('#modalShopifyAPIKey').modal('show');
            }
        }
        //end add by Tri, function to open modal on how to get api key each marketplace
        var custCode = ""
        function simpanCustomer(btnClicked) {
            if (!validateForm()) return false;

            //change by nurul 21/2/2019
            @*var link = '@Url.Action("CekJumlahMarketplace", "Manage", new { uname = "replaceUname" })';
            link = link.replace("replaceUname", '@(username)');*@
            var link = '@Url.Action("CekJumlahMarketplace", "Manage", new { accId = "replaceUname" })';
            link = link.replace("replaceUname", encodeURIComponent('@(accId)'));

            $.ajax({
                type: "GET",
                url: link,
                success: function (res) {
                    $jumlahMarketplaceMax = parseInt(res.JumlahMarketplaceMax);
                    $jumlahMarketplace = parseInt(res.JumlahMarketplace);
                    $listNamaMarketTerpakai = res.ListNamaMarketTerpakai;

                    var isExist = isInArray(parseInt($('#Customers_NAMA').val()), $listNamaMarketTerpakai);

                    if (!isExist && $jumlahMarketplace >= $jumlahMarketplaceMax) {
                        $("#Customers_NAMA").val(null);
                        $('#tambah_market_pricing').click();

                        $('#form_input').hide();
                        $('#form_subs').show();
                        showSubsMenu(1);

                    } else {
                        var $form = $(btnClicked).parents('form');
                        var $link = '@Url.Action("SaveCustomer", "Manage", new { api_client_username = "replaceClientU", api_client_password = "replaceClientP" })';
                        $link = $link.replace("replaceClientU", $API_CLIENT_U);
                        $link = $link.replace("replaceClientP", $API_CLIENT_P);
                        $.ajax({
                            type: "POST",
                            //url: $form.attr('action'),
                            url: $link,
                            //data: $form.serialize(),
                            data: $('#form-customer').serialize(),
                            beforeSend: function () {
                                $('#loading_spinner').show();
                            },
                            success: function (response) {
                                if (response.Errors == null || response.kodeCust != null) {
                                    //add by Tri 26-9-2018
                                    if (response.kodeCust != undefined) {
                                        custCode = response.kodeCust;
                                        if (response.marketplace == "LAZADA") {
                                            if (confirm("Generate New API Key?")) {
                                                GenerateLazadaCode(custCode);
                                            } else {
                                                //window.location.href = '@Url.Action("Pelanggan", "Manage")';
                                                refreshTableCustomer();
                                            }
                                        }
                                        else if (response.marketplace == "SHOPEE") {
                                            //change by nurul 7/1/2019
                                            //GetShopeeShopId(custCode);
                                            if (confirm("Authorization Shopee account?")) {
                                                GetShopeeShopId(custCode);
                                            }
                                            //end change
                                        }
                                        else if (response.marketplace == "BUKALAPAK") {
                                            //change by nurul 7/1/2019
                                            //GetShopeeShopId(custCode);
                                            if (confirm("Authorization Bukalapak account?")) {
                                                GenerateBukalapakCode(custCode);
                                            }
                                            //end change
                                        }
                                        //add by nurul 7/1/2019
                                        $('#loading_spinner').hide();
                                        //end add
                                    } else {
                                        $('#table-customer-partial').html(response);
                                        //Initialize();
                                        refreshTableCustomer();
                                        $('#close-editor').click();
                                        $('#loading_spinner').hide();
                                        $("html, body").animate({ scrollTop: 0 }, "slow");
                                    }
                                    //end add by Tri 26-9-2018
                                } else {
                                    //change by nurul 16 / 8 / 2018 req pak dani
                                    //console.log(response.Errors);
                                    //alert('Ada data yang tidak valid!');
                                    //if ($('#MARKET').val() == "Tokopedia" || $('#MARKET').val() == "15" ) {
                                    //    alert('Akun anda harus official store di Tokopedia. Silahkan hubungi kami apabila anda sudah official store!');
                                    //    Initialize();
                                    //    $('#close-editor').click();
                                    //    $('#loading_spinner').hide();
                                    //    $("html, body").animate({ scrollTop: 0 }, "slow");
                                    //} else {

                                    //change by nurul 14/1/2019
                                    ////console.log(response.Errors);
                                    ////alert('Ada data yang tidak valid!');
                                    ////Initialize();
                                    ////$('#loading_spinner').hide();
                                    if (response.Errors[0] == "") {
                                        console.log(response.errors);
                                        alert('ada data yang tidak valid!');
                                        $('#loading_spinner').hide();
                                    } else {
                                        alert(response.Errors[0]);
                                        $('#loading_spinner').hide();
                                    }
                                    //end change by nurul 14/1/2019
                                    //}
                                }
                            },
                            error: function (xhr, status, error) {
                                console.log(error);
                            }
                        });
                    }
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });

            return false;
        }
        function showHideJDForm(show) {
            $('#labelTOKEN').remove();
            $('#txtTOKEN').remove();
            $('#labelAPP_SECRET').remove();
            $('#txtAPP_SECRET').remove();


            if (show) {

                var labelTOKEN = '<label id="labelTOKEN" class="control-label col-md-3 col-sm-3 col-xs-12" for="labelTOKEN">Access Token *</label>';

                var valuetxtToken = "";
                if ($('#Customers_TOKEN').val() != null) {
                    valuetxtToken = $('#Customers_TOKEN').val();
                }
                var txtToken = '<div id="txtTOKEN" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field TOKEN must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_TOKEN" name="Customers.TOKEN" required="required" type="text" value="' + valuetxtToken + '" maxlength="50"></div>';

                var labelAPP_SECRET = '<label id="labelAPP_SECRET" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">APP Secret *</label>';

                var valuetxtAPP_SECRET = "";
                if ($('#Customers_API_CLIENT_U').val() != null) {
                    valuetxtAPP_SECRET = $('#Customers_API_CLIENT_U').val();
                }
                var txtAPI_CLIENT_U = '<div id="txtAPP_SECRET" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_CLIENT_U must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="' + valuetxtAPP_SECRET + '" maxlength="50"></div>';

                $('#JDAppSecret').append(labelAPP_SECRET + txtAPI_CLIENT_U);
                $('#JDAccessToken').append(labelTOKEN + txtToken);
                $('#lbl_Customers_API_KEY').html("APP Key *");
            }
        }
        function RemoveAllAdds() {
            $('#labelSort1_Cust').remove();
            $('#txtSort1_Cust').remove();
            $('#labelAPI_CLIENT_U').remove();
            $('#txtAPI_CLIENT_U').remove();
            $('#labelAPI_CLIENT_P').remove();
            $('#txtAPI_CLIENT_P').remove();
            $('#labelAPI_Key').remove();
            $('#labelKetTokped1').remove();
            $('#labelKetTokped2').remove();
            $('#labelAPI_KeyTokped').remove();
            $('#txtAPI_KeyTokped').remove();
            $('#labelKetTokped1').remove();
            $('#labelKetTokped2').remove();
            $('#labelTOKEN').remove();
            $('#txtTOKEN').remove();
            $('#labelAPP_SECRET').remove();
            $('#txtAPP_SECRET').remove();
        }
        function showHideBlibliForm(show){
            $('#labelSort1_Cust').remove();
            $('#txtSort1_Cust').remove();
            $('#labelAPI_CLIENT_U').remove();
            $('#txtAPI_CLIENT_U').remove();
            $('#labelAPI_CLIENT_P').remove();
            $('#txtAPI_CLIENT_P').remove();
            $('#labelAPI_Key').remove();
            //$('#txtAPI_Key').remove();
            //$('#labelKetTokped1').remove();
            //$('#labelKetTokped2').remove();
            if (show) {
                if ($('#Customers_KD_ANALISA').val() == "2") {
                    var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">ID Seller *</label>';

                    var valuetxtSort1_Cust = "";
                    if ($('#Customers_Sort1_Cust').val() != null && $('#Customers_Sort1_Cust').val() != undefined && $('#Customers_Sort1_Cust').val() != "") {
                        valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                    } else {
                        valuetxtSort1_Cust = $Sort1_Cust;
                    }
                    var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Seller ID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';
                    $('#BlibliSellerID').append(labelSort1_Cust + txtSort1_Cust);
                    $('#lbl_Customers_API_KEY').html("Kata Sandi API *");
                } else {
                    var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">Merchant ID *</label>';

                    var valuetxtSort1_Cust = "";
                    if ($('#Customers_Sort1_Cust').val() != null && $('#Customers_Sort1_Cust').val() != undefined && $('#Customers_Sort1_Cust').val() != "") {
                        valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                    } else {
                        valuetxtSort1_Cust = $Sort1_Cust;
                    }
                    var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Merchant ID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';

                    var labelAPI_CLIENT_U = '<label id="labelAPI_CLIENT_U" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">API client *</label>';

                    var valuetxtAPI_CLIENT_U = "";
                    if ($('#Customers_API_CLIENT_U').val() != null && $('#Customers_API_CLIENT_U').val() != undefined && $('#Customers_API_CLIENT_U').val() != "") {
                        valuetxtAPI_CLIENT_U = $('#Customers_API_CLIENT_U').val();
                    } else {
                        valuetxtAPI_CLIENT_U = $API_CLIENT_U;
                    }
                    var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_CLIENT_U must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="' + valuetxtAPI_CLIENT_U + '" maxlength="50"></div>';

                    var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">API client password *</label>';
                    var valuetxtAPI_CLIENT_P = "";
                    if ($('#Customers_API_CLIENT_P').val() != null && $('#Customers_API_CLIENT_P').val() != undefined && $('#Customers_API_CLIENT_P').val() != "") {
                        valuetxtAPI_CLIENT_P = $('#Customers_API_CLIENT_P').val();
                    } else {
                        valuetxtAPI_CLIENT_P = $API_CLIENT_P;
                    }
                    var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                    $('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                    $('#BlibliClient').append(labelAPI_CLIENT_U + txtAPI_CLIENT_U);
                    $('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);

                    $('#lbl_Customers_API_KEY').html("API Secret Key *");
                    $('#labelAPI_CLIENT_U').html("API client username *");
                }
            }
        }

        function showHideShopifyForm(show) {
            $('#labelSort1_Cust').remove();
            $('#txtSort1_Cust').remove();
            $('#labelAPI_CLIENT_U').remove();
            $('#txtAPI_CLIENT_U').remove();
            $('#labelAPI_CLIENT_P').remove();
            $('#txtAPI_CLIENT_P').remove();
            $('#labelAPI_Key').remove();
            //$('#txtAPI_Key').remove();
            //$('#labelKetTokped1').remove();
            //$('#labelKetTokped2').remove();
            if (show) {
                //var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">Merchant ID *</label>';

                var valuetxtSort1_Cust = "";
                if ($('#Customers_Sort1_Cust').val() != null) {
                    valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                }
                //var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Merchant ID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';

                //var labelAPI_CLIENT_U = '<label id="labelAPI_CLIENT_U" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">API client *</label>';

                //var valuetxtAPI_CLIENT_U = "";
                //if ($('#Customers_API_CLIENT_U').val() != null) {
                //    valuetxtAPI_CLIENT_U = $('#Customers_API_CLIENT_U').val();
                //}
                //var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_CLIENT_U must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="' + valuetxtAPI_CLIENT_U + '" maxlength="50"></div>';

                var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">API password *</label>';
                var valuetxtAPI_CLIENT_P = "";
                if ($('#Customers_API_CLIENT_P').val() != null) {
                    valuetxtAPI_CLIENT_P = $('#Customers_API_CLIENT_P').val();
                }
                var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                //$('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                //$('#BlibliClient').append(labelAPI_CLIENT_U + txtAPI_CLIENT_U);
                $('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);

                //$('#lbl_Customers_API_KEY').html("API Secret Key *");
                $('#labelAPI_CLIENT_U').html("API client username *");
            }
        }

        function showHideTokpedForm(show){
            //$('#labelSort1_Cust').remove();
            //$('#txtSort1_Cust').remove();
            //$('#labelAPI_CLIENT_U').remove();
            //$('#txtAPI_CLIENT_U').remove();
            //$('#labelAPI_CLIENT_P').remove();
            //$('#txtAPI_CLIENT_P').remove();
            $('#labelAPI_KeyTokped').remove();
            $('#txtAPI_KeyTokped').remove();
            $('#labelKetTokped1').remove();
            $('#labelKetTokped2').remove();
            $('#descAPIKey').show();
            $('#descAPIKey2').show();
            $('#labelKetTokped1').remove();
            $('#labelKetTokped2').remove();

            //add by fauzi 23 Januari 2020
            $('#Customers_API_CLIENT_U').val('36bc3d7bcc13404c9e670a84f0c61676'); // Client ID : 36bc3d7bcc13404c9e670a84f0c61676
            //end fauzi 23 Januari 2020

            if (show) {
                var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">FSID</label>';

                var valuetxtSort1_Cust = "";
                if ($('#Customers_Sort1_Cust').val() != null) {
                    valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                }
                //var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field FSID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="'+ valuetxtSort1_Cust +'" maxlength="10"></div>';
                var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field FSID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';

                var labelAPI_CLIENT_U = '<label id="labelAPI_CLIENT_U" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">Client ID</label>';

                var valuetxtAPI_CLIENT_U = "";
                if ($('#Customers_API_CLIENT_U').val() != null) {
                    valuetxtAPI_CLIENT_U = $('#Customers_API_CLIENT_U').val();
                }
                //var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Client ID must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="'+ valuetxtAPI_CLIENT_U +'" maxlength="50"></div>';
                var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Client ID must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" type="text" value="' + valuetxtAPI_CLIENT_U + '" maxlength="50"></div>';

                var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">Client Secret</label>';
                var valuetxtAPI_CLIENT_P = "";
                if ($('#Customers_API_CLIENT_P').val() != null) {
                    valuetxtAPI_CLIENT_P = $('#Customers_API_CLIENT_P').val();
                }
                //var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';
                var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                //add by nurul 25/3/2019
                var labelAPI_KeyTokped = '<label id="labelAPI_KeyTokped" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_KEY" >Shop ID</label>';
                var valuetxtAPI_Key = "";
                if ($('#Customers_API_KEY').val() != null) {
                    valuetxtAPI_Key = $('#Customers_API_KEY').val();
                }
                //var txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" required="required" data-val-length="The field API_KEY must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100"></div>';
                var txtAPI_KeyTokped = '<div id="txtAPI_KeyTokped" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Shop ID must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100" value="' + valuetxtAPI_Key + '"></div>';

                //<div id="emptyDiv3" class="col-md-3 col-sm-3 col-xs-1"></div>
                //var labelKetTokped1 = '<label id="labelKetTokped1" >1. Untuk dapat tersambung secara otomatis ke Tokopedia, Anda harus terdaftar sebagai official store (pemegang merk). Apabila Anda sudah terdaftar sebagai official store di Tokopedia, silahkan hubungi MD (Merchandiser) untuk menggunakan fitur Fullfillment Service Tokopedia dan mendapatkan FSID, Client ID, Client Secret dan Shop ID Anda.</label>';
                //var labelKetTokped2 = '<label id="labelKetTokped2" >2. Apabila toko Anda bukan official store, maka Anda dapat menarik data penjualan Anda ke MasterOnline di menu Penjualan, Faktur dengan menekan tombol "Upload Faktur".</label>';
                //end add by nurul 25/3/2019
                //$('#descAPIKey').hide();
                //$('#descAPIKey2').hide();

                $('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                $('#BlibliClient').append(labelAPI_CLIENT_U + txtAPI_CLIENT_U);
                $('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);
                $('#TokpedShopID').append(labelAPI_KeyTokped + txtAPI_KeyTokped);
                //$('#LabelTokped1').append(labelKetTokped1);
                //$('#LabelTokped2').append(labelKetTokped2);
            }
        }
        function Initialize() {
            $('#modalPricing').on('hidden.bs.modal', function () {
                namaMarket[0].selectize.setValue(null, true);
            });

            cekJumlahMarketplace();

            //$('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" data-toggle="modal" ' +
            //    'data-target="#modalPricing" id="tambah_market_pricing" style="display: none;">Modal Pricing</button>');
            $('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" style="display: none;" id="tambah_market_pricing">Modal Pricing</button>');
            var table = $('#datatable').DataTable();

            //$('#search_customer').keyup(function () {
            //    table.search($(this).val()).draw();
            //});


            $('#tambah_market').on('click', function () {
                $('.customer_table_section').hide();
                //add by fauzi 19 Desember 2019
                getStatusSyncMarketplace(false);
                //end
                $('.customer_editor_section').show();
                //add by nruul 18/10/2018
                $("#Customers_TOP").keydown(
                    function () {
                        validateInput($(this), 'TOP');
                    });
                //END ADD
                $('#versi-blibli').hide();
            });



            if ($('.message-error').text() !== '') {
                $('#tambah_market').click();
            }

            getPelanggan();
            getKabKot();
            resetKabKot();

            //add by nruul 18/10/2018
            $("#Customers_TOP").keydown(
                function () {
                    validateInput($(this), 'TOP');
                });
            //END ADD
            //add by nurul 26 nov 2018, setelah di close, search lg
            table.search($('#search_customer').val()).draw();
            //end add by nurul 26 nov 2018, setelah di close, search lg

            $Sort1_Cust = "";
            $API_CLIENT_U = "";
            $API_CLIENT_P = "";

            $('#versi-blibli').hide();
        }

        function resetKabKot() {
            $('#KODEKABKOT').selectivity({
                allowClear: true,
                items: [],
                placeholder: 'Harap pilih'
            });
            $('#KODEKABKOT').selectivity('value', 'Harap pilih');
        }

        function loadDataKabupatenKota(kdProv) {
            var link = '@Url.Action("GetKabKot", "Manage", new { kodeProv = "replaceId" })';
            link = link.replace("replaceId", encodeURIComponent(kdProv));

            $.ajax({
                type: "GET",
                /**/
                url: link,
                /**/
                contentType: 'application/json',
                cache: false,
                success: function (data) {
                    var kabkotList = [];

                    $.each(data,
                        function (i, item) {
                            kabkotList[i] = {
                                id: item.KodeKabKot,
                                text: item.NamaKabKot
                            };
                        });

                    $('#KODEKABKOT').selectivity({
                        allowClear: true,
                        items: kabkotList,
                        placeholder: 'Harap pilih'
                    });

                    $('#KODEKABKOT').change(function () {
                        var $val = $(this).selectivity('value');

                        if ($val === null) {
                            $("#Customers_KODEKABKOT").val(null);
                        } else {
                            $("#Customers_KODEKABKOT").val($val);
                        }
                    });

                    var $kdKabKot = $('#Customers_KODEKABKOT').val();

                    if ($kdKabKot !== null) {
                        $('#KODEKABKOT').selectivity('value', $kdKabKot);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }

        function editcustomer(customerId) {
            var link = '@Url.Action("EditCustomer", "Manage", new { recNum = "replaceId" })';
            link = link.replace("replaceId", encodeURIComponent(customerId));

            $.ajax({
                type: "GET",
                url: link,
                beforeSend: function() {
                    $('#loading_spinner').show();
                },
                success: function (response) {
                    getPelanggan();
                    getKabKot();
                    resetKabKot();
                    @{
                        <text>
                            $('#Customers_TGL_INPUT').val(@(Model?.Customers?.TGL_INPUT));
                        </text>
                    }
                    $('#Customers_USERNAME').val(response.Customers.USERNAME);
                    $('#Customers_PASSWORD').val(response.Customers.PASSWORD);
                    $('#Customers_RecNum').val(response.Customers.RecNum);
                    $('#Customers_CUST').val(response.Customers.CUST).attr('disabled', 'disabled');
                    $('#CUSTNUMBER').val(response.Customers.CUST);
                    $('#Customers_NAMA').val(response.Customers.NAMA);
                    $('#Customers_PERSO').val(response.Customers.PERSO);
                    $('#txt-nama-akun').val(response.Customers.PERSO);
                    $('#Customers_EMAIL').val(response.Customers.EMAIL).trigger('change');
                    $('#Customers_AL').val(response.Customers.AL);
                    $('#Customers_KODEPOS').val(response.Customers.KODEPOS);
                    $('#Customers_KODEPROV').val(response.Customers.KODEPROV);
                    $('#Customers_KODEKABKOT').val(response.Customers.KODEKABKOT);
                    $('#Customers_TLP').val(response.Customers.TLP);
                    $('#Customers_TOP').val(response.Customers.TOP);
                    //add by nurul 16/7/2020
                    $('#Customers_CUST').attr('disabled', 'disabled');
                    //$('#MARKET').attr('disabled', 'disabled');
                    $('#MARKET')[0].selectize.disable();
                    //$('select').each(function (i) {
                    //    if ($('select')[i].id == "MARKET") {
                    //        //$(this).selectize.disable();
                    //    }
                    //});
                    //end add by nurul 16/7/2020

                    //add by fauzi 06/12/2019 function for onchange selectize and change db arf01 TIDAK_HIT_UANG_R (sync_pesanan_dan_stok)
                    getStatusSyncMarketplace(response.Customers.TIDAK_HIT_UANG_R);

                    //add fauzi
                    //$('#formdivAPIKey').show();
                    $('#divAPIKey').show();
                    $('#JDAppSecret').show();
                    $('#JDAccessToken').show();


                    //$('#Customers_API_KEY').val(response.Customers.API_KEY);
                    //end add by Tri 11 Maret 2019
                    $('#form_input').show();
                    $('#form_subs').hide();
                    //end add by Tri 11 Maret 2019
                    //add by Tri, remove/append api_key
                    $('#lbl_Customers_API_KEY').remove();
                    $('#txtAPI_Key').remove();
                    //$('#emptyDiv').remove();
                    //$('#txtDescAPIKey').remove();
                    //if (@bklapak == response.Customers.NAMA ||  @blibli == response.Customers.NAMA ) {
                    if (@blibli == response.Customers.NAMA ) {
                        $('#password-akun').show();
                        $('#Customers_PASSWORD').attr('required', 'checked');

                    } else {
                        $('#password-akun').hide();
                        $('#Customers_PASSWORD').removeAttr('required');
                    }
                    if (@bklapak == response.Customers.NAMA) {
                        $('#password-akun').hide();
                        $('#Customers_PASSWORD').removeAttr('required');
                    }
                    if (@bklapak != response.Customers.NAMA && @tokped != response.Customers.NAMA && @shopee != response.Customers.NAMA && @others != response.Customers.NAMA) {
                    @*if (@bklapak != response.Customers.NAMA) {*@
                        var valuetxtAPI_Key = "";
                        if (response.Customers.API_KEY != null) {
                            valuetxtAPI_Key = response.Customers.API_KEY;
                        }
                        var labelAPI_Key = '<label class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_KEY" id="lbl_Customers_API_KEY">API Key *</label>';
                        if (@lzd != response.Customers.NAMA) {
                            var txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" value="' + valuetxtAPI_Key + '" id="Customers_API_KEY" name="Customers.API_KEY" required="required" type="text"></div>';
                        } else {
                            var txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" disabled value="' + valuetxtAPI_Key + '" id="Customers_API_KEY" name="Customers.API_KEY" type="text"></div>';
                        }

                        if (@blibli == response.Customers.NAMA && response.Customers.KD_ANALISA == "2") {
                            $('#blibliAPIKey').append(labelAPI_Key + txtAPI_Key);
                        } else {
                            $('#divAPIKey').append(labelAPI_Key + txtAPI_Key);
                        }

                        //var lblDescAPIKey = '<div id="emptyDiv" class=" col-md-3 col-sm-3 col-xs-12"></div>';
                        //lblDescAPIKey += '<div id="txtDescAPIKey" class="col-md-6 col-sm-6 col-xs-6" onclick=(openModalDesc(' + value;
                        //lblDescAPIKey += ');)>Klik di sini untuk melihat cara mendapatkan API key</div>';
                        //$('descAPIKey').append(lblDescAPIKey);
                        lblDesc.style.visibility = 'visible';
                        lblDesc2.style.visibility = 'visible';
                        lblDesc3.style.visibility = 'visible';
                        lblDesc4.style.visibility = 'visible';
                        if (@lzd == response.Customers.NAMA) {
                            lblDesc2.innerText = ' Silahkan anda save & lengkapi langkah selanjutnya';
                            lblDesc3.style.visibility = 'hidden';
                            lblDesc4.style.visibility = 'hidden';
                            lblPopUp.style.visibility = 'hidden';
                        @*} else if (@shopee == response.Customers.NAMA) {
                            lblDesc.style.visibility = 'hidden';
                            lblDesc2.style.visibility = 'hidden';
                            lblDesc3.innerText = '1. Untuk dapat tersambung secara otomatis ke Shopee, Anda dapat melakukan save, dan akan dilanjutkan ke halaman shopee.';
                            lblDesc4.innerText = '';
                            lblPopUp.style.visibility = 'hidden';*@
                        }else {
                            lblDesc2.innerText = ' Untuk mendapatkan API silahkan lihat petunjuk ';
                            lblPopUp.style.visibility = 'visible';
                            lblDesc3.style.visibility = 'hidden';
                            lblDesc4.style.visibility = 'hidden';
                        }
                    }
                    @*else if (@bklapak != response.Customers.NAMA) {
                        lblDesc.style.visibility = 'hidden';
                        lblDesc2.style.visibility = 'hidden';
                        lblDesc3.style.visibility = 'visible';
                        lblDesc3.innerText = '1. Untuk dapat tersambung secara otomatis ke Tokopedia, Anda harus terdaftar sebagai official store (pemegang merk). Apabila Anda sudah terdaftar sebagai official store di Tokopedia, silahkan hubungi customer servise kami.';
                        lblDesc4.style.visibility = 'visible';
                        lblPopUp.style.visibility = 'hidden';
                    }*@
                    else {
                        lblDesc.style.visibility = 'hidden';
                        lblDesc2.style.visibility = 'hidden';
                        lblPopUp.style.visibility = 'hidden';
                        lblDesc3.style.visibility = 'hidden';
                        lblDesc4.style.visibility = 'hidden';
                    }

                    //end add by Tri, remove/append api_key
                    @*//add by Tri, API key bukalapak auto generate
                    $('#lbl_Customers_API_KEY').remove();
                    $('#txtAPI_Key').remove();
                    @{
                        var blCode = context.Marketplaces.SingleOrDefault(m => m.NamaMarket.Equals("LAZADA")).IdMarket.ToString();
                    }
                    if (@blCode != response.Customers.NAMA) {
                        var labelAPI_Key = '<label class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_KEY" id="lbl_Customers_API_KEY">API Key *</label>';
                        var txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_KEY must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" value="" maxlength="100"></div>';
                        $('#divAPIKey').append(labelAPI_Key + txtAPI_Key);
                    }
                    //end add by Tri, API key bukalapak auto generate*@
                    //add by Tri, button for generate lazada code
                    //remark by Tri, auto pop up when user save
                    @*$('#generate_code').remove();
                    @{
                        var lzdCode = context.Marketplaces.SingleOrDefault(m => m.NamaMarket.Equals("LAZADA")).IdMarket.ToString();
                    }
                    if (@lzdCode == response.Customers.NAMA) {
                        $('#buttonGen').append('<button class="btn btn-primary" onclick="GenerateLazadaCode('+response.Customers.CUST+'); return false;" id="generate_code">Generate</button>');
                    }*@
                    //end remark by Tri, auto pop up when user save
                    //end add by Tri, button for generate lazada code
                    //add by calvin, textbox for client api blibli
                    $('#labelSort1_Cust').remove();
                    $('#txtSort1_Cust').remove();
                    $('#labelAPI_CLIENT_U').remove();
                    $('#txtAPI_CLIENT_U').remove();
                    $('#labelAPI_CLIENT_P').remove();
                    $('#txtAPI_CLIENT_P').remove();
                    $('#labelAPI_KeyTokped').remove();
                    $('#txtAPI_KeyTokped').remove();
                    $('#labelKetTokped1').remove();
                    $('#labelKetTokped2').remove();
                    $('#labelTOKEN').remove();
                    $('#txtTOKEN').remove();
                    $('#labelAPP_SECRET').remove();
                    $('#txtAPP_SECRET').remove();

                    //add by fauzi 23 Januari 2020
                    $('#JDAppSecret').show();
                    $('#JDAccessToken').show();

                    @{
                        var blibliCode = context.Marketplaces.SingleOrDefault(m => m.NamaMarket.Equals("BLIBLI")).IdMarket.ToString();
                    }
                    if (@blibliCode == response.Customers.NAMA) {
                        $('#versi-blibli').show();
                        $Sort1_Cust = response.Customers.Sort1_Cust;
                        $API_CLIENT_P = response.Customers.API_CLIENT_P;
                        $API_CLIENT_U = response.Customers.API_CLIENT_U;
                        $('#Customers_KD_ANALISA').change(function () {
                            getVersiBlibli($('#Customers_KD_ANALISA').val());
                        });
                        $('#Customers_KD_ANALISA').val(response.Customers.KD_ANALISA);
                        if ($('#Customers_KD_ANALISA').val() == "2") {
                            $('#password-akun').hide();
                            $('#Customers_KD_ANALISA').val(response.Customers.KD_ANALISA);
                            getVersiBlibli($('#Customers_KD_ANALISA').val());
                            showHideBlibliForm(true);
                            $('#BlibliSellerID').show();
                            $('#BlibliMerchantID').hide();
                            $('#BlibliClient').hide();
                            $('#BlibliClientPass').hide();
                            $('#blibliAPIKey').show();
                            $('#divAPIKey').hide();


                            //var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">Seller ID *</label>';

                            //var valuetxtSort1_Cust = "";
                            //$('#Customers_Sort1_Cust').val(response.Customers.Sort1_Cust);
                            //if ($('#Customers_Sort1_Cust').val() != null) {
                            //    valuetxtSort1_Cust = $('#Customers_Sort1_Cust').val();
                            //}
                            //var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Seller ID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';
                            //$('#BlibliSellerID').append(labelSort1_Cust + txtSort1_Cust);
                            //$('#lbl_Customers_API_KEY').html("Kata Sandi API *");
                            //$('#divAPIKey').show();
                            //$('#BlibliSellerID').show();
                            //$('#BlibliMerchantID').hide();
                            //$('#BlibliClient').hide();
                            //$('#BlibliClientPass').hide();
                        } else {
                            $('#versi-blibli').show();
                            $('#Customers_KD_ANALISA').val("1");
                            getVersiBlibli($('#Customers_KD_ANALISA').val());
                            showHideBlibliForm(true);
                            $('#BlibliSellerID').hide();
                            $('#BlibliMerchantID').show();
                            $('#BlibliClient').show();
                            $('#BlibliClientPass').show();
                            $('#password-akun').show();
                            $('#blibliAPIKey').hide();
                            $('#divAPIKey').show();

                            //$('#lbl_Customers_API_KEY').html("API Secret Key *");
                            //var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">Merchant ID *</label>';

                            //var valuetxtSort1_Cust = "";
                            //$('#Customers_Sort1_Cust').val(response.Customers.Sort1_Cust);
                            //if (response.Customers.Sort1_Cust != null) {
                            //    valuetxtSort1_Cust = response.Customers.Sort1_Cust;
                            //}
                            //var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Merchant ID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';

                            //var labelAPI_CLIENT_U = '<label id="labelAPI_CLIENT_U" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">API client *</label>';

                            //var valuetxtAPI_CLIENT_U = "";
                            //if (response.Customers.API_CLIENT_U != null) {
                            //    valuetxtAPI_CLIENT_U = response.Customers.API_CLIENT_U;
                            //}
                            //var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_CLIENT_U must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="' + valuetxtAPI_CLIENT_U + '" maxlength="50"></div>';

                            //var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">API client password *</label>';
                            //var valuetxtAPI_CLIENT_P = "";
                            //if (response.Customers.API_CLIENT_P != null) {
                            //    valuetxtAPI_CLIENT_P = response.Customers.API_CLIENT_P;
                            //}
                            //var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                            //$('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                            //$('#BlibliClient').append(labelAPI_CLIENT_U + txtAPI_CLIENT_U);
                            //$('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);
                            ////add by fauzi 23 Januari 2020
                            //$('#divAPIKey').show();
                            //$('#BlibliMerchantID').show();
                            //$('#BlibliClient').show();
                            //$('#BlibliClientPass').show();
                            ////end add
                            //$('#labelAPI_CLIENT_U').html("API client username *");
                        }

                    }
                    if (@tokped == response.Customers.NAMA) {
                        var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">FSID</label>';

                        var valuetxtSort1_Cust = "";
                        if (response.Customers.Sort1_Cust != null) {
                            valuetxtSort1_Cust = response.Customers.Sort1_Cust;
                        }
                        //var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field FSID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="'+ valuetxtSort1_Cust +'" maxlength="10"></div>';
                        var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field FSID must be a string with a maximum length of 10." data-val-length-max="10" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" type="text" value="' + valuetxtSort1_Cust + '" maxlength="10"></div>';

                        var labelAPI_CLIENT_U = '<label id="labelAPI_CLIENT_U" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">Client ID</label>';

                        var valuetxtAPI_CLIENT_U = "";
                        if (response.Customers.API_CLIENT_U != null) {
                            valuetxtAPI_CLIENT_U = response.Customers.API_CLIENT_U;
                        }
                        //var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Client ID must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="'+ valuetxtAPI_CLIENT_U +'" maxlength="50"></div>';
                        var txtAPI_CLIENT_U = '<div id="txtAPI_CLIENT_U" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Client ID must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" type="text" value="' + valuetxtAPI_CLIENT_U + '" maxlength="50"></div>';

                        var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">Client Secret</label>';
                        var valuetxtAPI_CLIENT_P = "";
                        if (response.Customers.API_CLIENT_P != null) {
                            valuetxtAPI_CLIENT_P = response.Customers.API_CLIENT_P;
                        }
                        //var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';
                        var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                        //add by nurul 25/3/2019
                        var labelAPI_KeyTokped = '<label id="labelAPI_KeyTokped" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_KEY">Shop ID</label>';
                        var valuetxtAPI_Key = "";
                        if (response.Customers.API_KEY != null) {
                            valuetxtAPI_Key = response.Customers.API_KEY;
                        }
                        //var txtAPI_Key = '<div id="txtAPI_Key" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" required="required" data-val-length="The field API_KEY must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100"></div>';
                        var txtAPI_KeyTokped = '<div id="txtAPI_KeyTokped" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Shop ID must be a string with a maximum length of 100." data-val-length-max="100" id="Customers_API_KEY" name="Customers.API_KEY" type="text" maxlength="100" value="' + valuetxtAPI_Key + '"></div>';

                        //<div id="emptyDiv3" class="col-md-3 col-sm-3 col-xs-1"></div>
                        //var labelKetTokped1 = '<label id="labelKetTokped1">1. Untuk dapat tersambung secara otomatis ke Tokopedia, Anda harus terdaftar sebagai official store (pemegang merk). Apabila Anda sudah terdaftar sebagai official store di Tokopedia, silahkan hubungi MD (Merchandiser) untuk menggunakan fitur Fullfillment Service Tokopedia dan mendapatkan FSID, Client ID, Client Secret dan Shop ID Anda.</label>';
                        //var labelKetTokped2 = '<label id="labelKetTokped2">2. Apabila toko Anda bukan official store, maka Anda dapat menarik data penjualan Anda ke MasterOnline di menu Penjualan, Faktur dengan menekan tombol "Upload Faktur".</label>';
                        //end add by nurul 25/3/2019
                        $('#descAPIKey').hide();
                        $('#descAPIKey2').hide();
                        $('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                        $('#BlibliClient').append(labelAPI_CLIENT_U + txtAPI_CLIENT_U);
                        $('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);
                        // add by fauzi 23 Januari 2020
                        $('#JDAppSecret').hide();
                        $('#JDAccessToken').hide();
                        $('#BlibliMerchantID').hide();
                        $('#BlibliClient').show();
                        $('#BlibliClientPass').hide();
                        // end by fauzi 23 Januari 2020
                        $('#TokpedShopID').append(labelAPI_KeyTokped + txtAPI_KeyTokped);
                        //$('#LabelTokped1').append(labelKetTokped1);
                        //$('#LabelTokped2').append(labelKetTokped2);
                    }
                    if (@jd == response.Customers.NAMA) {
                        var labelTOKEN = '<label id="labelTOKEN" class="control-label col-md-3 col-sm-3 col-xs-12" for="labelTOKEN">Access Token *</label>';

                        var valuetxtToken = "";
                        if (response.Customers.TOKEN != null) {
                            valuetxtToken = response.Customers.TOKEN;
                        }
                        var txtToken = '<div id="txtTOKEN" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field TOKEN must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_TOKEN" name="Customers.TOKEN" required="required" type="text" value="' + valuetxtToken + '" maxlength="50"></div>';

                        var labelAPP_SECRET = '<label id="labelAPP_SECRET" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_U">APP Secret *</label>';

                        var valuetxtAPP_SECRET = "";
                        if (response.Customers.API_CLIENT_U != null) {
                            valuetxtAPP_SECRET = response.Customers.API_CLIENT_U;
                        }
                        var txtAPI_CLIENT_U = '<div id="txtAPP_SECRET" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field API_CLIENT_U must be a string with a maximum length of 50." data-val-length-max="50" id="Customers_API_CLIENT_U" name="Customers.API_CLIENT_U" required="required" type="text" value="' + valuetxtAPP_SECRET + '" maxlength="50"></div>';

                        $('#JDAppSecret').append(labelAPP_SECRET + txtAPI_CLIENT_U);
                        $('#JDAccessToken').append(labelTOKEN + txtToken);
                        $('#lbl_Customers_API_KEY').html("APP Key *");
                        //add by fauzi 24 Agustus 2020
                        $('#divAPIKey').show();
                        lblDesc.innerText = "APP key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.";
                    } else {
                        lblDesc.innerText = "API key adalah kode yang harus diisi untuk dapat terkoneksi dengan marketplace.";
                    }//end add
                    if (@shopee == response.Customers.NAMA) {
                            lblDesc.style.visibility = 'hidden';
                        lblDesc2.style.visibility = 'hidden';
                        lblDesc3.style.visibility = 'visible';
                            lblDesc3.innerText = '1. Untuk dapat tersambung secara otomatis ke Shopee, Anda dapat melakukan save, dan akan dilanjutkan ke halaman shopee.';
                            lblDesc4.innerText = '';
                            lblPopUp.style.visibility = 'hidden';
                    }
                    //end add by calvin, button for generate lazada code

                    if (@shopify == response.Customers.NAMA) {
                        $('#lbl_Customers_API_KEY').html("API Key *");

                        var labelAPI_CLIENT_P = '<label id="labelAPI_CLIENT_P" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_API_CLIENT_P">API password *</label>';
                        var valuetxtAPI_CLIENT_P = "";
                        if (response.Customers.API_CLIENT_P != null) {
                            valuetxtAPI_CLIENT_P = response.Customers.API_CLIENT_P;
                        }
                        var txtAPI_CLIENT_P = '<div id="txtAPI_CLIENT_P" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" id="Customers_API_CLIENT_P" name="Customers.API_CLIENT_P" required="required" type="text" value="' + valuetxtAPI_CLIENT_P + '"></div>';

                        $('#BlibliClientPass').append(labelAPI_CLIENT_P + txtAPI_CLIENT_P);
                        $('#divAPIKey').show();
                        $('#BlibliMerchantID').hide();
                        $('#BlibliClient').hide();
                        $('#BlibliClientPass').show();
                        $('#Customers_TLP').val('.');
                    }

                    //add by fauzi 82Cart
                    if (@v82cart == response.Customers.NAMA) {
                        var labelSort1_Cust = '<label id="labelSort1_Cust" class="control-label col-md-3 col-sm-3 col-xs-12" for="Customers_Sort1_Cust">API Credential *</label>';

                        var valuetxtSort1_Cust = "";
                        if (response.Customers.Sort1_Cust != null) {
                            valuetxtSort1_Cust = response.Customers.Sort1_Cust;
                        }
                        var txtSort1_Cust = '<div id="txtSort1_Cust" class="col-md-6 col-sm-6 col-xs-6"><input class="form-control" data-val="true" data-val-length="The field Merchant ID must be a string with a maximum length of 30." data-val-length-max="30" id="Customers_Sort1_Cust" name="Customers.Sort1_Cust" required="required" type="text" value="' + valuetxtSort1_Cust + '" maxlength="30"></div>';
                        $('#BlibliMerchantID').append(labelSort1_Cust + txtSort1_Cust);
                        $('#BlibliMerchantID').show();
                        $('#descAPIKey').hide();
                        $('#id-nama-akun').html('URL Website *');
                        $('#txt-nama-akun').prop('placeholder', 'example : https://www.example.com');
                        $('#txt-nama-akun').val(response.Customers.PERSO);
                    } else {
                        $('#id-nama-akun').html('Nama Akun *');
                        $('#txt-nama-akun').prop('placeholder', '');
                    }

                    $('.customer_table_section').hide();
                    $('.customer_editor_section').show();
                    //add by nruul 18/10/2018
                    $("#Customers_TOP").keydown(
                        function () {
                            validateInput($(this), 'TOP');
                        });
                    //END ADD
                    $('#loading_spinner').hide();
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        //add by Tri, call midtrans api get token

        // add by fauzi 27 November 2019
        function getStatusSyncMarketplace(response) {
            var resp = false;
            var resultStatus = false;
            if (response == true) {
                resp = "true01"
            } else if (response == false) {
                resp = "false02"
            }

            var statusSyncMarketplace = $('#Customers_TIDAK_HIT_UANG_R').selectize({
                create: true,
                maxItems: 1,
                multiple: false,
                addOption: false,
                sortField: 'text',
                valueField: 'value',
                labelField: 'text',
                searchField: ['text'],
                options: [
                    { value: "true", text: "Aktif", selected: true },
                    { value: "false", text: "Tidak Aktif", selected: true },
                ],
                selectedField: "selected",
                //onInitialize: function () {
                //this.trigger('change', resp);
                //},
                onChange: function (value) {
                    if (value == "true") {
                        if (confirm("Anda akan menghidupkan fitur sync pesanan dan stok dari MasterOnline ke akun marketplace Anda dengan stok yang sudah Anda lengkapi di Master Online.\n\nLanjutkan ?")) {
                            $('#Customers_TIDAK_HIT_UANG_R').val("true");
                            resultStatus = true;
                            simpanStatusSyncPesananStok($('#Customers_CUST').val(), String(resultStatus));
                            statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                        }
                        else {
                            $('#Customers_TIDAK_HIT_UANG_R').val("false");
                            resultStatus = false;
                            statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                        }
                    }
                    else if (value == "false") {
                        if (confirm("Anda akan mematikan fitur sync pesanan dan stok dari MasterOnline ke akun marketplace Anda.\n\nLanjutkan ?")) {
                            $('#Customers_TIDAK_HIT_UANG_R').val("false");
                            resultStatus = false;
                            simpanStatusSyncPesananStok($('#Customers_CUST').val(), String(resultStatus));
                            statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                        }
                        else {
                            $('#Customers_TIDAK_HIT_UANG_R').val("true");
                            resultStatus = true;
                            statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                        }
                    }
                    else if (value == "true01") {
                        $('#Customers_TIDAK_HIT_UANG_R').val("true");
                        statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                    }
                    else if (value == "false02") {
                        $('#Customers_TIDAK_HIT_UANG_R').val("false");
                        statusSyncMarketplace[0].selectize.setValue($('#Customers_TIDAK_HIT_UANG_R').val(), true);
                    }
                }
            });
            statusSyncMarketplace[0].selectize.trigger('change', resp);

            if ($('#CUSTNUMBER').val() == "[AUTO]") {
                statusSyncMarketplace[0].selectize.disable();
            }
            else {
                statusSyncMarketplace[0].selectize.enable();
            }
        }

        function convertToRupiah(angka) {
            //change by calvin 26 september 2018
            //var rupiah = '';
            //var angkarev = angka.toString().split('').reverse().join('');
            //for (var i = 0; i < angkarev.length; i++) if (i % 3 === 0) rupiah += angkarev.substr(i, 3) + '.';
            //return rupiah.split('', rupiah.length - 1).reverse().join('') + ',00';
            return $.number(angka, 2, ',', '.');
            //end change by calvin 26 september 2018
        }

        function convertToAngka(rupiah) {
            if (rupiah == '') {
                rupiah = '0';
            }
            //change by calvin 26 september 2018
            //return parseInt(rupiah.replace(/,.*|[^0-9]/g, ''), 10);
            if (rupiah.includes(",00")) {
                return parseFloat(rupiah.replaceAll('.', '').replaceAll(',', '.'));
            }
            else {
                //jika bisa desimal
                return parseFloat(rupiah.replaceAll(',', '.'));
            }
            //end change by calvin 26 september 2018
        }

        function changeUser(val) {
            if (val == -1 && $('#txtJmlUser')[0].innerText == 5) {
                return;
            }
            var currentUser = parseInt($('#txtJmlUser')[0].innerText);
            var cost = convertToAngka($('#lbl_0_03')[0].innerText);
            var newCost = cost + (100000 * val);
            $('#txtJmlUser')[0].innerText = currentUser + val;
            $('#lbl_0_03')[0].innerText = convertToRupiah(newCost);
            $('#btnPay_3_03')[0].innerText = 'Rp ' + convertToRupiah(newCost * 3) + '\n per 3 bulan';
            $('#btnPay_12_03')[0].innerText = 'Rp ' + convertToRupiah(newCost * 10) + '\n per 12 bulan';

        }

        function setBln(kode, bln) {
            switch (kode){
                case "01":
                    break;
                case "02":
                    txtBln_02.value = bln;
                    break;
                case "03":
                    txtBln_03.value = bln;
                    break;
            }
        }

        function clickSub(kode, bln) {
            if ($('#ckBox')[0].checked) {
                //var bln = 0;
                //switch (kode) {
                //    case "01":
                //        break;
                //    case "02":
                //        bln = txtBln_02.value;
                //        break;
                //    case "03":
                //        bln = txtBln_03.value;
                //        break;
                //}
            @{
                //var accountId = dataSession?.Account?.AccountId; 'change by nurul 4/2/2019
                var accountId = new long();
                if (sessionAccount != null)
                {
                    accountId = Convert.ToInt64(sessionAccount);
                }
                else if (sessionUser != null)
                {
                    var userAccID = Convert.ToInt64(sessionUserAccountID);
                    accountId = context.Account.SingleOrDefault(a => a.AccountId == userAccID).AccountId;
                }
                //end change by nurul 4/2/2019
                var account = context.Account.Where(p => p.AccountId == accountId).SingleOrDefault();
            }
                //moment.locale('id');
                var tglSubThn = @account.TGL_SUBSCRIPTION.Value.Year;
                var tglSubBln = @account.TGL_SUBSCRIPTION.Value.Month;
                var tglSubHari = @account.TGL_SUBSCRIPTION.Value.Day;
                var tglSub = new Date(tglSubThn, parseInt(tglSubBln) - 1, tglSubHari);
                //var tglSub2 = moment(tglSubThn + '-' + tglSubBln + '-' + tglSubHari, 'yyyy-MM-dd');
                $('#txtCode').val(kode);
                $('#txtBulan').val(bln);

                if ('@account.KODE_SUBSCRIPTION' != '01' && tglSub >= Date.today()) {

                    //tglSub.setMonth(tglSub.getMonth() + bln);
                    var msg = "Masa berlangganan anda s/d " + tglSub.format("d-M-Y") + "\nApakah Anda ingin melakukan perpanjangan s/d : " + tglSub.addMonths(bln).format("d-M-Y") + "?";
                    if (confirm(msg)) {
                        //alert('kode:' + kode + '\nbln:' + bln);
                    @*var link = '@Url.Action("PaymentMidtrans", "Midtrans", new { code = "replaceCode", bulan = "replaceBulan" })';
                link = link.replace("replaceCode", kode);
                link = link.replace("replaceBulan", String(bln));*@
                        @*var link = '@Url.Action("PaymentMidtrans", "Midtrans")';
                        link += '?code=' + kode + '&bulan=' + bln + '&accId=0';

                        $.ajax({
                            type: "GET",
                            url: link,
                            success: function (response) {
                                if (response != null) {
                                    //window.location = response.urlView;
                                    if (response.error == null) {
                                        snap.pay(response.token, { skipOrderSummary: true });
                                    } else {
                                        alert(response.error);
                                    }
                                }
                                //window.open(response, "_self");
                                //window.location.href(response);

                            },
                            error: function (xhr, status, error) {
                                console.log(error);
                            }
                        });*@
                        $('#modalTransfer').modal('show');
                    }
                }
                else {
                    @*var link = '@Url.Action("PaymentMidtrans", "Midtrans")';
                    link += '?code=' + kode + '&bulan=' + bln + '&accId=0';

                    $.ajax({
                        type: "GET",
                        url: link,
                        success: function (response) {
                            if (response.error == null) {
                                snap.pay(response.token, { skipOrderSummary: true });
                            } else {
                                alert(response.error);
                            }
                            //window.open(response, "_self");
                            //window.location.href(response);

                        },
                        error: function (xhr, status, error) {
                            console.log(error);
                        }
                    });*@
                    $('#modalTransfer').modal('show');
                }
            } else {
                alert('Anda harus menyetujui Syarat & Ketentuan');
            }
        }

        function snapMidtrans(kode, bln) {
            var link = '@Url.Action("PaymentMidtrans", "Midtrans")';
            link += '?code=' + encodeURIComponent(kode) + '&bulan=' + encodeURIComponent(bln) + '&accId=0' + '&accCount=' + encodeURIComponent($('#txtJmlUser')[0].innerText);

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    if (response != null) {
                        //window.location = response.urlView;
                        if (response.error == null) {
                            snap.pay(response.token, { skipOrderSummary: true });
                            $('#modalTransfer').modal('hide');
                        } else {
                            alert(response.error);
                            $('#modalTransfer').modal('hide');
                        }
                    }
                    //window.open(response, "_self");
                    //window.location.href(response);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                    $('#modalTransfer').modal('hide');
                }
            });
        }
        @*function clickSub(sendKode)
        {
            var link = '@Url.Action("PaymentMidtrans", "Midtrans", new { code = "replaceCode" })';
            link = link.replace("replaceCode", sendKode);
            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {
                    if (response != null) {
                        //window.location = response.urlView;
                        snap.pay(response, { skipOrderSummary: true });
                        //alert(response);
                    }
                    //window.open(response, "_self");
                    //window.location.href(response);

                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
            //window.location = "http://localhost:50108/midtrans/PaymentMidtrans?code=0" + sendKode;
            //window.open($link, "_self");
            //alert('' +sendKode);
        }*@
        //end add by Tri, call midtrans api get token

        //add by Tri, get link to generate lazada code
        function GenerateLazadaCode(kdCust) {
            //alert(kdCust);
            var link = '@Url.Action("LazadaUrl", "Lazada", new { cust = "replaceCust" })';
            link = link.replace("replaceCust", encodeURIComponent(kdCust));

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {

                    var lzdAuthPopUp = window.open(response, "Lazada Authentication", "width=1000, height=600, scrollbars=yes");
                    var timer = setInterval(function () {
                        if (lzdAuthPopUp.closed) {
                            clearInterval(timer);
                            $('#loading_spinner').hide();
                            window.location.href = '@Url.Action("Pelanggan", "Manage")';
                        }
                    }, 1000);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function GenerateBukalapakCode(kdCust) {
            //alert(kdCust);
            var link = '@Url.Action("BukalapakAuth", "BukaLapak", new { cust = "replaceCust" })';
            link = link.replace("replaceCust", encodeURIComponent(kdCust));

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {

                    var blAuthPopUp = window.open(response, "BukaLapak Authentication", "width=1000, height=600, scrollbars=yes");
                    var timer = setInterval(function () {
                        if (blAuthPopUp.closed) {
                            clearInterval(timer);
                            $('#loading_spinner').hide();
                            window.location.href = '@Url.Action("Pelanggan", "Manage")';
                        }
                    }, 1000);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        //function opendialog(page) {
        //    var $dialog = $('#somediv')
        //        .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"></iframe>')
        //        .dialog({
        //            title: "Lazada Authentication",
        //            autoOpen: false,
        //            dialogClass: 'dialog_fixed,ui-widget-header',
        //            modal: true,
        //            height: 500,
        //            minWidth: 400,
        //            minHeight: 400,
        //            draggable: true,
        //            /*close: function () { $(this).remove(); },*/
        //            buttons: { "Close": function () { $(this).dialog("close"); } }
        //        });
        //    $dialog.dialog('open');
        //}
        //end add by Tri, get link to generate lazada code

        //add by calvin 10 desember 2018
        function GetShopeeShopId(kdCust) {
            //alert(kdCust);
            var link = '@Url.Action("ShopeeUrl", "Shopee", new { cust = "replaceCust" })';
            link = link.replace("replaceCust", encodeURIComponent(kdCust));

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {

                    var shpAuthPopUp = window.open(response, "Shopee Authentication", "width=600, height=600, scrollbars=yes");
                    var timer = setInterval(function () {
                        if (shpAuthPopUp.closed) {
                            clearInterval(timer);
                            $('#loading_spinner').hide();
                            window.location.href = '@Url.Action("Pelanggan", "Manage")';
                        }
                    }, 1000);
                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        //end add by calvin 10 desember 2018
        function pass(customerId, akunMarket) {
            this.$customerId = customerId;
            $('#hapus_label').text(akunMarket);
        }

        function deletecustomer() {
            var $savePage = $('#txt_last_page').val();
            var link = '@Url.Action("DeleteCustomer", "Manage", new { recNum = "replaceId" })';
            link = link.replace("replaceId", encodeURIComponent(this.$customerId));

            $.ajax({
                type: "GET",
                url: link,
                beforeSend: function () {
                    $('#loading_spinner').show();
                    $('#konfHapuscustomer').modal('hide');
                },
                success: function (response) {
                    if (response.Errors == null) {
                        $('#konfHapuscustomer').modal('hide');
                        //$('#table-customer-partial').html(response);
                        refreshTableCustomer($savePage);
                        //Initialize();

                        $('#modalPricing').on('hidden.bs.modal', function () {
                            namaMarket[0].selectize.setValue(null, true);

                        });

                        cekJumlahMarketplace();

                        //$('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" data-toggle="modal" ' +
                        //    'data-target="#modalPricing" id="tambah_market_pricing" style="display: none;">Modal Pricing</button>');
                        $('#tambah_baru_tombol_section').append('<button class="btn btn-primary btn_tambah_data" style="display: none;" id="tambah_market_pricing">Modal Pricing</button>');
                        var table = $('#datatable').DataTable();

                        //$('#search_customer').keyup(function () {
                        //    table.search($(this).val()).draw();
                        //});


                        $('#tambah_market').on('click', function () {
                            $('.customer_table_section').hide();
                            //add by fauzi 19 Desember 2019
                            getStatusSyncMarketplace(false);
                            //end
                            $('.customer_editor_section').show();
                            //add by nruul 18/10/2018
                            $("#Customers_TOP").keydown(
                                function () {
                                    validateInput($(this), 'TOP');
                                });
                            //END ADD
                        });
                        $('#loading_spinner').hide();
                    }
                    else {
                        alert(response.Errors[0]);
                        $('#loading_spinner').hide();
                    }

                },
                error: function (xhr, status, error) {
                    console.log(error);
                    $('#loading_spinner').hide();
                }
            });
        }
        function getCategoryBlibli() {
            var link = '@Url.Action("GetCategoryBlibli", "Manage")';
            //link = link.replace("replaceId", this.$customerId);

            $.ajax({
                type: "GET",
                url: link,
                success: function (response) {

                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }

        //add by nurul 22/10/2018
        function validateInput(obj, option) {
            var x = obj;
            setTimeout(function () {
                ValidateFullNamePaste2(x, option);
            }, 2);
        }

        function ValidateFullNamePaste2(obj, option) {
            var x = obj;
            var strValidChars = "";
            var totalCharacterCount = x.val();  //window.clipboardData.getData('Text');

            if (option == 'HURUF')
                strValidChars = "1234567890~!#$%^&*()_+|}{':;?/>.<,\"[]\\=";
            if (option == 'HURUFANGKA')
                strValidChars = "~!#$%^&*()_+|}{':;?/>.<,\"[]\\=";
            if (option == 'ANGKA')
                strValidChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!#$%^&*()_+|}{':;?/><,\"[]\\=";
            if (option == 'TOP')
                strValidChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~!#$%^&*()_+|}{':;?/>.<,-\"[]\\=";

            var strChar;
            var FilteredChars = "";
            for (i = 0; i < totalCharacterCount.length; i++) {
                strChar = totalCharacterCount.charAt(i);
                if (strValidChars.indexOf(strChar) == -1) {
                    FilteredChars = FilteredChars + strChar;
                }
            }
            obj.val(FilteredChars);
            return false;
        }
        //end add by nurul

        //ADD BY NURUL 16/7/2019, PAGING
        function refreshTableCustomer($savePage) {
            var $tpPage = "";
            if ($savePage == undefined) {
                $tpPage = $('#txt_last_page').val();
            } else {
                if ($('#txt_last_page').val() == undefined) {
                    $tpPage = $savePage;
                } else {
                    $tpPage = $('#txt_last_page').val();
                }
            }
            var $link = '@Html.Raw(Url.Action("RefreshTableCustomer", "Manage", new { page = "replaceLastPage", search = "replaceSearch" }))';
            $link = $link.replace("replaceSearch", encodeURIComponent($('#search_customer').val()));
            //$link = $link.replace("replaceLastPage", $('#txt_last_page').val());
            $link = $link.replace("replaceLastPage", encodeURIComponent($tpPage));

            $.ajax({
                type: "GET",
                url: $link,
                beforeSend: function () {
                    $('#table-customer-partial').hide();
                    $('#loading_customer_tab').show();
                },
                success: function (response) {
                    $('#table-customer-partial').html(response);
                    $('#loading_customer_tab').hide();
                    $('#table-customer-partial').show();

                },
                error: function (xhr, status, error) {
                    console.log(error);
                }
            });
        }
        function searchTableCustomer(){
            var $link = '@Html.Raw(Url.Action("RefreshTableCustomer", "Manage", new { search = "replaceSearch" }))';
            $link = $link.replace("replaceSearch", encodeURIComponent($('#search_customer').val()));

            $.ajax({
                type: "GET",
                url: $link,
                beforeSend: function () {
                    //$('#search_customer_click')[0].disabled = true;
                    $('#loading_customer_tab').show();
                },
                success: function (response) {
                    //$('#search_customer_click')[0].disabled = false;
                    $('#table-customer-partial').html(response);
                    $('#loading_customer_tab').hide();
                },
                error: function (xhr, status, error) {
                    //$('#search_customer_click')[0].disabled = false;
                    console.log(error);
                }
            });
        }
        //END ADD BY NURUL 16/7/2019, PAGING

        //add by nurul 15/7/2020
        function getVersiBlibli(response) {
            var resp = false;
            //var resultStatus = false;
            if (response == "2") {
                resp = "2";
            } else {
                resp = "1";
            }

            var versiBlibli = $('#Customers_KD_ANALISA').selectize({
                create: true,
                maxItems: 1,
                multiple: false,
                addOption: false,
                sortField: 'text',
                valueField: 'value',
                labelField: 'text',
                searchField: ['text'],
                options: [
                    { value: "1", text: "Token", selected: true },
                    { value: "2", text: "Non Token", selected: true },
                ],
                selectedField: "selected",
                //onInitialize: function () {
                //this.trigger('change', resp);
                //},
                onChange: function (value) {
                    if (value == "2") {
                        $('#Customers_KD_ANALISA').val("2");
                        versiBlibli[0].selectize.setValue(value, true);
                        showHideBlibliForm(true);
                        $('#BlibliSellerID').show();
                        $('#BlibliMerchantID').hide();
                        $('#BlibliClient').hide();
                        $('#BlibliClientPass').hide();
                        $('#password-akun').hide();


                    }
                    else  {
                        $('#Customers_KD_ANALISA').val("1");
                        versiBlibli[0].selectize.setValue(value, true);
                        showHideBlibliForm(true);
                        $('#BlibliSellerID').hide();

                        $('#password-akun').show();
                        $('#BlibliMerchantID').show();
                        $('#BlibliClient').show();
                        $('#BlibliClientPass').show();
                    }
                }
            });
            //versiBlibli[0].selectize.trigger('change', resp);
            versiBlibli[0].selectize.setValue($('#Customers_KD_ANALISA').val(), true);
        }
        //end add by nurul 15/7/2020
</script>
}
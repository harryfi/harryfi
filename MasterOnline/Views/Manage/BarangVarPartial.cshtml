@using System.Globalization
@using MasterOnline.ViewModels
@model MasterOnline.ViewModels.BarangStrukturVarViewModel
@{
    var dataSession = Session["SessionInfo"] as AccountUserViewModel;
    var username = "";
    var context = new MoDbContext();
    if (dataSession?.User != null)
    {
        var accId = context.User.Single(u => u.Username == dataSession.User.Username).AccountId;
        username = context.Account.Single(a => a.AccountId == accId).Username;
    }
    else
    {
        username = dataSession?.Account.Username;
    }
}
@Html.AntiForgeryToken()
<script type="text/javascript">
    $(document).ready(function () {
        getOptSelectMultiple(1);
        getOptSelectMultiple(2);
        getOptSelectMultiple(3);

        $(function () {
            $('#variant-tabs a:first').tab('show');
        });

        if ($('#txtShopeeCategoryCodeFound').val() > -1) {
            var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
            var fieldCategoryName = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_NAME';
            $(fieldCategoryCode).change(function () {
                $('#txtKodeKategoriShopee').val($(fieldCategoryCode).val());
            });
            $(fieldCategoryName).change(function () {
                $('#txtNamaKategoriShopee').val($(fieldCategoryName).val());
            });
        }

        $('#variant-tabs a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var target = $(e.target).attr("href");
            if ((target == '#shopee_detail_tab_variant')) {
                var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
                var fieldCategoryName = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_NAME';
                $('#txtKodeKategoriShopee').val($(fieldCategoryCode).val());
                $('#txtNamaKategoriShopee').val($(fieldCategoryName).val());
            }
        });
    });

    function getOptSelectMultiple(level) {
        if ($('#select_opt_level_' + level).length > 0) {
            var post_data = {
                brg: $('#Stf02_BRG').val(),
                code: $('#txtKodeKategori').val(),
                level: level
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetOptVariantBarang", "Manage")',
                data: post_data,
                success: function (data) {
                    var listAttributeOpt = [];
                    var adaValue = data.selected;
                    $.each(data.options,
                        function (i, item) {
                            listAttributeOpt[i] = {
                                id: item.KODE_VAR,
                                text: item.KET_VAR
                            };
                        });
                    var AttributeOptSelectMultiple = $('#select_opt_level_' + level).selectize({
                        maxItems: 20,
                        valueField: 'id',
                        searchField: 'text',
                        options: listAttributeOpt
                    });

                    if (adaValue != "") {
                        var adaValues = adaValue.split(',');
                        AttributeOptSelectMultiple[0].selectize.setValue(adaValues, true);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }
    }
    var validasi_prosesBarangVarPartial = true;
    var message_validasi_prosesBarangVarPartial = "";
    function prosesBarangVarPartial() {
        validasi_prosesBarangVarPartial = true;
        message_validasi_prosesBarangVarPartial = "";

        //validasi Master Online
        if ($('#Stf02_BRG').val() == "" || $('#Stf02_BRG').val() == null) {
            validasi_prosesBarangVarPartial = false;
            message_validasi_prosesBarangVarPartial = "Kode Barang harus diisi";
        }
        if ($('#txtKodeKategori').val() == "" || $('#txtKodeKategori').val() == null) {
            validasi_prosesBarangVarPartial = false;
            message_validasi_prosesBarangVarPartial = "Kategori harus diisi";
        }
        //end validasi Master Online

        var shopee_code = "";
        var ada_shopee = false;
        if ($('#txtShopeeCategoryCodeFound').val() != undefined) {
            if ($('#txtShopeeCategoryCodeFound').val() > -1) {
                ada_shopee = true;
                var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
                shopee_code = $(fieldCategoryCode).val();
                validasiProsesBarangVarPartialShopee();
            }
        }

        if (validasi_prosesBarangVarPartial) {
            var post_data = {
                brg: $('#Stf02_BRG').val(),
                shopee_code: shopee_code,
                code: $('#txtKodeKategori').val(),
                opt_selected_1: $('#select_opt_level_1').val(),
                opt_selected_2: $('#select_opt_level_2').val(),
                opt_selected_3: $('#select_opt_level_3').val()
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("SaveOptVariantBarang", "Manage")',
                data: post_data,
                beforeSend: function () {
                    $('#loading_spinner').show();
                },
                success: function (response) {
                    $('#var-structure-partial').html(response);
                    $('#loading_spinner').hide();
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }
        else {
            if (message_validasi_prosesBarangVarPartial != "") {
                alert(message_validasi_prosesBarangVarPartial);
            }
        }
    }
    function validasiProsesBarangVarPartialShopee() {
        var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
        if ($(fieldCategoryCode).val() != undefined) {
            if ($(fieldCategoryCode).val() == null || $(fieldCategoryCode).val() == "") {
                validasi_prosesBarangVarPartial = false;
                message_validasi_prosesBarangVarPartial = "Category Shopee harus dipilih terlebih dahulu.";
            }
        }
    }

    function autoloadStf02Variant() {
        validasi_autoloadStf02Variant = true;
        message_validasi_autoloadStf02Variant = "";

        //validasi Master Online
        if ($('#Stf02_BRG').val() == "" || $('#Stf02_BRG').val() == null) {
            validasi_autoloadStf02Variant = false;
            message_validasi_autoloadStf02Variant = "Kode Barang harus diisi";
        }
        if ($('#Stf02_BRG').val() == "" || $('#Stf02_BRG').val() == null) {
            validasi_autoloadStf02Variant = false;
            message_validasi_autoloadStf02Variant = "Kode Barang harus diisi";
        }
        //end validasi Master Online

        var shopee_code = "";
        var ada_shopee = false;
        if ($('#txtShopeeCategoryCodeFound').val() != undefined) {
            if ($('#txtShopeeCategoryCodeFound').val() > -1) {
                ada_shopee = true;
                var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
                shopee_code = $(fieldCategoryCode).val();
                validasiProsesBarangVarPartialShopee();
            }
        }

        if (validasi_autoloadStf02Variant) {
            var listVariantShopeeLv1 = [];
            var listVariantShopeeLv2 = [];
            var listVariantShopeeLv3 = [];

            if (ada_shopee) {
                $(".txtVariantShopeeLv1_").each(function (i, item) {
                    listVariantShopeeLv1[i] = $(item).val();
                });
                $(".txtVariantShopeeLv2_").each(function (i, item) {
                    listVariantShopeeLv2[i] = $(item).val();
                });
                $(".txtVariantShopeeLv3_").each(function (i, item) {
                    listVariantShopeeLv3[i] = $(item).val();
                });
            }

            var post_data = {
                brg: $('#Stf02_BRG').val(),
                code: $('#txtKodeKategori').val(),
                opt_selected_1: $('#select_opt_level_1').val(),
                opt_selected_2: $('#select_opt_level_2').val(),
                opt_selected_3: $('#select_opt_level_3').val(),
                shopee: {
                    code: shopee_code,
                    var_judul: {
                        lv_1: $("#txtJudulVariantShopeeLv1").val(),
                        lv_2: $("#txtJudulVariantShopeeLv2").val(),
                        lv_3: $("#txtJudulVariantShopeeLv3").val()
                    },
                    var_detail: {
                        lv_1: listVariantShopeeLv1,
                        lv_2: listVariantShopeeLv2,
                        lv_3: listVariantShopeeLv3
                    }
                }
            }
            $.ajax({
                type: "POST",
                url: '@Url.Action("AutoloadVariantBarang", "Manage")',
                data: post_data,
                beforeSend: function () {
                    $('#loading_spinner').show();
                },
                success: function (response) {
                    $('#var-detail-variant-partial').html(response);
                    $('#loading_spinner').hide();
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        }
        else {
            if (message_validasi_autoloadStf02Variant != "") {
                alert(message_validasi_autoloadStf02Variant);
            }
        }
    }
    function validasiProsesBarangVarPartialShopee() {
        var fieldCategoryCode = '#ListHargaJualPermarket_' + $('#txtShopeeCategoryCodeFound').val() + '__CATEGORY_CODE';
        if ($(fieldCategoryCode).val() != undefined) {
            if ($(fieldCategoryCode).val() == null || $(fieldCategoryCode).val() == "") {
                validasi_autoloadStf02Variant = false;
                message_validasi_autoloadStf02Variant = "Category Shopee harus dipilih terlebih dahulu.";
            }
        }
    }
</script>
<div class="form-horizontal">
    <div id="variant-section">
        <table style="width:100%">
            <tr>
                <td style="width:90%">
                    <ul id="variant-tabs" class="nav nav-tabs">
                        <li><a data-toggle="tab" href="#masteronline_detail_tab_variant">Master Online</a></li>
                        @{
                            var listMarket = Model.ListMarket;
                            var adaElevenia_variant = 0;
                            var adaBlibli_variant = 0;
                            var adaBukalapak_variant = 0;
                            var adaLazada_variant = 0;
                            var adaShopee_variant = 0;
                        }
                        @for (var i = 0; i < listMarket.ToList().Count; i++)
            {
                var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                if (context.Marketplaces.Single(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("ELEVENIA"))
                {
                    adaElevenia_variant = 1;
                }
                else if (context.Marketplaces.Single(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("BLIBLI"))
                {
                    adaBlibli_variant = 1;
                }
                else if (context.Marketplaces.Single(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("BUKALAPAK"))
                {
                    adaBukalapak_variant = 1;
                }
                else if (context.Marketplaces.Single(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("LAZADA"))
                {
                    adaLazada_variant = 1;
                }
                else if (context.Marketplaces.Single(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("SHOPEE"))
                {
                    adaShopee_variant = 1;
                }
            }
                        @if (adaElevenia_variant == 1)
            {
                        <li><a data-toggle="tab" href="#elevenia_detail_tab_variant">Elevenia</a></li>
                        }
                        @if (adaBlibli_variant == 1)
            {
                        <li><a data-toggle="tab" href="#blibli_detail_tab_variant">Blibli</a></li>
                        }
                        @if (adaLazada_variant == 1)
            {
                        <li><a data-toggle="tab" href="#lazada_detail_tab_variant">Lazada</a></li>
                        }
                        @if (adaShopee_variant == 1)
            {
                        <li><a data-toggle="tab" href="#shopee_detail_tab_variant">Shopee</a></li>
                        }
                    </ul>
                </td>
                <td style="width:10%">
                    <input type="button" class="btn btn-primary pull-right" id="proses_var_btn" value="Proses" onclick="autoloadStf02Variant()" />
                </td>
            </tr>
        </table>

        <div class="tab-content">
            <div id="masteronline_detail_tab_variant" class="tab-pane fade in active">
                <div class="row" style="padding-top:10px">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        @{
                            var shopeeCategoryCodeFound = -1;
                        }
                        @for (var i = 0; i < listMarket.ToList().Count; i++)
                        {
                            if (shopeeCategoryCodeFound == -1)
                            {
                                var idMarket = Convert.ToInt32(listMarket[i].NAMA);
                                var recnumArf01 = Convert.ToInt32(listMarket[i].RecNum);
                                if (context.Marketplaces.SingleOrDefault(m => m.IdMarket == idMarket).NamaMarket.ToUpper().Equals("SHOPEE"))
                                {
                                    if (!string.IsNullOrEmpty(listMarket[i].Sort1_Cust))
                                    {
                                        shopeeCategoryCodeFound = i;
                                        @Html.TextBox("txtShopeeCategoryCodeFound", @shopeeCategoryCodeFound, new { @class = "form-control", disabled = "disabled", @style = "display:none;" })
                                    }
                                }
                            }
                        }
                        <div class="form-group" style="display:none">
                            @Html.Label("lblKodeKategori", "Kode Kategori", new { @class = "control-label col-md-2 col-sm-2 col-xs-12" })
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                @Html.TextBox("txtKodeKategori", Model.Kategori.KODE, new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("lblNamaKategori", "Kategori", new { @class = "control-label col-md-2 col-sm-2 col-xs-12" })
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                @Html.TextBox("txtNamaKategori", Model.Kategori.KET, new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>
                        @if (!string.IsNullOrWhiteSpace(Model.Variant_Level_1.VALUE_JUDUL_VAR))
                        {
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Variasi Level 1")
                                </label>
                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    @Html.TextBoxFor(m => m.Variant_Level_1.VALUE_JUDUL_VAR, new { @class = "form-control", disabled = "disabled", Value = Model.Variant_Level_1.VALUE_JUDUL_VAR, placeholder = "" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Opsi Tersedia")
                                </label>
                                <div class="col-md-4"><select id="select_opt_level_1" placeholder="Harap pilih"></select></div>
                            </div>
                        }
                        @if (!string.IsNullOrWhiteSpace(Model.Variant_Level_2.VALUE_JUDUL_VAR))
                        {
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Variasi Level 2")
                                </label>
                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    @Html.TextBoxFor(m => m.Variant_Level_2.VALUE_JUDUL_VAR, new { @class = "form-control", disabled = "disabled", Value = Model.Variant_Level_2.VALUE_JUDUL_VAR, placeholder = "" })
                                </div>
                                <div class="col-md-5 col-sm-5 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Opsi Tersedia")
                                </label>
                                <div class="col-md-4"><select id="select_opt_level_2" placeholder="Harap pilih"></select></div>
                            </div>
                        }
                        @if (!string.IsNullOrWhiteSpace(Model.Variant_Level_3.VALUE_JUDUL_VAR))
                        {
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Variasi Level 3")
                                </label>
                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    @Html.TextBoxFor(m => m.Variant_Level_3.VALUE_JUDUL_VAR, new { @class = "form-control", disabled = "disabled", Value = Model.Variant_Level_3.VALUE_JUDUL_VAR, placeholder = "" })
                                </div>
                                <div class="col-md-5 col-sm-5 col-xs-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12">
                                    @($"Opsi Tersedia")
                                </label>
                                <div class="col-md-4"><select id="select_opt_level_3" placeholder="Harap pilih"></select></div>
                            </div>
                        }
                        <div class="form-group">
                            <div class="col-md-4">
                                <input type="button" class="btn btn-primary pull-right" id="proses_var_btn" value="Simpan" onclick="prosesBarangVarPartial()" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="elevenia_detail_tab_variant" class="tab-pane fade in">
            </div>
            <div id="blibli_detail_tab_variant" class="tab-pane fade in">
            </div>
            <div id="lazada_detail_tab_variant" class="tab-pane fade in">
            </div>
            <div id="shopee_detail_tab_variant" class="tab-pane fade in">
                <div class="row" style="padding-top:10px">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <div class="form-group" style="display:none">
                            @Html.Label("lblKodeKategoriShopee", "Kode Kategori", new { @class = "control-label col-md-2 col-sm-2 col-xs-12" })
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                @Html.TextBox("txtKodeKategoriShopee", "", new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.Label("lblNamaKategoriShopee", "Kategori MO", new { @class = "control-label col-md-2 col-sm-2 col-xs-12" })
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                @Html.TextBox("txtNamaKategoriMOShopee", Model.Kategori.KET, new { @class = "form-control", disabled = "disabled" })
                            </div>
                            @Html.Label("lblNamaKategoriShopee", "Kategori Shopee", new { @class = "control-label col-md-2 col-sm-2 col-xs-12" })
                            <div class="col-md-4 col-sm-4 col-xs-12">
                                @Html.TextBox("txtNamaKategoriShopee", "", new { @class = "form-control", disabled = "disabled" })
                            </div>
                        </div>
                        @{
                            var code_kategori1 = Model.Kategori.KODE;
                            var VariantOptMasterLv1 = Model.VariantOptMaster.Where(p => p.LEVEL_VAR == 1 && p.CATEGORY_MO == code_kategori1).ToList();
                            var VariantPerMpShopeeLv1 = Model.VariantPerMP.Where(p => p.LEVEL_VAR == 1 && p.CATEGORY_MO == code_kategori1 && p.MARKET == "SHOPEE").OrderBy(p => p.RECNUM).ToList();
                            if (VariantPerMpShopeeLv1.Count() > 0)
                            {
                                var textJudulVar1 = "";
                                var judulVar1 = VariantPerMpShopeeLv1.FirstOrDefault();
                                if (judulVar1 != null)
                                {
                                    textJudulVar1 = judulVar1.MP_JUDUL_VAR;
                                }
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    @Html.TextBox("txtJudulMOShopeeLv1", Model.Variant_Level_1.VALUE_JUDUL_VAR, new
                                                               {
                                                                   @class = "form-control",
                                                                   disabled = "disabled",
                                                                   @style = "border:none;background-color:#fff;box-shadow:none;"
                                                               })
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv1.Count(); i++)
                                                            {
                                                                var textKetVar1 = "";
                                                                var KetVar1 = VariantOptMasterLv1.Where(p => p.KODE_VAR == VariantPerMpShopeeLv1[i].KODE_VAR).FirstOrDefault();
                                                                if (KetVar1 != null)
                                                                {
                                                                    textKetVar1 = KetVar1.KET_VAR;
                                                                }
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtOpsiMOShopeeLv1", textKetVar1, new
                                                                   {
                                                                       @class = "form-control",
                                                                       disabled = "disabled",
                                                                       @style = "border:none;background-color:#fff;box-shadow:none;"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    @Html.TextBox("txtJudulVariantShopeeLv1", textJudulVar1, new
                                                               {
                                                                   @class = "form-control",
                                                                   placeholder = "Nama Variasi untuk Shopee"
                                                               })
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv1.Count(); i++)
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtVariantShopeeLv1_" + VariantPerMpShopeeLv1[i].RECNUM, VariantPerMpShopeeLv1[i].MP_VALUE_VAR, new
                                                                   {
                                                                       @class = "form-control txtVariantShopeeLv1_",
                                                                       placeholder = "Nama Opsi untuk Shopee"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            }

                            var code_kategori2 = Model.Kategori.KODE;
                            var VariantOptMasterLv2 = Model.VariantOptMaster.Where(p => p.LEVEL_VAR == 2 && p.CATEGORY_MO == code_kategori2).ToList();
                            var VariantPerMpShopeeLv2 = Model.VariantPerMP.Where(p => p.LEVEL_VAR == 2 && p.CATEGORY_MO == code_kategori2 && p.MARKET == "SHOPEE").OrderBy(p => p.RECNUM).ToList();
                            if (VariantPerMpShopeeLv2.Count() > 0)
                            {
                                var textJudulVar2 = "";
                                var judulVar2 = VariantPerMpShopeeLv1.FirstOrDefault();
                                if (judulVar2 != null)
                                {
                                    textJudulVar2 = judulVar2.MP_JUDUL_VAR;
                                }
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    @Html.TextBox("txtJudulMOShopeeLv2", Model.Variant_Level_2.VALUE_JUDUL_VAR, new
                                                               {
                                                                   @class = "form-control",
                                                                   disabled = "disabled",
                                                                   @style = "border:none;background-color:#fff;box-shadow:none;"
                                                               })
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv2.Count(); i++)
                                                            {
                                                                var textKetVar2 = "";
                                                                var KetVar2 = VariantOptMasterLv2.Where(p => p.KODE_VAR == VariantPerMpShopeeLv2[i].KODE_VAR).FirstOrDefault();
                                                                if (KetVar2 != null)
                                                                {
                                                                    textKetVar2 = KetVar2.KET_VAR;
                                                                }
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtOpsiMOShopeeLv2", textKetVar2, new
                                                                   {
                                                                       @class = "form-control",
                                                                       disabled = "disabled",
                                                                       @style = "border:none;background-color:#fff;box-shadow:none;"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    @Html.TextBox("txtJudulVariantShopeeLv2", textJudulVar2, new
                                                               {
                                                                   @class = "form-control",
                                                                   placeholder = "Nama Variasi untuk Shopee"
                                                               })
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv2.Count(); i++)
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtVariantShopeeLv2_" + VariantPerMpShopeeLv2[i].RECNUM, VariantPerMpShopeeLv2[i].MP_VALUE_VAR, new
                                                                   {
                                                                       @class = "form-control txtVariantShopeeLv2_",
                                                                       placeholder = "Nama Opsi untuk Shopee"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            }

                            var code_kategori3 = Model.Kategori.KODE;
                            var VariantOptMasterLv3 = Model.VariantOptMaster.Where(p => p.LEVEL_VAR == 3 && p.CATEGORY_MO == code_kategori3).ToList();
                            var VariantPerMpShopeeLv3 = Model.VariantPerMP.Where(p => p.LEVEL_VAR == 3 && p.CATEGORY_MO == code_kategori3 && p.MARKET == "SHOPEE").OrderBy(p => p.RECNUM).ToList();
                            if (VariantPerMpShopeeLv3.Count() > 0)
                            {
                                var textJudulVar3 = "";
                                var judulVar3 = VariantPerMpShopeeLv3.FirstOrDefault();
                                if (judulVar3 != null)
                                {
                                    textJudulVar3 = judulVar3.MP_JUDUL_VAR;
                                }
                                <div class="form-group">
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>

                                                                <td>
                                                                    @Html.TextBox("txtJudulMOShopeeLv3", Model.Variant_Level_3.VALUE_JUDUL_VAR, new
                                                               {
                                                                   @class = "form-control",
                                                                   disabled = "disabled",
                                                                   @style = "border:none;background-color:#fff;box-shadow:none;"
                                                               })
                                                                </td>

                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Master Online</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv3.Count(); i++)
                                                            {
                                                                var textKetVar3 = "";
                                                                var KetVar3 = VariantOptMasterLv3.Where(p => p.KODE_VAR == VariantPerMpShopeeLv3[i].KODE_VAR).FirstOrDefault();
                                                                if (KetVar3 != null)
                                                                {
                                                                    textKetVar3 = KetVar3.KET_VAR;
                                                                }
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtOpsiMOShopeeLv3", textKetVar3, new
                                                                   {
                                                                       @class = "form-control",
                                                                       disabled = "disabled",
                                                                       @style = "border:none;background-color:#fff;box-shadow:none;"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <table style="width:100%">
                                            <tr>
                                                <td style="vertical-align:top !important;">
                                                    <table class="table table-bordered" style="width:100%;border-right:none" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%" style="border-right:none">Judul Variasi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>
                                                                    @Html.TextBox("txtJudulVariantShopeeLv3", textJudulVar3, new
                                                               {
                                                                   @class = "form-control",
                                                                   placeholder = "Nama Variasi untuk Shopee"
                                                               })
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="vertical-align:top !important">
                                                    <table class="table table-bordered" style="width:100%" role="grid">
                                                        <thead>
                                                            <tr>
                                                                <th width="100%">Nama Opsi Shopee</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @for (int i = 0; i < VariantPerMpShopeeLv3.Count(); i++)
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        @Html.TextBox("txtVariantShopeeLv3_" + VariantPerMpShopeeLv3[i].RECNUM, VariantPerMpShopeeLv3[i].MP_VALUE_VAR, new
                                                                   {
                                                                       @class = "form-control txtVariantShopeeLv3_",
                                                                       placeholder = "Nama Opsi untuk Shopee"
                                                                   })
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
